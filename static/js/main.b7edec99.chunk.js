(this["webpackJsonpuniq-ex"]=this["webpackJsonpuniq-ex"]||[]).push([[0],{367:function(e,t,n){},370:function(e,t,n){},452:function(e,t){},453:function(e,t){},472:function(e,t){},474:function(e,t){},484:function(e,t){},486:function(e,t){},527:function(e,t){},529:function(e,t){},536:function(e,t){},537:function(e,t){},567:function(e,t){},590:function(e,t){},593:function(e,t,n){var a={"./aes":271,"./aes.js":271,"./big":272,"./big.js":272,"./ctx":172,"./ctx.js":172,"./ecdh":273,"./ecdh.js":273,"./ecp":274,"./ecp.js":274,"./ecp2":275,"./ecp2.js":275,"./ff":276,"./ff.js":276,"./fp":277,"./fp.js":277,"./fp12":278,"./fp12.js":278,"./fp2":279,"./fp2.js":279,"./fp4":280,"./fp4.js":280,"./gcm":281,"./gcm.js":281,"./hash256":282,"./hash256.js":282,"./hash384":283,"./hash384.js":283,"./hash512":284,"./hash512.js":284,"./mpin":285,"./mpin.js":285,"./newhope":286,"./newhope.js":286,"./nhs":287,"./nhs.js":287,"./pair":288,"./pair.js":288,"./rand":289,"./rand.js":289,"./rom_curve":290,"./rom_curve.js":290,"./rom_field":291,"./rom_field.js":291,"./rsa":292,"./rsa.js":292,"./sha3":293,"./sha3.js":293,"./uint64":294,"./uint64.js":294};function c(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=s,e.exports=c,c.id=593},621:function(e,t,n){},622:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},641:function(e,t,n){},643:function(e,t,n){},644:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){},649:function(e,t,n){},650:function(e,t,n){},653:function(e,t,n){},654:function(e,t,n){},655:function(e,t,n){},656:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),s=n(1),i=n.n(s),r=n(24),o=n.n(r),l=n(8),d=n.n(l),u=n(15),j=n(11),m=n(38),p=n(30),b=n(33),h=n(12),v=n(7),f=function(e){var t=e.value,n=void 0===t?"":t,a=e.cls,i=void 0===a?"":a,r=(e.round,e.disabled),o=e.decimals,l=e.inline,d=void 0===l||l,u=e.onChange,j=Object(s.useState)(""),m=Object(v.a)(j,2),p=m[0],b=m[1];Object(s.useEffect)((function(){b(n)}),[n]);var h=o>0?"0.0":"0",f=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;return""===e||"0"===e||(t>0?new RegExp("^(([0-9]{0,20})|(([0]\\.\\d{0,".concat(t,"}|[0-9]{0,20}\\.\\d{0,").concat(t,"})))$")):new RegExp("^[0-9]{0,20}$")).test(e)?e:p}(e.target.value,o);b(t),"function"===typeof u&&u(t)};return Object(c.jsx)("input",{className:"input ".concat(d?"inline-input":""," ").concat(i),type:"text",placeholder:h,value:p,disabled:r,onInput:function(e){return f(e)}})},O="TEST",x="4ff0e29de750e612cf7195b00861b35191ac5bca",k="https://explorer.ont.io/transaction/",w="/testnet",g=["/","/swap","/trade","/governance","/synth","/option"];function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,n=parseFloat(0===t?Math.round(e).toFixed(t):parseFloat(e).toFixed(t)).toString();return n&&(-1!==n.indexOf(".")?n.replace(/(\d)(?=(\d{3})+\.)/g,(function(e,t){return"".concat(t,",")})):n.replace(/(?=(\B\d{3})+$)/g,","))}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e.substr(0,4),"...").concat(e.substr(-4))},S=(n(367),function(e){var t=Object(s.useState)(""),n=Object(v.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)(!1),o=Object(v.a)(r,2),l=o[0],d=o[1],u=Object(h.c)((function(e){return{account:e.wallet.account,slippage:e.wallet.slippage}})),j=u.account,b=u.slippage,O=Object(s.useState)(!1),x=Object(v.a)(O,2),k=x[0],w=x[1],N=Object(h.b)(),S=Object(s.useCallback)((function(e){return N({type:"SET_SLIPPAGE",slippage:e})}),[]),T=Object(p.g)().pathname;Object(s.useEffect)((function(){var e="";"/"===T||T.indexOf("/staking")>=0?e="/":T.indexOf("/synth")>=0?e="/synth":T.indexOf("/swap")>=0||T.indexOf("/pool")>=0?e="/swap":T.indexOf("/trade")>=0?e="/trade":T.indexOf("/governance")>=0?e="/governance":T.indexOf("/token")>=0?e="/token":T.indexOf("/option")>=0&&(e="/option"),i(e)}),[T]);return Object(c.jsxs)("div",{className:"header-wrapper",children:[function(){if(k){var e="".concat(window.location.origin).concat(window.location.pathname,"#/trade?pair=pDAI%2FUNX");return Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){w(!1)}}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex is a pure github based DAO dex, all activities are logged on github."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can open issues for discussion ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/uniq-ex/uniq-ex/issues",children:"here"})]}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex's future business will not be limited to exchanges though, we may enter various DeFi markets like compound or hegic."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can buy UNX(the governance token of uniq-ex) ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:e,children:"here"})]})]})})}return null}(),Object(c.jsx)("div",{className:"header",children:Object(c.jsxs)("div",{className:"content-wrapper",children:[Object(c.jsx)("div",{className:"logo-wrapper",children:"UNIQ-EX"}),Object(c.jsxs)("div",{className:"nav-list",children:[g.indexOf("/")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/",children:"Staking"})}):null,g.indexOf("/synth")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/synth"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/synth",children:"Synth"})}):null,g.indexOf("/swap")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/swap"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/swap",children:"Swap"})}):null,g.indexOf("/trade")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/trade"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/trade",children:"Trade"})}):null,g.indexOf("/governance")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/governance"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/governance",children:"Governance"})}):null,g.indexOf("/token")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/token"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/token",children:"Token"})}):null,g.indexOf("/option")>=0?Object(c.jsx)("div",{className:"nav-item ".concat("/option"===a?"selected":""),children:Object(c.jsx)(m.b,{to:"/option",children:"Option"})}):null]}),Object(c.jsxs)("div",{className:"".concat(j?"active":""," profile-wrapper"),children:[!j&&Object(c.jsx)("span",{className:"connect-btn",onClick:function(){"function"===typeof e.onConnectWallet&&e.onConnectWallet()},children:"Connect Wallet"}),j&&Object(c.jsx)("span",{className:"account-address",onClick:function(){d(!l)},children:y(j)}),l?Object(c.jsxs)("div",{className:"profile-panel",children:[Object(c.jsxs)("div",{className:"setting-wrapper",children:[Object(c.jsx)("div",{className:"setting-section-title",children:"SLIPPAGE"}),Object(c.jsxs)("div",{className:"slippage-setting",children:[Object(c.jsx)("div",{className:"slippage-item ".concat(.1===Number(b)?"selected":""),onClick:function(){return S("0.1")},children:"0.1%"}),Object(c.jsx)("div",{className:"slippage-item ".concat(.5===Number(b)?"selected":""),onClick:function(){return S("0.5")},children:"0.5%"}),Object(c.jsx)("div",{className:"slippage-item ".concat(1===Number(b)?"selected":""),onClick:function(){return S("1.0")},children:"1.0%"}),Object(c.jsxs)("div",{className:"slippage-input-wrapper",children:[Object(c.jsx)(f,{value:b,cls:"slippage-input",decimals:"2",placeholder:b,onChange:function(e){return S(e)}}),"%"]})]})]}),Object(c.jsx)("div",{className:"signout-btn",onClick:function(){return d(!1),void("function"===typeof e.onSignOut&&e.onSignOut())},children:"Sign Out"})]}):null]})]})})]})}),T=(n(370),function(e){return Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return e.onCloseModal()}}),Object(c.jsx)("div",{className:"modal-icon-".concat(e.type," modal-icon")}),Object(c.jsx)("div",{className:"modal-text-".concat(e.type," modal-text"),children:e.text}),e.detail?Object(c.jsx)("div",{className:"modal-detail",children:e.detail}):null,Object(c.jsx)("div",{className:"modal-extra-text",children:e.extraLink?Object(c.jsx)("a",{className:"transaction-link",target:"_blank",rel:"noreferrer",href:e.extraLink,children:e.extraText}):e.extraText})]})})}),_=function(e){var t=Object(h.c)((function(e){return{infoModal:e.modal.infoModal}})).infoModal,n=Object(h.b)(),i=Object(s.useCallback)((function(e,t){return n({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]);return Object(c.jsx)("div",{className:"modal-container",children:function(){var e=[];return t.show&&e.push(Object(c.jsx)(T,Object(a.a)(Object(a.a)({},t),{},{onCloseModal:function(){i("infoModal",Object.assign({},t,{show:!1}))}}))),e}()})},E=n(27),A=n(2),C=n.n(A),I=n(119),P=n.n(I),L=P.a.create({baseURL:"https://polarisexplorer.ont.io",timeout:3e4,headers:{"Content-Type":"application/json"}});L.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var R=L,M=E.utils.reverseHex,D=function(e){for(var t=M(e.read(16)).split("").reverse(),n=new C.a(0),a=0;a<t.length;a++)n=n.plus(new C.a(16).pow(a).times(parseInt(t[a],16)));return n.isZero()?0:n.toString()},U=function(e,t,n){if("ONT"!==t.name&&"ONG"!==t.name){var a={scriptHash:t.address,operation:"balanceOf",args:[{type:"Address",value:e}]},c=j.client.api.smartContract.invokeRead;2!==t.ty&&3!==t.ty||(c=j.client.api.smartContract.invokeWasmRead),c(a).then((function(e){if(e){for(var a=M(e).split("").reverse(),c=new C.a(0),s=0;s<a.length;s++)c=c.plus(new C.a(Math.pow(16,s)).times(parseInt(a[s],16)));n(c.div(Math.pow(10,t.decimals)).toString())}}))}else R({method:"get",url:"/v2/addresses/".concat(e,"/native/balances")}).then((function(e){if(0===e.code){var a=e.result.find((function(e){return e.asset_name===t.name.toLowerCase()}));n(a.balance)}})).catch((function(e){console.log(e)}))},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.id?Object(c.jsx)("div",{className:"token-icon-wrapper ".concat(t),children:3===e.ty?e.name.split("-").slice(1).map((function(t){return Object(c.jsx)("div",{className:"token-icon-item with-drop-shadow icon-".concat(t)},"".concat(e.name,"-").concat(t))})):Object(c.jsx)("div",{className:"token-icon-item icon-".concat(e.name)})}):null},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var n=JSON.parse(e);"wasm contract does not exist"===n.Result&&t("CONTRACT_ADDRESS_ERROR")}catch(a){}},V=Math.pow(10,9),B=Math.pow(10,12),H="01",q="02",X="00",K="01",Y=(n(621),E.utils.StringReader),z=function(){var e=Object(s.useState)(""),t=Object(v.a)(e,2),n=t[0],i=t[1],r=Object(s.useState)(!1),o=Object(v.a)(r,2),l=o[0],m=o[1],p=Object(h.c)((function(e){return Object(a.a)(Object(a.a)({account:e.wallet.account,stopInterval:e.common.stopInterval,tokens:e.common.tokens},e.trade),{},{CONTRACT_ADDRESS:e.gov.poolStat.pools.dex.address})})),O=p.account,x=p.stopInterval,g=p.tokens,N=p.makes,y=p.myMakes,S=p.pairs,T=p.tradeType,_=p.tokenPair,E=p.makeView,A=p.pool,I=p.lastPrice,P=p.feeRate,L=p.isValid,R=p.tokenBalance,M=p.price,F=p.amount,B=p.total,H=p.CONTRACT_ADDRESS,q=Object(h.b)(),X=Object(s.useCallback)((function(e,t){return q({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),K=Object(s.useCallback)((function(e){return q({type:"SET_STOP_INTERVAL",stopInterval:e})}),[]),z=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_MAKES",makes:e})}),[]),G=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_MY_MAKES",myMakes:e})}),[]),$=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_PAIRS",pairs:e})}),[]),Q=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_TOKEN_PAIR",tokenPair:e})}),[]),J=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_TYPE",tradeType:e})}),[]),Z=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_MAKE_VIEW",makeView:e})}),[]),ee=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_POOL",pool:e})}),[]),te=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_LAST_PRICE",lastPrice:e})}),[]),ne=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_FEE_RATE",feeRate:e})}),[]),ae=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_IS_VALID",isValid:e})}),[]),ce=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_TOKEN_BALANCE",tokenBalance:e})}),[]),se=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_PRICE",price:e})}),[]),ie=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_AMOUNT",amount:e})}),[]),re=Object(s.useCallback)((function(e){return q({type:"SET_TRADE_TOTAL",total:e})}),[]),oe=Object(b.c)(),le=decodeURIComponent(function(e,t){var n=new RegExp("(^|&|[/?]+)".concat(t,"=([^&]*)(&|$)"),"i"),a=e.substr(1).match(n);return null!=a?a[2]:null}(window.location.hash,"pair")||"")||localStorage.getItem("trade_token_pair")||"";function de(e){if(_.name){var t="my"===E?y:N;return"sell"===e?t.filter((function(e){return e.asset_token_id===_.tokens[0].id&&e.price_token_id===_.tokens[1].id})).map((function(e){var t="my"!==E&&!!y.find((function(t){return e.make_id===t.make_id}));return Object(c.jsxs)("div",{className:"my-make-item reverse ".concat(t?"mine":""),children:[Object(c.jsx)("div",{className:"make-item-detail make-sell",children:new C.a(e.price).div(V).toString()}),Object(c.jsx)("div",{className:"make-item-detail",children:new C.a(e.amount).div(Math.pow(10,_.tokens[0].decimals)).toString()}),"my"===E&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return je(e.make_id)},children:"Cancel"})]},e.make_id)})):t.filter((function(e){return e.asset_token_id===_.tokens[1].id&&e.price_token_id===_.tokens[0].id})).map((function(e){var t="my"!==E&&!!y.find((function(t){return e.make_id===t.make_id}));return Object(c.jsxs)("div",{className:"my-make-item ".concat(t?"mine":""),children:[Object(c.jsx)("div",{className:"make-item-detail make-buy",children:new C.a(e.price).div(V).toString()}),Object(c.jsx)("div",{className:"make-item-detail",children:new C.a(e.amount).div(e.price).times(V).div(Math.pow(10,_.tokens[1].decimals)).toString()}),"my"===E&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return je(e.make_id)},children:"Cancel"})]},e.make_id)}))}return null}function ue(){return(ue=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=3;break}return oe.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!_.name||!H){e.next=24;break}if(!(M<=0)){e.next=7;break}return oe.error("Price should be greater than 0"),e.abrupt("return");case 7:if(!(F<=0)){e.next=10;break}return oe.error("Amount should be greater than 0"),e.abrupt("return");case 10:return e.prev=10,t="buy"===T?_.tokens[1]:_.tokens[0],n="buy"===T?_.tokens[0]:_.tokens[1],a="buy"===T?B:F,c=[{type:"Address",value:O},{type:"Long",value:t.id},{type:"Long",value:n.id},{type:"Long",value:new C.a(M).times(V).integerValue(C.a.ROUND_DOWN).toString()},{type:"Long",value:new C.a(a).times(new C.a(Math.pow(10,t.decimals))).integerValue(C.a.ROUND_DOWN).toString()}],e.next=17,j.client.api.smartContract.invokeWasm({scriptHash:H,operation:"make",args:c,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 17:(s=e.sent).transaction&&(ie(""),se(""),re(""),X("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(s.transaction).concat(w)})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),X("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 24:case"end":return e.stop()}}),e,null,[[10,21]])})))).apply(this,arguments)}function je(e){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O&&t&&H)){e.next=11;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasm({scriptHash:H,operation:"unmake",args:[{type:"Address",value:O},{type:"Long",value:t}],gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 4:(n=e.sent).transaction&&X("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(n.transaction).concat(w)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),X("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function pe(){if(_.name)return _.tokens[1].name}function be(){if(_.name)return _.tokens[0].name}Object(s.useEffect)((function(){S.length&&!_.name&&Q(S.find((function(e){return e.name==="".concat(le)}))||S.find((function(e){return"pDAI/UNX"===e.name}))||S.find((function(e){return"UNX/pDAI"===e.name})))}),[S]),Object(s.useEffect)((function(){O&&_.name&&U(O,"buy"===T?_.tokens[1]:_.tokens[0],(function(e){ce(e)}))}),[O,_,T]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.name||!H){e.next=16;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:H,operation:"get_makes_of_pair",args:[{type:"Long",value:_.tokens[0].id},{type:"Long",value:_.tokens[1].id}]});case 4:for(t=e.sent,n=[],a=new Y(t),c=a.readUint128(),s=0;s<=1;s++)for(i=a.readNextLen(),r=0;r<i;r++)(o={}).make_id=a.readUint128(),o.price=a.readUint128(),o.amount=new C.a(a.readUint128()).toString(),o.asset_token_id=0===s?_.tokens[0].id:_.tokens[1].id,o.price_token_id=0===s?_.tokens[1].id:_.tokens[0].id,n.push(o);te(c?new C.a(c).div(V).toString():0),z(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),W(e.t0,(function(t){"CONTRACT_ADDRESS_ERROR"===t?K(!0):console.log("get makes of pair",e.t0)}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}e();var n=!x&&setInterval(e,2e3);return function(){n&&clearInterval(n)}}),[_,O,x,H]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O||!H){e.next=15;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:H,operation:"get_user_makes",args:[{type:"Address",value:O}]});case 4:for(t=e.sent,n=[],a=new Y(t),c=a.readNextLen(),s=0;s<c;s++)(i={}).address=j.client.api.utils.hexToAddress(a.read(20)),i.asset_token_id=a.readUint128(),i.price_token_id=a.readUint128(),i.price=a.readUint128(),i.amount=a.readUint128(),i.make_id=a.readUint128(),n.push(i);G(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),W(e.t0,(function(t){"CONTRACT_ADDRESS_ERROR"===t?K(!0):console.log("get user makes",e.t0)}));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}e();var n=!x&&setInterval(e,5e3);return function(){n&&clearInterval(n)}}),[_,O,x,H]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i,r,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.length||!H){e.next=18;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:H,operation:"stat",args:[]});case 4:for(t=e.sent,n=[],a=new Y(t),ne(a.readUint128()),c=a.readNextLen(),s=function(e){var t={};t.id=a.readUint128();var c=g.find((function(e){return e.id===t.id}));t.weight=a.readUint128(),t.balance=new C.a(D(a)).div(new C.a(Math.pow(10,c.decimals))).toString(),n.push(Object.assign(c,t))},i=0;i<c;i++)s();if(!S.length){for(r=[],o=0;o<n.length;o++)for(l=o+1;l<n.length;l++)n[o].weight>n[l].weight||n[o].weight===n[l].weight&&n[o].id>n[l].id?r.push({name:"".concat(n[l].name,"/").concat(n[o].name),tokens:[n[l],n[o]]}):r.push({name:"".concat(n[o].name,"/").concat(n[l].name),tokens:[n[o],n[l]]});$(r)}ee(n),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),W(e.t0,(function(t){"CONTRACT_ADDRESS_ERROR"===t?K(!0):console.log("get stat",e.t0)}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}e();var n=setInterval((function(){x?clearInterval(n):e()}),5e3);return function(){return clearInterval(n)}}),[g,S,x,H]),Object(s.useEffect)((function(){M>0&&F>0&&re(new C.a(M).times(F).toString())}),[M,F]),Object(s.useEffect)((function(){M>0&&ie(new C.a(B||0).div(M).toString())}),[B]),Object(s.useEffect)((function(){_.name&&M>0&&F>0?ae(!0):ae(!1)}),[_,F,M]),Object(s.useEffect)((function(){Z("all")}),[O]);return Object(c.jsxs)("div",{className:"swap-wrapper",children:[Object(c.jsxs)("div",{className:"trade-container",children:[Object(c.jsxs)("div",{className:"make-wrapper",children:[Object(c.jsxs)("div",{className:"container-header",children:["Trade",_.name?Object(c.jsx)("div",{className:"token-pair-select",onClick:function(){return m(!0)},children:Object(c.jsx)("div",{className:"token-pair-name",children:_.name})}):null]}),Object(c.jsxs)("div",{className:"trade-type-switch",children:[Object(c.jsx)("div",{className:"trade-type-item ".concat("buy"===T?"trade-buy":""),onClick:function(){return J("buy")},children:"Buy"}),Object(c.jsx)("div",{className:"trade-type-item ".concat("sell"===T?"trade-sell":""),onClick:function(){return J("sell")},children:"Sell"})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Price",Object(c.jsx)("span",{className:"hint",children:pe()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)(f,{placeholder:"0.0",value:M,decimals:"9",onChange:function(e){return se(e)}})})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Amount",Object(c.jsx)("span",{className:"hint",children:be()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)(f,{placeholder:"0.0",value:F,decimals:_.tokens?_.tokens[0].decimals:"9",onChange:function(e){return ie(e)}})})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Total ","buy"===T?"Need":"Receive",Object(c.jsx)("span",{className:"hint",children:pe()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)(f,{placeholder:"0.0",value:B,decimals:"9",onChange:function(e){return re(e)}})})]}),_.name?Object(c.jsxs)("div",{className:"balance-line",children:["Balance: ",Object(c.jsxs)("span",{children:[R," ","buy"===T?_.tokens[1].name:_.tokens[0].name]})]}):null,P?Object(c.jsxs)("p",{className:"fee-rate",children:["* The fee rate of transaction is ",P/100,"%"]}):null,L?Object(c.jsxs)("div",{className:"make-btn make-btn-".concat(T),onClick:function(){return function(){return ue.apply(this,arguments)}()},children:[T.toUpperCase()," ",_.tokens[0].name]}):Object(c.jsxs)("div",{className:"make-btn disabled",children:[T.toUpperCase()," ",_.tokens?_.tokens[0].name:""]})]}),Object(c.jsxs)("div",{className:"trade-panel",children:[Object(c.jsxs)("div",{className:"panel-header",children:[Object(c.jsx)("div",{className:"panel-title",children:"Order Book"}),Object(c.jsxs)("div",{className:"tabs",children:[Object(c.jsx)("div",{className:"all"===E?"tab-wrapper selected":"tab-wrapper",onClick:function(){return Z("all")},children:"All"}),Object(c.jsx)("div",{className:"my"===E?"tab-wrapper selected":"tab-wrapper",onClick:function(){O?Z("my"):oe.show("Please Connect Wallet First")},children:"My"})]})]}),Object(c.jsxs)("div",{className:"list-title",children:[Object(c.jsx)("div",{className:"blank-placeholder"}),Object(c.jsxs)("div",{className:"title-items",children:[Object(c.jsxs)("div",{className:"item-text",children:["Price (",pe(),")"]}),Object(c.jsxs)("div",{className:"item-text",children:["Amount (",be(),")"]}),"my"===E&&Object(c.jsx)("div",{className:"item-placeholder"})]})]}),Object(c.jsxs)("div",{className:"sell-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Sell"}),Object(c.jsx)("div",{className:"make-list reverse",children:de("sell")})]}),"all"===E&&0!==Number(I)?Object(c.jsxs)("div",{className:"last-price-wrapper",children:[Object(c.jsx)("div",{className:"last-price-label",children:"Last Price"}),Object(c.jsx)("div",{className:"last-price",children:I}),Object(c.jsx)("div",{className:"last-price-placeholder"})]}):null,Object(c.jsxs)("div",{className:"buy-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Buy"}),Object(c.jsx)("div",{className:"make-list",children:de("buy")})]})]})]}),A.filter((function(e){return 0!==Number(e.balance)})).length?Object(c.jsxs)("div",{className:"token-pool",children:[Object(c.jsx)("div",{className:"container-header",children:"Token Balance"}),Object(c.jsx)("div",{className:"pool-items",children:function(){if(A.length)return A.filter((function(e){return 0!==Number(e.balance)})).map((function(e){return Object(c.jsxs)("div",{className:"pool-item",children:[Object(c.jsx)("div",{className:"icon-".concat(e.name," token-name"),children:e.name}),Object(c.jsx)("div",{className:"token-balance",children:e.balance})]},e.name)}))}()})]}):null,l?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return m(!1)}}),Object(c.jsxs)("div",{className:"pair-select-modal-wrapper",children:[Object(c.jsx)("div",{className:"pair-select-modal-title",children:"Select"}),Object(c.jsx)("input",{type:"text",className:"pair-select-modal-input",value:n,onInput:function(e){return i(e.target.value)}}),Object(c.jsx)("div",{className:"pair-select-modal-list",children:S.filter((function(e){var t=e.name.toLowerCase();return n.split(" ").filter((function(e){return e})).reduce((function(e,n){return e&&t.indexOf(n)>=0}),!0)})).map((function(e){return Object(c.jsxs)("div",{className:"pair-select-modal-list-item",onClick:function(){return t=e,ce("-"),Q(t),localStorage.setItem("trade_token_pair",t.name),void m(!1);var t},children:[e.tokens.map((function(t){return Object(c.jsx)("div",{className:"pair-select-modal-list-item-icon icon-".concat(t.name)},"".concat(e.name,"-").concat(t.name))})),Object(c.jsx)("div",{className:"pair-select-modal-list-item-name",children:e.name})]},e.name)}))})]})]})}):null]})},G=n(313),$=n(14),Q=n(312),J=(n(622),function(e){var t=e.cls,n=e.value,i=e.round,r=e.tokens,o=void 0===r?[]:r,l=e.defaultToken,d=e.inputDisabled,u=void 0!==d&&d,j=e.showBalance,m=void 0===j||j,p=e.withMax,b=void 0===p||p,O=e.onTokenChange,x=e.onAmountChange,k=e.balanceChange,w=void 0===k?0:k,g=Object(s.useState)(l||{}),N=Object(v.a)(g,2),y=N[0],S=N[1],T=Object(s.useState)("-"),_=Object(v.a)(T,2),E=_[0],A=_[1],C=Object(h.c)((function(e){return{account:e.wallet.account}})).account;Object(s.useEffect)((function(){C&&m&&y.id&&U(C,y,A)}),[y,m,C,w]);return Object(c.jsxs)("div",{className:"token-input-wrapper",children:[Object(c.jsxs)("div",{className:"input-label",children:[e.label||"Input",m?Object(c.jsxs)("span",{className:"hint",children:["Balance: ",E]}):null]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[function(e){if(o.length){var n=e||o[0];return y.id&&o.find((function(e){return e.id===y.id}))||S(n),Object(c.jsx)(Q.a,{className:"token-select ".concat(t),defaultValue:n,options:o,isSearchable:!1,components:{Option:function(e){var t=e.label.split(" ")[0];return Object(c.jsx)($.f.Option,Object(a.a)(Object(a.a)({},e),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"icon-".concat(t," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:e.label})]})}))},SingleValue:function(e){var t=e.children,n=Object(G.a)(e,["children"]),s=t.split(" ")[0];return Object(c.jsx)($.f.SingleValue,Object(a.a)(Object(a.a)({},n),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"icon-".concat(s," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:t})]})}))}},onChange:function(e){return function(e){if(e.value!==y.id){var t=o.find((function(t){return t.id===e.value}));S(t),"function"===typeof O&&O(t)}}(e)},theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary:"#2c2c2c"})})}})}}(l),Object(c.jsx)(f,{decimals:y.decimals,disabled:u,value:n,round:i,onChange:function(e){return x(e)}}),b&&Object(c.jsx)("div",{className:"input-max-btn",onClick:function(){isNaN(E)||"function"!==typeof x||x(E)},children:"MAX"})]})]})}),Z=E.utils.StringReader,ee=E.utils.reverseHex,te=function(){var e=Object(h.c)((function(e){return{account:e.wallet.account,tokens:e.common.tokens,swapTokens:e.swap.tokens,SWAP_ADDRESS:e.gov.poolStat.pools.swap.address}})),t=e.account,n=e.tokens,a=e.swapTokens,c=e.SWAP_ADDRESS,i=Object(h.b)(),r=Object(s.useCallback)((function(e){return i({type:"SET_SWAP_TOKENS",tokens:e})}),[]),o=Object(s.useCallback)((function(e){return i({type:"SET_PAIRS",pairs:e})}),[]);function l(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(d.a.mark((function e(){var t,s,i,l,u,m,p,b,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=19;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:c,operation:"stat",args:[]});case 4:for(t=e.sent,s=[],i=new Z(t),l=i.readNextLen(),u=0;u<l;u++)(m={}).address=ee(i.read(20)),m.token1=i.readUint128(),m.token2=i.readUint128(),m.id=i.readUint128(),m.reserve1=D(i),m.reserve2=D(i),m.lp=D(i),m.min1=D(i),m.min2=D(i),s.push(m);for(p=[],b=i.readNextLen(),h=0;h<b;h++)p.push(i.readUint128());o(s),n.length&&!a.length&&r(p.map((function(e){return n.find((function(t){return t.id===e}))}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){l();var e=setInterval(l,3e3);return function(){e&&clearInterval(e)}}),[t,n,a,c]),null},ne=n(76),ae=.997,ce=function(e,t,n){var a=[];return function t(n,c){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if((s=Object(ne.a)(s)).push(n),n!==c){var i=[];e.map((function(e){e.token1===n?i.push(e.token2):e.token2===n&&i.push(e.token1)}));for(var r=0,o=i;r<o.length;r++){var l=o[r];s.includes(l)||t(l,c,s)}}else a.push(s)}(t,n),a.sort((function(e,t){return e.length-t.length})),a},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?new C.a(t.reserve1).times(t.reserve2).div(new C.a(t.reserve1).minus(e)).minus(t.reserve2).div(ae).integerValue(C.a.ROUND_CEIL).toString():new C.a(t.reserve1).times(t.reserve2).div(new C.a(t.reserve2).minus(e)).minus(t.reserve1).div(ae).integerValue(C.a.ROUND_CEIL).toString()},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?new C.a(t.reserve1).minus(new C.a(t.reserve1).times(t.reserve2).div(new C.a(e).times(ae).plus(t.reserve2))).integerValue(C.a.ROUND_FLOOR).toString():new C.a(t.reserve2).minus(new C.a(t.reserve1).times(t.reserve2).div(new C.a(e).times(ae).plus(t.reserve1))).integerValue(C.a.ROUND_FLOOR).toString()},re=function(e,t,n,a){var c=t.find((function(e){return e.token1===n&&e.token2===a}));return c?ie(e,c):(c=t.find((function(e){return e.token1===a&&e.token2===n})))?ie(e,c,!0):void 0},oe=function(e,t,n,a){var c=t.find((function(e){return e.token1===n&&e.token2===a}));return c?se(e,c):(c=t.find((function(e){return e.token1===a&&e.token2===n})))?se(e,c,!0):void 0},le=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"exactin",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,s=ce(n,a,c),i=t,r=0,o=1/0,l=[],d=0;d<s.length;d++)if(t=i,"exactin"===e){for(var u=0;u<s[d].length-1;u++)t=re(t,n,s[d][u],s[d][u+1]);new C.a(t).gt(new C.a(r))&&(r=t,l=s[d])}else{for(var j=s[d].length-1;j>0;j--)t=oe(t,n,s[d][j-1],s[d][j]);new C.a(t).lt(new C.a(o))&&t>0&&(o=t,l=s[d])}return"exactin"===e?[r,l]:"exactout"===e?[o,l]:void 0},de=(n(639),function(){var e=Object(s.useState)(0),t=Object(v.a)(e,2),n=t[0],i=t[1],r=Object(h.c)((function(e){return Object(a.a)(Object(a.a)({account:e.wallet.account,slippage:e.wallet.slippage},e.swap),{},{SWAP_ADDRESS:e.gov.poolStat.pools.swap.address})})),o=r.account,l=r.slippage,m=r.pairs,f=r.tokens,O=r.swapType,x=r.token1,g=r.token2,y=r.token1Amount,S=r.token2Amount,T=r.isValidPair,_=r.isValidSwap,E=r.bestPath,A=r.showPrice,I=r.SWAP_ADDRESS,P=Object(h.b)(),L=Object(s.useCallback)((function(e,t){return P({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),R=Object(s.useCallback)((function(e){return P({type:"SET_SWAP_TYPE",swapType:e})}),[]),M=Object(s.useCallback)((function(e){return P({type:"SET_SWAP_TOKEN1",token1:e})}),[]),D=Object(s.useCallback)((function(e){return P({type:"SET_SWAP_TOKEN2",token2:e})}),[]),U=Object(s.useCallback)((function(e){return P({type:"SET_TOKEN1_AMOUNT",token1Amount:e})}),[]),F=Object(s.useCallback)((function(e){return P({type:"SET_TOKEN2_AMOUNT",token2Amount:e})}),[]),W=Object(s.useCallback)((function(e){return P({type:"SET_IS_VALID_PAIR",isValidPair:e})}),[]),V=Object(s.useCallback)((function(e){return P({type:"SET_IS_VALID_SWAP",isValidSwap:e})}),[]),B=Object(s.useCallback)((function(e){return P({type:"SET_SWAP_BEST_PATH",bestPath:e})}),[]),H=Object(s.useCallback)((function(e){return P({type:"SET_SWAP_SHOW_RPICE",showPrice:e})}),[]),q=Object(b.c)(),X=Object(p.f)();function K(){return(K=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return q.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!(y<=0||S<=0)){e.next=6;break}return q.error("Amount should be greater than 0"),e.abrupt("return");case 6:if(!x.id||x.id!==g.id){e.next=9;break}return q.error("Input should be different"),e.abrupt("return");case 9:if(!I){e.next=21;break}return e.prev=10,t=[{type:"Address",value:o},{type:"Long",value:new C.a(y).times(new C.a(Math.pow(10,x.decimals))).integerValue(C.a.ROUND_DOWN).toString()},{type:"Long",value:new C.a(S).times(new C.a(Math.pow(10,g.decimals))).integerValue(C.a.ROUND_DOWN).toString()},{type:"Array",value:E.map((function(e){return{type:"Long",value:e}}))},{type:"Address",value:o}],e.next=14,j.client.api.smartContract.invokeWasm({scriptHash:I,operation:"exactin"===O?"swap_exact_tokens_for_tokens":"swap_tokens_for_exact_tokens",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 14:(a=e.sent).transaction&&(i(n+1),U(""),F(""),L("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(a.transaction).concat(w)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),L("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 21:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return te(),Object(s.useEffect)((function(){x.id!==g.id&&y>0&&S>0&&E.length?(H(!0),V(!0)):(H(!1),V(!1))}),[x,g,y,S,E]),Object(s.useEffect)((function(){f.length&&(M(f.find((function(e){return e.name===(localStorage.getItem("swap_token1")||"pDAI")}))),D(f.find((function(e){return e.name===(localStorage.getItem("swap_token2")||"UNX")}))))}),[f]),Object(s.useEffect)((function(){x.id&&g.id&&function(e,t){if(m.length&&e&&t&&m.find((function(n){return n.token1===e&&n.token2===t||n.token1===t&&n.token2===e})))return!0;return!1}(x.id,g.id)?W(!0):W(!1)}),[x,g]),Object(c.jsx)("div",{className:"sw-wrapper",children:Object(c.jsxs)("div",{className:"sw-container",children:[Object(c.jsxs)("div",{className:"sw-tabs",children:[Object(c.jsx)("div",{className:"sw-tab active",children:"Swap"}),Object(c.jsx)("div",{className:"sw-tab",onClick:function(){X.push("/pool")},children:"Pool"})]}),Object(c.jsxs)("div",{className:"sw-content",children:[Object(c.jsx)(J,{balanceChange:n,label:"From",tokens:f,value:y,round:"up",defaultToken:f.length&&f.find((function(e){return e.name===(localStorage.getItem("swap_token1")||"pDAI")})),onTokenChange:function(e){return function(e){e.id!==x.id&&(M(e),localStorage.setItem("swap_token1",e.name),U(""),F(""))}(e)},onAmountChange:function(e){return function(e){if(e!==y)if(R("exactin"),U(e),T&&e){var t=new C.a(e).times(Math.pow(10,x.decimals)).toString(),n=le("exactin",t,m,x.id,g.id),a=Object(v.a)(n,2),c=a[0],s=a[1];F(new C.a(c).div(Math.pow(10,g.decimals)).toString()),B(s)}else 0===Number(e)&&F("")}(e)}}),Object(c.jsx)("div",{className:"icon-arrow-down"}),Object(c.jsx)(J,{balanceChange:n,label:"To",tokens:f,value:S,round:"down",defaultToken:f.length&&f.find((function(e){return e.name===(localStorage.getItem("swap_token2")||"UNX")})),onTokenChange:function(e){return function(e){e.id!==g.id&&(D(e),localStorage.setItem("swap_token2",e.name),U(""),F(""))}(e)},onAmountChange:function(e){return function(e){if(e!==S)if(R("exactout"),F(e),T&&e){var t=e*Math.pow(10,g.decimals),n=le("exactout",t,m,x.id,g.id),a=Object(v.a)(n,2),c=a[0],s=a[1];U(c===1/0?"":new C.a(c).div(Math.pow(10,x.decimals)).toString()),B(s)}else 0===Number(e)&&U("")}(e)}}),A?Object(c.jsxs)("div",{className:"sw-price-wrapper",children:["Price",Object(c.jsx)("span",{className:"sw-price-info",children:"".concat(N(S/y,6)," ").concat(g.name," per ").concat(x.name)})]}):null,T?null:Object(c.jsx)("div",{className:"add-liquidity-hint",children:"Add liquidity to enable swaps for this pair."}),T?_?Object(c.jsx)("div",{className:"sw-swap-btn",onClick:function(){return function(){return K.apply(this,arguments)}()},children:"Swap"}):Object(c.jsx)("div",{className:"sw-swap-btn disabled",children:"Swap"}):Object(c.jsx)("div",{className:"sw-swap-btn disabled",children:"Invalid Liquidity"})]}),T&&_?Object(c.jsxs)("div",{className:"sw-hint-wrapper",children:[Object(c.jsx)("div",{className:"sw-input-output",children:"exactin"===O?Object(c.jsxs)("p",{children:["Minimum Received:",Object(c.jsxs)("span",{children:[N(S*(1-l/100),6)," ",g.name]})]}):Object(c.jsxs)("p",{children:["Maximum Sold:",Object(c.jsxs)("span",{children:[N(y*(1+l/100),6)," ",x.name]})]})}),Object(c.jsx)("div",{className:"sw-price-impact",children:function(){var e,t=m.find((function(e){return e.token1===x.id&&e.token2===g.id}));return t?e=new C.a(t.reserve2).div(Math.pow(10,g.decimals)).div(t.reserve1).times(Math.pow(10,x.decimals)).toString():(t=m.find((function(e){return e.token1===g.id&&e.token2===x.id})))&&(e=new C.a(t.reserve1).div(Math.pow(10,x.decimals)).div(t.reserve2).times(Math.pow(10,g.decimals)).toString()),Object(c.jsxs)("p",{children:["Price Impact:",Object(c.jsxs)("span",{children:[Math.abs((S/y-e)/e*100).toFixed(2),"%"]})]})}()}),Object(c.jsxs)("div",{className:"sw-best-path",children:[Object(c.jsx)("p",{children:"Route:"}),Object(c.jsx)("div",{className:"sw-best-path-list",children:function(){if(E.length){var e=[];return E.map((function(t,n){var a=f.find((function(e){return e.id===t}));return n>0&&e.push(Object(c.jsx)("div",{className:"icon-arrow-right"})),e.push(Object(c.jsx)("div",{className:"path-icon icon-".concat(a.name),children:a.name})),t})),e}}()})]})]}):null]})})}),ue=n(86),je=(n(640),E.utils.StringReader),me=function(){var e=Object(h.c)((function(e){return Object(a.a)(Object(a.a)({account:e.wallet.account,tokens:e.common.tokens,pairs:e.swap.pairs},e.pool),{},{SWAP_ADDRESS:e.gov.poolStat.pools.swap.address})})),t=e.account,n=e.tokens,i=e.pairs,r=e.liquidityBalance,o=e.SWAP_ADDRESS,l=Object(h.b)(),d=Object(s.useCallback)((function(e){return l({type:"SET_POOL_LIQUIDITY_BALANCE",liquidityBalance:e})}),[]),u=Object(p.f)();return te(),Object(s.useEffect)((function(){if(t&&i.length&&o){Promise.all(i.map((function(e){return n=e.id,j.client.api.smartContract.invokeWasmRead({scriptHash:o,operation:"balanceOf",args:[{type:"Long",value:n},{type:"Address",value:t}]}).then((function(e){var t=new je(e),a=D(t);return Object(ue.a)({},n,a)}));var n}))).then((function(e){d(e)}))}}),[t,i,o]),Object(c.jsx)("div",{className:"pool-wrapper",children:Object(c.jsxs)("div",{className:"pool-container",children:[Object(c.jsxs)("div",{className:"sw-tabs",children:[Object(c.jsx)("div",{className:"sw-tab",onClick:function(){u.push("/swap")},children:"Swap"}),Object(c.jsx)("div",{className:"sw-tab active",children:"Pool"})]}),Object(c.jsxs)("div",{className:"pool-content",children:[Object(c.jsx)("div",{className:"pool-add-liquidity-btn",onClick:function(){u.push("/pool/add")},children:"Add Liquidity"}),Object(c.jsxs)("div",{className:"pool-liquidity-list",children:[Object(c.jsx)("div",{className:"my-liquidity",children:"Your Liquidity"}),function(){var e=r.filter((function(e){return e[Object.keys(e)[0]]}));return e.length&&i.length&&n.length?e.map((function(e){var t=Object.keys(e)[0],a=i.find((function(e){return"".concat(e.id)===t})),s=n.find((function(e){return e.id===a.token1})),r=n.find((function(e){return e.id===a.token2})),o=new C.a(e[t]),l=o.div(a.lp),d=l.times(a.reserve1).div(Math.pow(10,s.decimals)).toFixed(s.decimals),j=l.times(a.reserve2).div(Math.pow(10,r.decimals)).toFixed(r.decimals);return Object(c.jsxs)("div",{className:"pool-liquidity-item",children:[Object(c.jsxs)("div",{className:"liquidity-item-detail",children:[Object(c.jsx)("div",{className:"token-icon icon-".concat(s.name)}),Object(c.jsx)("div",{className:"token-icon icon-".concat(r.name)}),Object(c.jsx)("div",{className:"token-pair",children:Object(c.jsxs)("strong",{children:[s.name,"/",r.name]})}),Object(c.jsxs)("div",{className:"pair-position",children:[Object(c.jsx)("strong",{children:"Pooled"}),": ",d," / ",j]}),Object(c.jsxs)("div",{className:"pool-tokens",children:[Object(c.jsx)("strong",{children:"Pool Tokens"}),": ",o.div(Math.pow(10,18)).toString()]})]}),Object(c.jsx)("div",{className:"remove-liquidity-btn",onClick:function(){return function(e){u.push("/pool/remove/".concat(e))}(t)},children:"Remove"})]})})):Object(c.jsx)("div",{className:"pool-empty-lp",children:"No Liquidities"})}()]})]})]})})},pe=(n(641),function(){var e=Object(s.useState)({}),t=Object(v.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)({}),r=Object(v.a)(i,2),o=r[0],l=r[1],m=Object(s.useState)(""),f=Object(v.a)(m,2),O=f[0],x=f[1],g=Object(s.useState)(""),N=Object(v.a)(g,2),y=N[0],S=N[1],T=Object(s.useState)(""),_=Object(v.a)(T,2),E=_[0],A=_[1],I=Object(s.useState)(""),P=Object(v.a)(I,2),L=P[0],R=P[1],M=Object(s.useState)(!1),D=Object(v.a)(M,2),U=D[0],F=D[1],W=Object(s.useState)(!0),V=Object(v.a)(W,2),B=V[0],H=V[1],q=Object(s.useState)(!1),X=Object(v.a)(q,2),K=X[0],Y=X[1],z=Object(s.useState)(!1),G=Object(v.a)(z,2),$=G[0],Q=G[1],Z=Object(s.useState)(0),ee=Object(v.a)(Z,2),ne=ee[0],ae=ee[1],ce=Object(h.c)((function(e){return{account:e.wallet.account,slippage:e.wallet.slippage,pairs:e.swap.pairs,swapTokens:e.swap.tokens,SWAP_ADDRESS:e.gov.poolStat.pools.swap.address}})),se=ce.account,ie=ce.slippage,re=ce.pairs,oe=ce.swapTokens,le=ce.SWAP_ADDRESS,de=Object(h.b)(),ue=Object(s.useCallback)((function(e,t){return de({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),je=Object(b.c)(),me=Object(p.f)();function pe(){return re.find((function(e){return e.token1===n.id&&e.token2===o.id||e.token1===o.id&&e.token2===n.id}))}function be(){if(n.id&&o.id&&re.length){if(K&&O&&y)return y/O;var e=re.find((function(e){return e.token1===n.id&&e.token2===o.id}));if(e)return e.reserve1?new C.a(e.reserve2).div(Math.pow(10,o.decimals)).div(e.reserve1).times(Math.pow(10,n.decimals)):0;if(e=re.find((function(e){return e.token1===o.id&&e.token2===n.id})))return e.reserve2?new C.a(e.reserve1).div(Math.pow(10,n.decimals)).div(e.reserve2).times(Math.pow(10,o.decimals)):0}return 0}function he(){me.goBack()}function ve(){return(ve=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=3;break}return je.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!(O<=0||y<=0)){e.next=6;break}return je.error("Amount should be greater than 0"),e.abrupt("return");case 6:if(!n.id||n.id!==o.id){e.next=9;break}return je.error("Input should be different"),e.abrupt("return");case 9:if(!le){e.next=21;break}return e.prev=10,t=[{type:"Address",value:se},{type:"Long",value:n.id},{type:"Long",value:o.id},{type:"Long",value:new C.a(O).times(new C.a(Math.pow(10,n.decimals))).integerValue(C.a.ROUND_UP).toString()},{type:"Long",value:new C.a(y).times(new C.a(Math.pow(10,o.decimals))).integerValue(C.a.ROUND_UP).toString()},{type:"Long",value:new C.a(O).times(new C.a(Math.pow(10,n.decimals))).times(1-ie/100).integerValue(C.a.ROUND_UP).toString()},{type:"Long",value:new C.a(y).times(new C.a(Math.pow(10,o.decimals))).times(1-ie/100).integerValue(C.a.ROUND_UP).toString()},{type:"Address",value:se}],e.next=14,j.client.api.smartContract.invokeWasm({scriptHash:le,operation:"add_liquidity",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 14:(a=e.sent).transaction&&(ae(ne+1),x(""),S(""),he(),ue("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(a.transaction).concat(w)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),ue("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 21:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return te(),Object(s.useEffect)((function(){O>0&&y>0?Number(E)&&new C.a(O).lt(new C.a(E))||Number(L)&&new C.a(y).lt(new C.a(L))?F(!1):F(!0):F(!1)}),[O,y]),Object(s.useEffect)((function(){n.id&&o.id&&n.id!==o.id?H(!0):H(!1)}),[n,o]),Object(s.useEffect)((function(){var e=pe();e?(n.id===e.token1&&Number(e.min1)?A(e.min1/Math.pow(10,n.decimals)):n.id===e.token2&&Number(e.min2)?A(e.min2/Math.pow(10,n.decimals)):A(""),o.id===e.token1&&Number(e.min1)?R(e.min1/Math.pow(10,o.decimals)):o.id===e.token2&&Number(e.min2)?R(e.min2/Math.pow(10,o.decimals)):R("")):(A(""),R(""))}),[n,o]),Object(s.useEffect)((function(){var e=pe();n.id&&o.id&&n.id!==o.id&&(!re.length||!e||0===e.reserve1&&0===e.reserve2)?Y(!0):Y(!1)}),[re,n,o]),Object(s.useEffect)((function(){n.id&&o.id?Q(!0):Q(!1)}),[re,n,o,O,y]),Object(s.useEffect)((function(){oe.length&&(a(oe.find((function(e){return e.name===(localStorage.getItem("swap_token1")||"pDAI")}))),l(oe.find((function(e){return e.name===(localStorage.getItem("swap_token2")||"UNX")}))))}),[se,oe]),Object(c.jsxs)("div",{className:"add-liquidity-wrapper",children:[Object(c.jsxs)("div",{className:"al-header",children:["Add Liquidity",Object(c.jsx)("div",{className:"back-icon",onClick:function(){return he()}})]}),Object(c.jsxs)("div",{className:"al-wrapper",children:[B&&K?Object(c.jsx)("div",{className:"first-provider-hint",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"You are the first liquidity provider."}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),"The ratio of tokens you add will set the price of this pool."]})}):null,Object(c.jsx)(J,{balanceChange:ne,tokens:oe,value:O,defaultToken:oe.length&&oe.find((function(e){return e.name===(localStorage.getItem("swap_token1")||"pDAI")})),onTokenChange:function(e){return function(e){e.id!==n.id&&(a(e),localStorage.setItem("swap_token1",e.name),x(""),S(""))}(e)},onAmountChange:function(e){return function(e){x(e),K||(e?S(new C.a(e).times(be()).times(Math.pow(10,o.decimals)).integerValue(C.a.ROUND_CEIL).div(Math.pow(10,o.decimals)).toString()):0===Number(e)&&S(""))}(e)}}),Number(E)?Object(c.jsxs)("div",{className:"min-amount-hint",children:["(Minimum: ",E,")"]}):null,Object(c.jsx)("div",{className:"icon-plus"}),Object(c.jsx)(J,{balanceChange:ne,tokens:oe,value:y,defaultToken:oe.length&&oe.find((function(e){return e.name===(localStorage.getItem("swap_token2")||"UNX")})),onTokenChange:function(e){return function(e){e.id!==o.id&&(l(e),localStorage.setItem("swap_token2",e.name),x(""),S(""))}(e)},onAmountChange:function(e){return function(e){S(e),K||(e?x(new C.a(e).div(be()).times(Math.pow(10,n.decimals)).integerValue(C.a.ROUND_CEIL).div(Math.pow(10,n.decimals)).toString()):0===Number(e)&&x(""))}(e)}}),Number(L)?Object(c.jsxs)("div",{className:"min-amount-hint",children:["(Minimum: ",L,")"]}):null,B&&$?Object(c.jsxs)("div",{className:"al-price-wrapper",children:[Object(c.jsxs)("div",{className:"al-price-item",children:[Object(c.jsx)("div",{className:"price-item-detail",children:be().toFixed(4)}),Object(c.jsxs)("div",{className:"price-item-label",children:[o.name," per ",n.name]})]}),Object(c.jsxs)("div",{className:"al-price-item",children:[Object(c.jsx)("div",{className:"price-item-detail",children:(be()?1/be():0).toFixed(4)}),Object(c.jsxs)("div",{className:"price-item-label",children:[n.name," per ",o.name]})]}),Object(c.jsxs)("div",{className:"al-price-item",children:[Object(c.jsx)("div",{className:"price-item-detail",children:function(){if(K)return"100%";var e=pe(),t=new C.a(O||0).times(Math.pow(10,n.decimals)).times(y||0).times(Math.pow(10,o.decimals));return e?"".concat(t.times(100).div(new C.a(e.reserve1).times(e.reserve2).plus(t)).toFixed(2),"%"):"0%"}()}),Object(c.jsx)("div",{className:"price-item-label",children:"Share of Pool"})]})]}):null,U?Object(c.jsx)("div",{className:"al-add-btn",onClick:function(){return function(){return ve.apply(this,arguments)}()},children:"Add"}):Object(c.jsx)("div",{className:"al-add-btn disabled",children:"Add"})]})]})}),be=n(311),he=(n(642),n(643),E.utils.StringReader),ve=function(){var e=Object(s.useState)(0),t=Object(v.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)({}),r=Object(v.a)(i,2),o=r[0],l=r[1],m=Object(s.useState)({}),f=Object(v.a)(m,2),O=f[0],x=f[1],g=Object(s.useState)(0),N=Object(v.a)(g,2),y=N[0],S=N[1],T=Object(s.useState)(0),_=Object(v.a)(T,2),E=_[0],A=_[1],I=Object(s.useState)({}),P=Object(v.a)(I,2),L=P[0],R=P[1],M=Object(s.useState)(0),U=Object(v.a)(M,2),F=U[0],W=U[1],V=Object(s.useState)(!1),B=Object(v.a)(V,2),H=B[0],q=B[1],X=Object(h.c)((function(e){return{account:e.wallet.account,slippage:e.wallet.slippage,tokens:e.common.tokens,pairs:e.swap.pairs,SWAP_ADDRESS:e.gov.poolStat.pools.swap.address}})),K=X.account,Y=X.slippage,z=X.tokens,G=X.pairs,$=X.SWAP_ADDRESS,Q=Object(h.b)(),J=Object(s.useCallback)((function(e,t){return Q({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),Z=Object(b.c)(),ee=Object(p.f)(),ne=Object(p.g)().pathname.match(/\/([^/]+)$/)[1];function ae(){return new C.a(L.reserve2).div(Math.pow(10,O.decimals)).div(L.reserve1).times(Math.pow(10,o.decimals)).toString()}function ce(){ee.goBack()}function se(){return(se=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=3;break}return Z.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!$){e.next=15;break}return e.prev=4,t=[{type:"Address",value:K},{type:"Long",value:o.id},{type:"Long",value:O.id},{type:"Long",value:new C.a(n).times(F/100).integerValue(C.a.ROUND_UP).toString()},{type:"Long",value:new C.a(y).times(Math.pow(10,o.decimals)).times(1-Y/100).integerValue(C.a.ROUND_UP).toString()},{type:"Long",value:new C.a(E).times(Math.pow(10,O.decimals)).times(1-Y/100).integerValue(C.a.ROUND_UP).toString()},{type:"Address",value:K}],e.next=8,j.client.api.smartContract.invokeWasm({scriptHash:$,operation:"remove_liquidity",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 8:(a=e.sent).transaction&&(ce(),J("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(a.transaction).concat(w)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),J("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}return te(),Object(s.useEffect)((function(){K&&G.length&&ne&&function(e){if($)return j.client.api.smartContract.invokeWasmRead({scriptHash:$,operation:"balanceOf",args:[{type:"Long",value:e},{type:"Address",value:K}]}).then((function(e){var t=new he(e);return D(t)}))}(ne).then((function(e){a(e)}))}),[K,G,$]),Object(s.useEffect)((function(){if(z.length&&G.length&&ne){var e=G.find((function(e){return"".concat(e.id)===ne}));R(e),l(z.find((function(t){return t.id===e.token1}))),x(z.find((function(t){return t.id===e.token2}))),q(!0)}}),[G,z]),Object(s.useEffect)((function(){if(L&&o.id&&O.id&&ne&&n){var e=new C.a(n).div(L.lp),t=e.times(L.reserve1).div(Math.pow(10,o.decimals)),a=e.times(L.reserve2).div(Math.pow(10,O.decimals));S(new C.a(F).div(100).times(t).toFixed(o.decimals)),A(new C.a(F).div(100).times(a).toFixed(O.decimals))}}),[F,L,o,O]),Object(c.jsxs)("div",{className:"remove-liquidity-wrapper",children:[Object(c.jsxs)("div",{className:"rl-header",children:["Remove Liquidity",Object(c.jsx)("div",{className:"back-icon",onClick:function(){return ce()}})]}),Object(c.jsxs)("div",{className:"rl-wrapper",children:[Object(c.jsxs)("div",{className:"rl-amount",children:[Object(c.jsxs)("div",{className:"rl-amount-label",children:["Amount",Object(c.jsxs)("span",{children:[F,"%"]})]}),Object(c.jsx)(be.a,{value:F,onChange:function(e){return W(e)}}),Object(c.jsxs)("div",{className:"quick-items",children:[Object(c.jsx)("div",{className:"quick-item",onClick:function(){return W(25)},children:"25%"}),Object(c.jsx)("div",{className:"quick-item",onClick:function(){return W(50)},children:"50%"}),Object(c.jsx)("div",{className:"quick-item",onClick:function(){return W(75)},children:"75%"}),Object(c.jsx)("div",{className:"quick-item",onClick:function(){return W(100)},children:"Max"})]})]}),Object(c.jsx)("div",{className:"icon-arrow-down"}),Object(c.jsxs)("div",{className:"rl-receive-wrapper",children:[Object(c.jsxs)("div",{className:"receive-token-item icon-".concat(o.name),children:[o.name,Object(c.jsx)("span",{children:y})]}),Object(c.jsxs)("div",{className:"receive-token-item icon-".concat(O.name),children:[O.name,Object(c.jsx)("span",{children:E})]})]}),H?Object(c.jsxs)("div",{className:"rl-price-wrapper",children:[Object(c.jsx)("div",{className:"price-wrapper-lable",children:"Price"}),Object(c.jsxs)("div",{className:"price",children:["1 ",o.name," = ",ae()," ",O.name]}),Object(c.jsxs)("div",{className:"price-reverse",children:["1 ",O.name," = ",new C.a(1).div(ae()).toString()," ",o.name]})]}):null,F?Object(c.jsx)("div",{className:"rl-remove-btn",onClick:function(){return function(){return se.apply(this,arguments)}()},children:"Remove"}):Object(c.jsx)("div",{className:"rl-remove-btn disabled",children:"Remove"})]})]})},fe=n(58),Oe=(n(644),E.utils.StringReader),xe=function(){var e=Object(s.useState)(!1),t=Object(v.a)(e,2),n=t[0],i=t[1],r=Object(s.useState)(!1),o=Object(v.a)(r,2),l=o[0],m=o[1],f=Object(s.useState)(0),O=Object(v.a)(f,2),k=O[0],w=O[1],g=Object(s.useState)({}),N=Object(v.a)(g,2),y=N[0],S=N[1],T=Object(h.c)((function(e){return{account:e.wallet.account,tokens:e.common.tokens,stakingTokens:e.staking.tokens,poolStat:e.gov.poolStat,pairs:e.swap.pairs,stakingPoolWeightRatio:e.gov.poolStat.pools.staking.ratio,STAKING_ADDRESS:e.gov.poolStat.pools.staking.address}})),_=T.account,E=T.tokens,A=T.stakingTokens,I=T.poolStat,P=T.pairs,L=T.stakingPoolWeightRatio,R=T.STAKING_ADDRESS,M=Object(h.b)(),U=Object(s.useCallback)((function(e){return M({type:"SET_STAKING_TOKENS",tokens:e})}),[]),W=Object(p.f)(),V=Object(b.c)();function B(){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i,r,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.length){e.next=22;break}return e.prev=1,t=E.find((function(e){return"UNX"===e.name})),n={},a=A.filter((function(e){return 3===e.ty})),c=A.filter((function(e){return 3!==e.ty})),s=c.map((function(e){return e.id})),a.map((function(e){e.name.split("-").filter((function(e){return"LP"!==e&&"UNX"!==e})).map((function(e){var t=E.find((function(t){return t.name===e})).id;s.indexOf(t)<0&&s.push(t)}))})),i=[{type:"Array",value:s.map((function(e){return{type:"Long",value:e}}))}],e.next=11,j.client.api.smartContract.invokeWasmRead({scriptHash:x,operation:"token_prices",args:i});case 11:for(r=e.sent,o=new Oe(r),l=o.readNextLen(),u=0;u<l;u++)n[s[u]]=D(o);a.map((function(e){var a=e.name.split("-").filter((function(e){return"LP"!==e})),c=E.find((function(e){return e.name===a[0]})),s=E.find((function(e){return e.name===a[1]})),i=P.find((function(e){return e.token1===c.id&&e.token2===s.id||e.token1===s.id&&e.token2===c.id}));if(i){var r=new C.a(0);if("UNX"===c.name||"UNX"===s.name){var o="UNX"===c.name?s:c;r=i.token1===t.id?r.plus(new C.a(i.reserve2).div(Math.pow(10,o.decimals)).times(n[i.token2]).times(2)):r.plus(new C.a(i.reserve1).div(Math.pow(10,o.decimals)).times(n[i.token1]).times(2))}else r=i.token1===c.id?r.plus(new C.a(i.reserve1).div(Math.pow(10,c.decimals)).times(n[i.token1])).plus(new C.a(i.reserve2).div(Math.pow(10,s.decimals)).times(n[i.token2])):r.plus(new C.a(i.reserve1).div(Math.pow(10,s.decimals)).times(n[i.token1])).plus(new C.a(i.reserve2).div(Math.pow(10,c.decimals)).times(n[i.token2]));n[e.id]=r.div(i.lp).times(Math.pow(10,18)).toString()}})),S(n),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}function q(){return X.apply(this,arguments)}function X(){return(X=Object(u.a)(d.a.mark((function e(){var t,n,c,s,i,r,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.length||!R){e.next=18;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:R,operation:"stat",args:[]});case 4:for(t=e.sent,n=[],c=new Oe(t),s=c.readNextLen(),i=function(e){var t={};t.id=c.readUint128();var a=E.find((function(e){return e.id===t.id}));t.weight=c.readUint128(),t.balance=D(c),n.push(Object.assign(a,t))},r=0;r<s;r++)i();o=n.filter((function(e){return e.balance})).reduce((function(e,t){return e+t.weight}),0),l=n.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{originWeight:e.weight,weight:e.balance?e.weight/o:0})})),U(l),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function K(e){return"".concat(e.name," is the hidden receipt for WING ").concat(e.name.replace("f","")," suppliers")}return te(),Object(s.useEffect)((function(){if(P.length&&(!k||"0"===k)){var e=E.find((function(e){return"UNX"===e.name})),t=E.find((function(e){return"pDAI"===e.name})),n=P.find((function(n){return n.token1===e.id&&n.token2===t.id||n.token2===e.id&&n.token1===t.id}));n&&(n.token1===e.id?w(new C.a(n.reserve2).div(Math.pow(10,t.decimals)).div(n.reserve1).times(Math.pow(10,e.decimals)).times(1).toString()):w(new C.a(n.reserve1).div(Math.pow(10,t.decimals)).div(n.reserve2).times(Math.pow(10,e.decimals)).times(1).toString()))}}),[P,E]),Object(s.useEffect)((function(){B();var e=setInterval((function(){return B}),3e3);return function(){e&&clearInterval(e)}}),[A]),Object(s.useEffect)((function(){q();var e=setInterval((function(){return q}),3e3);return function(){e&&clearInterval(e)}}),[E,R]),Object(s.useEffect)((function(){A.filter((function(e){return!e.originWeight})).length?i(!0):i(!1)}),[A]),Object(c.jsx)("div",{className:"stake-container",children:Object(c.jsxs)("div",{className:"stake-pool",children:[A.length?null:Object(c.jsx)("div",{className:"title",children:"Loading..."}),l?Object(c.jsxs)("div",{className:"unstake-pool-title",children:[Object(c.jsx)("div",{className:"back-icon",onClick:function(){return m(!1)}}),"Unstake from Closed Pool"]}):null,Object(c.jsx)("div",{className:"pool-list",children:function(){if(A.length){var e=A.filter((function(e){return!!e.originWeight})),t=A.filter((function(e){return!e.originWeight}));return(l?t:e).map((function(e){var t=new C.a(I.distributionInfo.amount||0).div(I.distributionInfo.period||1).times(31536e3).times(L||0).times(e.weight),n=y[e.id]?t.times(k).times(Math.pow(10,12)).div(y[e.id]).div(e.balance).times(Math.pow(10,e.decimals)).times(100).toFixed(2):0;return Object(c.jsx)("div",{className:"pool-list-item ".concat(l?"pool-list-item-disabled":""),children:Object(c.jsx)("div",{className:"item-detail",children:Object(c.jsxs)("div",{className:"item-detail-wrapper",children:[3===e.ty&&Object(c.jsx)("div",{className:"corner-badge",children:"10X"}),Object(c.jsxs)("div",{className:"staking-token",children:[3===e.ty?Object(c.jsxs)("div",{className:"staking-text",children:["Deposit",F(e,"stake-lp-token")]}):Object(c.jsx)("div",{className:"staking-text icon-".concat(e.name),children:"Deposit"}),e.name.startsWith("f")?Object(c.jsx)(fe.a,{placement:"top",overlay:K(e),children:Object(c.jsx)("div",{className:"staking-token-name",children:e.name})}):Object(c.jsx)("div",{className:"staking-token-name",children:e.name})]}),Object(c.jsxs)("div",{className:"earn-line",children:["Earn",Object(c.jsx)("span",{children:"UNX"})]}),Object(c.jsxs)("div",{className:"earn-line",children:["APY",Object(c.jsxs)("span",{children:[n,"%"]})]}),Object(c.jsxs)("div",{className:"total-staking",children:["Total Staking",Object(c.jsx)("span",{children:new C.a(e.balance||0).div(Math.pow(10,e.decimals)).toString()})]}),Object(c.jsx)("div",{className:"select-btn",onClick:function(){return function(e){_?W.push("/staking/".concat(e.id)):V.show("Please Connect Wallet First")}(e)},children:l?"Unstake":"Stake"})]})})},e.name)}))}}()}),n?Object(c.jsx)("div",{className:"closed-pool-entrance",onClick:function(){return m(!0)},children:"Unstake from Closed Pool"}):null]})})},ke=(n(645),E.utils.StringReader),we=function(e){var t=Object(s.useState)({}),n=Object(v.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)("-"),o=Object(v.a)(r,2),l=o[0],m=o[1],O=Object(s.useState)(1),g=Object(v.a)(O,2),N=g[0],y=g[1],S=Object(s.useState)(""),T=Object(v.a)(S,2),_=T[0],E=T[1],A=Object(s.useState)({}),I=Object(v.a)(A,2),P=I[0],L=I[1],R=Object(s.useState)("stake"),M=Object(v.a)(R,2),W=M[0],V=M[1],B=Object(s.useState)(0),H=Object(v.a)(B,2),q=H[0],X=H[1],K=Object(s.useState)(!1),Y=Object(v.a)(K,2),z=Y[0],G=Y[1],$=Object(h.c)((function(e){return{account:e.wallet.account,tokens:e.common.tokens,stakingTokens:e.staking.tokens,STAKING_ADDRESS:e.gov.poolStat.pools.staking.address}})),Q=$.account,J=$.tokens,Z=$.stakingTokens,ee=$.STAKING_ADDRESS,te=Object(h.b)(),ne=Object(s.useCallback)((function(e,t){return te({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),ae=Object(b.c)(),ce=Object(p.g)(),se=Object(p.f)(),ie=ce.pathname.match(/\/([^/]+)$/)[1];function re(){var e;(e=ie,j.client.api.smartContract.invokeWasmRead({scriptHash:ee,operation:"account_stake_info",args:[{type:"Address",value:Q},{type:"Long",value:e}]}).then((function(t){var n=new ke(t);return{id:e,balance:new C.a(D(n)||0).div(Math.pow(10,a.decimals||0)).toString(),interest:D(n)}}))).then((function(e){L(e)})).catch((function(e){console.log("get account stakes",e)}))}function oe(e){Q?(V(e),G(!0)):ae.show("Please Connect Wallet First")}function le(){return(le=Object(u.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=3;break}return ae.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!a.id||!ee){e.next=23;break}if(!(_<=0)){e.next=7;break}return ae.error("Amount should be greater than 0"),e.abrupt("return");case 7:if("unstake"!==W||!new C.a(_).gt(new C.a(P.balance))){e.next=10;break}return ae.error("Amount should be less than your balance"),e.abrupt("return");case 10:return e.prev=10,t=[{type:"Address",value:Q},{type:"Long",value:a.id},{type:"Long",value:new C.a(_).times(new C.a(Math.pow(10,a.decimals))).integerValue(C.a.ROUND_DOWN).toString()}],n={scriptHash:ee,operation:W,args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1},e.next=15,j.client.api.smartContract.invokeWasm(n);case 15:(c=e.sent).transaction&&(G(!1),ne("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(c.transaction).concat(w)})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(10),G(!1),ne("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 23:case"end":return e.stop()}}),e,null,[[10,19]])})))).apply(this,arguments)}function de(){return(de=Object(u.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=3;break}return ae.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!ee){e.next=16;break}return e.prev=4,t=[{type:"Address",value:Q},{type:"Long",value:a.id}],n={scriptHash:ee,operation:"harvest",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1},e.next=9,j.client.api.smartContract.invokeWasm(n);case 9:(c=e.sent).transaction&&(G(!1),ne("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"".concat(k).concat(c.transaction).concat(w)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),ne("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"",extraLink:""});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}Object(s.useEffect)((function(){Z.length&&y(Z.find((function(e){return"".concat(e.id)===ie})).originWeight)}),[Z]),Object(s.useEffect)((function(){if(Q&&J.length){var e=J.find((function(e){return"".concat(e.id)===ie}));i(e),U(Q,e,m)}}),[J,Q]),Object(s.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q||2!==a.ty){e.next=12;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:x,operation:"claimable_wing",args:[{type:"Address",value:Q},{type:"Long",value:a.id}]});case 4:t=e.sent,n=new ke(t),X(D(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(e,1e4);return function(){t&&clearInterval(t)}}),[Q,a]),Object(s.useEffect)((function(){if(Q&&a.id&&ee){re();var e=setInterval(re,1e4);return function(){e&&clearInterval(e)}}}),[a,Q,ee]),Object(s.useEffect)((function(){Q||L({})}),[Q]);return Object(c.jsxs)("div",{className:"stake-container",children:[Object(c.jsxs)("div",{className:"stake-title",children:[Object(c.jsx)("div",{className:"back-icon",onClick:function(){se.goBack()}}),"Earn ",Object(c.jsx)("span",{className:"icon-UNX",children:"UNX"})," by",F(a,"inline-token-wrapper"),a.name||""]}),Object(c.jsxs)("div",{className:"stake-token-detail",children:[Object(c.jsxs)("div",{className:"stake-token-amount",children:[F(a,"stake-token-wrapper"),Object(c.jsxs)("div",{className:"stake-token-amount-detail",children:[Object(c.jsx)("div",{className:"stake-token-amount-label",children:"Current Staked"}),Object(c.jsxs)("div",{className:"stake-token-amount-info",children:[P.balance," ",a.name]})]})]}),Object(c.jsxs)("div",{className:"stake-token-actions",children:[N?Object(c.jsx)("div",{className:"stake-token-action",onClick:function(){return oe("stake")},children:"Stake"}):null,Object(c.jsx)("div",{className:"stake-token-action",onClick:function(){return oe("unstake")},children:"Unstake"})]})]}),Object(c.jsxs)("div",{className:"harvest-token-detail",children:[Object(c.jsxs)("div",{className:"harvest-token-amount icon-UNX",children:[Object(c.jsx)("div",{className:"harvest-token-amount-label",children:"Rewards Available"}),Object(c.jsxs)("div",{className:"harvest-token-amount-info",children:[new C.a(P.interest||0).div(Math.pow(10,9)).toString()," UNX"]})]}),Object(c.jsx)("div",{className:"harvest-token-actions",children:Object(c.jsx)("div",{className:"harvest-token-action",onClick:function(){return function(){return de.apply(this,arguments)}()},children:"Harvest"})})]}),2===a.ty?Object(c.jsx)("div",{className:"claimable-wing-detail",children:Object(c.jsxs)("div",{className:"claimable-wing-amount icon-WING",children:[new C.a(q||0).div(Math.pow(10,9)).toString(),Object(c.jsxs)("div",{className:"claimable-wing-label",children:["WING Earned",Object(c.jsx)(fe.a,{placement:"top",overlay:"WING earned by ftoken will be transferred to your account when you stake or unstake",children:Object(c.jsx)("span",{children:"?"})})]})]})}):null,z?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){G(!1),E("")}}),Object(c.jsxs)("div",{className:"stake-wrapper",children:[F(a,"token-placeholder"),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"input-label",children:["Amount","stake"===W?Object(c.jsxs)("span",{className:"hint",children:["Balance: ",l]}):Object(c.jsxs)("span",{className:"hint",children:["Staked: ",P.balance]})]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Object(c.jsx)(f,{placeholder:"0.0",value:_,decimals:a.decimals||0,onChange:function(e){return E(e)}}),Object(c.jsx)("div",{className:"input-max-btn",onClick:function(){"stake"!==W||isNaN(l)?"unstake"!==W||isNaN(P.balance)||E(P.balance):E(l)},children:"MAX"})]})]}),Object(c.jsx)("div",{className:"stake-btn",onClick:function(){return function(){return le.apply(this,arguments)}()},children:"stake"===W?"Stake":"Unstake"})]})]})}):null]})},ge=(n(646),function(e){return Object(c.jsx)("div",{className:"coming-soon-placeholder"})}),Ne=(n(647),function(e){return Object(c.jsx)("div",{className:"coming-soon-placeholder"})}),ye=P.a.create({baseURL:"https://polaris1.ont.io:10334/api/v1/smartcode/event/txhash/",timeout:3e4,headers:{"Content-Type":"application/json"}});ye.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var Se=ye,Te=(n(648),E.utils.StringReader),_e=E.utils.reverseHex,Ee=function(){var e=Object(s.useState)({}),t=Object(v.a)(e,2),n=t[0],i=t[1],r=Object(s.useState)(""),o=Object(v.a)(r,2),l=o[0],m=o[1],p=Object(s.useState)(""),O=Object(v.a)(p,2),x=O[0],g=O[1],N=Object(s.useState)({}),y=Object(v.a)(N,2),S=y[0],T=y[1],_=Object(s.useState)(""),E=Object(v.a)(_,2),A=E[0],I=E[1],P=Object(s.useState)(""),L=Object(v.a)(P,2),R=L[0],M=L[1],U=Object(s.useState)({}),F=Object(v.a)(U,2),W=F[0],V=F[1],Y=Object(s.useState)({}),z=Object(v.a)(Y,2),G=z[0],$=z[1],Q=Object(s.useState)(""),Z=Object(v.a)(Q,2),ee=Z[0],ae=Z[1],ce=Object(s.useState)([]),se=Object(v.a)(ce,2),ie=se[0],re=se[1],oe=Object(s.useState)(""),le=Object(v.a)(oe,2),de=le[0],ue=le[1],je=Object(s.useState)(!1),me=Object(v.a)(je,2),pe=me[0],be=me[1],he=Object(s.useState)(!1),ve=Object(v.a)(he,2),Oe=ve[0],xe=ve[1],ke=Object(s.useState)(!1),we=Object(v.a)(ke,2),ge=we[0],Ne=we[1],ye=Object(h.c)((function(e){return Object(a.a)(Object(a.a)({account:e.wallet.account,tokens:e.common.tokens,pairs:e.swap.pairs,poolStat:e.gov.poolStat},e.synth),{},{synthPoolWeightRatio:e.gov.poolStat.pools.synth.ratio,SYNTH_ADDRESS:e.gov.poolStat.pools.synth.address})})),Ee=ye.account,Ae=ye.tokens,Ce=ye.pairs,Ie=ye.poolStat,Pe=ye.stat,Le=ye.marketStat,Re=ye.availableReward,Me=ye.synthType,De=ye.synthPoolWeightRatio,Ue=ye.unxToken,Fe=ye.unxPrice,We=ye.SYNTH_ADDRESS,Ve=Object(h.b)(),Be=Object(s.useCallback)((function(e,t){return Ve({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),He=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_STAT",stat:e})}),[]),qe=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_MARKET_STAT",marketStat:e})}),[]),Xe=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_AVAILABLE_REWARD",availableReward:e})}),[]),Ke=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_TYPE",synthType:e})}),[]),Ye=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_UNX_TOKEN",unxToken:e})}),[]),ze=Object(s.useCallback)((function(e){return Ve({type:"SET_SYNTH_UNX_PRICE",unxPrice:e})}),[]),Ge=Object(b.c)();te(),Object(s.useEffect)((function(){Ae.length&&Ye(Ae.find((function(e){return"UNX"===e.name})))}),[Ae]),Object(s.useEffect)((function(){if(Ae.length&&Ce.length&&(!Fe||"0"===Fe)&&Le.marketAssetValue){var e=Ae.find((function(e){return"UNX"===e.name}));if(Le.marketAssetBalances.length)ze(new C.a(Le.marketAssetValue).div(Le.marketTokenBalance).times(Math.pow(10,e.decimals)).toString());else{var t=Ae.find((function(e){return"pDAI"===e.name})),n=Ce.find((function(n){return n.token1===e.id&&n.token2===t.id||n.token2===e.id&&n.token1===t.id}));n&&(n.token1===e.id?ze(new C.a(n.reserve2).div(Math.pow(10,t.decimals)).div(n.reserve1).times(Math.pow(10,e.decimals)).times(1).times(B).toString()):ze(new C.a(n.reserve1).div(Math.pow(10,t.decimals)).div(n.reserve2).times(Math.pow(10,e.decimals)).times(1).times(B).toString()))}Ye(e)}}),[Ce,Ae,Le]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ee&&Ue.id&&We)){e.next=13;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:We,operation:"claim_unx",args:[{type:"Long",value:Ue.id},{type:"Address",value:Ee}]});case 4:t=e.sent,n=new Te(t),a=n.readUint128(),Xe(new C.a(a).toString()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}e();var n=setInterval(e,5e3);return function(){n&&clearInterval(n)}}),[Ee,Ue,We]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i,r,o,l,u,m,p,b,h,v,f,O,x,k,w;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ae.length||!We){e.next=31;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:We,operation:"stat",args:[]});case 4:for(t=e.sent,n=new Te(t),_e(n.read(20)),n.readUint128(),n.readUint128(),n.readUint128(),a=n.readNextLen(),c=[],s=function(e){var t={};t.assetId=n.readUint128(),t.tokenId=n.readUint128();var a=Ae.find((function(e){return e.id===t.tokenId}));t.tokenName=a.name,t.decimals=a.decimals,t.leverageType=n.readNextByte(),t.times=n.readUint128(),t.entryPrice=D(n),t.lowLimit=D(n),t.highLimit=D(n),t.status=n.readNextByte(),t.frozenBy=_e(n.read(20)),t.frozenTime=n.readUint64(),t.tokenName.startsWith("p")&&(t.tokenName=t.tokenName.replace("p","")),t.tokenName="".concat(t.leverageType===K?"i":"s").concat(t.tokenName),t.id=t.assetId,t.value=t.assetId,t.label="".concat(t.tokenName).concat(1!==t.times?" (".concat(t.times,"x)"):""),c.push(t)},i=0;i<a;i++)s();for(r=n.readNextLen(),o=[],l=function(e){var t={};t.assetId=n.readUint128(),t.tokenId=n.readUint128();var a=Ae.find((function(e){return e.id===t.tokenId}));t.tokenName=a.name,t.decimals=a.decimals,t.leverageType=n.readNextByte(),t.times=n.readUint128(),t.entryPrice=D(n),t.lowLimit=D(n),t.highLimit=D(n),t.status=n.readNextByte(),t.frozenBy=_e(n.read(20)),t.frozenTime=n.readUint64(),t.tokenName.startsWith("p")&&(t.tokenName=t.tokenName.replace("p","")),t.tokenName="".concat(t.leverageType===K?"i":"s").concat(t.tokenName),t.label="".concat(t.tokenName).concat(1!==t.times?" (".concat(t.times,"x)"):""),o.push(t)},u=0;u<r;u++)l();for(m=n.readNextLen(),p=[],b=0;b<m;b++)(h={}).tokenId=n.readUint128(),h.price=D(n),p.push(h);for(v=function(){var e=O[f],t=p.find((function(t){return t.tokenId===e.tokenId})).price,n=t;e.lowLimit&&new C.a(t).lte(new C.a(e.lowLimit))?n=e.lowLimit:e.highLimit&&new C.a(t).gte(new C.a(e.highLimit))&&(n=e.highLimit),e.tokenPrice=n,e.leverageType===X?e.price=new C.a(e.entryPrice).plus(new C.a(n).times(e.times)).minus(new C.a(e.entryPrice).times(e.times)).toString():e.price=new C.a(e.entryPrice).plus(new C.a(e.entryPrice).times(e.times)).minus(new C.a(n).times(e.times)).toString(),(e.lowLimit&&new C.a(e.tokenPrice).lte(new C.a(e.lowLimit))||e.highLimit&&new C.a(e.tokenPrice).gte(new C.a(e.highLimit)))&&(e.unprocessedFrozen=!0)},f=0,O=c;f<O.length;f++)v();for(x=function(){var e=w[k];e.tokenPrice=p.find((function(t){return t.tokenId===e.tokenId})).price,e.status===H?e.tokenPrice=e.highLimit:e.status===q&&(e.tokenPrice=e.lowLimit)},k=0,w=o;k<w.length;k++)x();He({liveAssets:c,frozenAssets:o,tokenPrices:p}),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.log("get synth stat",e.t0);case 31:case"end":return e.stop()}}),e,null,[[1,28]])})))).apply(this,arguments)}e();var n=setInterval(e,5e3);return function(){return clearInterval(n)}}),[Ae,We]),Object(s.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,s,i,r,o,l,u,m,p,b,h,v,f,O,x,k;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ee&&Ue.id&&We)){e.next=29;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:We,operation:"market_stat",args:[{type:"Long",value:Ue.id},{type:"Address",value:Ee}]});case 4:for(t=e.sent,n=new Te(t),a=n.readNextLen(),c=[],s=new C.a(0),i=function(e){var t={};t.assetId=n.readUint128(),t.balance=D(n),t.assetPrice=D(n);var a=Pe.liveAssets?[].concat(Object(ne.a)(Pe.liveAssets),Object(ne.a)(Pe.frozenAssets)).find((function(e){return e.assetId===t.assetId})):null;a&&(s=s.plus(new C.a(t.assetPrice).times(t.balance).div(Math.pow(10,a.decimals)))),c.push(t)},r=0;r<a;r++)i();for(o=n.readNextLen(),l=[],u=new C.a(0),m=function(e){var t={};t.assetId=n.readUint128(),t.balance=D(n),t.assetPrice=D(n);var a=Pe.liveAssets?[].concat(Object(ne.a)(Pe.liveAssets),Object(ne.a)(Pe.frozenAssets)).find((function(e){return e.assetId===t.assetId})):null;a&&(u=u.plus(new C.a(t.assetPrice).times(t.balance).div(Math.pow(10,a.decimals)))),l.push(t)},p=0;p<o;p++)m();b=D(n),h=D(n),v=D(n),f=D(n),O=D(n),x="0"!==s.toString()?u.div(s).times(v).toString():"0",k={marketAssetBalances:c,accountAssetBalances:l,marketAssetValue:s.toString(),accountAssetValue:u.toString(),transferable:x,marketStakeValue:b,accountStakeValue:h,marketTokenBalance:v,accountClaimedValue:f,accountWithdrawedStakeValue:O},qe(k),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,26]])})))).apply(this,arguments)}e();var n=setInterval(e,5e3);return function(){n&&clearInterval(n)}}),[Ee,Ue,Pe.liveAssets,We]);var $e=function(e){I(e),Fe&&e?M(new C.a(e).times(S.assetPrice).div(Fe).times(.999).toFixed(Ue.decimals)):0===Number(e)&&M("")},Qe=function(e){ae(e),e?ue(new C.a(W.price).div(G.price).times(e).times(Math.pow(10,W.decimals)).div(Math.pow(10,G.decimals)).times(.999).toFixed(G.decimals)):0===Number(e)&&ue("")};function Je(){return(Je=Object(u.a)(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!(Ue.id&&n.assetId&&We)){e.next=21;break}if(!(l<=0)){e.next=7;break}return Ge.error("Amount should be greater than 0"),e.abrupt("return");case 7:return e.prev=7,t=[{type:"Long",value:Ue.id},{type:"Address",value:Ee},{type:"Long",value:new C.a(x).times(new C.a(Math.pow(10,Ue.decimals))).integerValue(C.a.ROUND_DOWN).toString()},{type:"Long",value:n.assetId}],e.next=11,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"mint",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 11:(a=e.sent).transaction&&(be(!1),m(""),g(""),c="",Se({method:"get",url:"".concat(a.transaction)}).then((function(e){if("SUCCESS"===e.Desc){try{"0"===e.Result.Notify.find((function(e){return"mint"===e.States[0]})).States[5]&&(c="Your last transaction successfully freezed the ".concat(n.label," asset, you'll get 1\u2030 of the redeemed UNX when burnt."))}catch(t){}it("success",a.transaction,c)}})).catch((function(e){it("success",a.transaction)}))),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(7),be(!1),m(""),g(""),it("error");case 21:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function Ze(){return(Ze=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!(Ue.id&&S.assetId&&We)){e.next=21;break}if(!(A<=0)){e.next=7;break}return Ge.error("Amount should be greater than 0"),e.abrupt("return");case 7:return e.prev=7,t=[{type:"Long",value:Ue.id},{type:"Address",value:Ee},{type:"Long",value:S.assetId},{type:"Long",value:new C.a(A).times(new C.a(Math.pow(10,S.decimals))).integerValue(C.a.ROUND_DOWN).toString()}],e.next=11,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"burn",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 11:(n=e.sent).transaction&&(xe(!1),I(""),M(""),it("success",n.transaction)),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(7),xe(!1),I(""),M(""),it("error");case 21:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function et(){return(et=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!Ue.id||!We){e.next=15;break}return e.prev=4,t=[{type:"Long",value:Ue.id},{type:"Address",value:Ee}],e.next=8,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"burn_all_asset",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 8:(n=e.sent).transaction&&it("success",n.transaction),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),it("error");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function tt(){return(tt=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!(Ue.id&&W.assetId&&We)){e.next=21;break}if(!(ee<=0)){e.next=7;break}return Ge.error("Amount should be greater than 0"),e.abrupt("return");case 7:return e.prev=7,t=[{type:"Long",value:Ue.id},{type:"Address",value:Ee},{type:"Long",value:W.assetId},{type:"Long",value:new C.a(ee).times(new C.a(Math.pow(10,W.decimals))).integerValue(C.a.ROUND_DOWN).toString()},{type:"Long",value:G.assetId}],e.next=11,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"asset_swap",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 11:(n=e.sent).transaction&&(Ne(!1),ae(""),ue(""),a="",Se({method:"get",url:"".concat(n.transaction)}).then((function(e){if("SUCCESS"===e.Desc){try{"0"===e.Result.Notify.find((function(e){return"asset_swap"===e.States[0]})).States[4]&&(a="Your last transaction successfully freezed the ".concat(W.label," asset, you'll get 1\u2030 of the redeemed UNX when burnt."))}catch(t){}it("success",n.transaction,a)}})).catch((function(e){it("success",n.transaction)}))),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(7),Ne(!1),ae(""),ue(""),it("error");case 21:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function nt(){return(nt=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!Ue.id||!We){e.next=15;break}return e.prev=4,t=[{type:"Long",value:Ue.id},{type:"Address",value:Ee}],e.next=8,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"claim_unx",args:t,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 8:(n=e.sent).transaction&&it("success",n.transaction),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),it("error");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var at=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ee){e.next=3;break}return Ge.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!We){e.next=15;break}return e.prev=4,n=[{type:"Address",value:Ee},{type:"Long",value:t.assetId}],e.next=8,j.client.api.smartContract.invokeWasm({scriptHash:We,operation:"freeze_asset",args:n,gasPrice:2500,gasLimit:6e7,requireIdentity:!1});case 8:(a=e.sent).transaction&&it("success",a.transaction),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),it("error");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){return e.leverageType===X?new C.a(e.tokenPrice).times(e.times).div(new C.a(e.tokenPrice).times(e.times).plus(e.entryPrice).minus(new C.a(e.entryPrice).times(e.times))).toFixed(2):e.leverageType===K?new C.a(e.tokenPrice).times(e.times).div(new C.a(e.entryPrice).times(e.times).plus(e.entryPrice).minus(new C.a(e.tokenPrice).times(e.times))).toFixed(2):void 0},st=function(e){var t="Entry Price: ".concat(new C.a(e.entryPrice).div(B).toString());return Number(e.lowLimit)&&(t+=" Low Limit: ".concat(new C.a(e.lowLimit).div(B).toString())),Number(e.highLimit)&&(t+=" High Limit: ".concat(new C.a(e.highLimit).div(B).toString())),t},it=function(e,t,n){Be("infoModal",{show:!0,type:e,text:"success"===e?"Transaction Successful":"Transaction Failed",detail:n,extraText:"success"===e?"View Transaction":"",extraLink:"success"===e?"".concat(k).concat(t).concat(w):""})};return Object(c.jsxs)("div",{className:"synth-container",children:[Object(c.jsxs)("div",{className:"synth-overview-sections",children:[Object(c.jsxs)("div",{className:"synth-overview-section",children:[Object(c.jsxs)("div",{className:"synth-overview-sub-section",children:[Object(c.jsx)("p",{className:"synth-overview-section-title",children:"Mint APY"}),Object(c.jsxs)("p",{className:"synth-overview-detail",children:[Le.marketStakeValue&&Ue.id?new C.a(Ie.distributionInfo.amount||0).div(Ie.distributionInfo.period||1).times(31536e3).times(Math.pow(10,Ue.decimals)).times(De||0).div(Le.marketStakeValue).toFixed(2):0,"%"]})]}),Object(c.jsx)("div",{className:"synth-overview-section-group",children:Object(c.jsxs)("div",{className:"synth-overview-sub-section",children:[Object(c.jsx)("p",{className:"synth-overview-section-title",children:"Market Balance"}),Object(c.jsxs)("p",{className:"synth-overview-detail",children:[Le.marketTokenBalance?new C.a(Le.marketTokenBalance).div(Math.pow(10,Ue.decimals)).toFixed(Ue.decimals):"0"," ",Object(c.jsx)("span",{children:"UNX"})]})]})})]}),Object(c.jsxs)("div",{className:"synth-overview-section-right",children:[Object(c.jsxs)("div",{className:"synth-overview-sub-section",children:[Object(c.jsx)("p",{className:"synth-overview-section-title",children:"Transferable"}),Object(c.jsxs)("p",{className:"synth-overview-detail",children:[Le.transferable&&"0"!==Le.transferable?new C.a(Le.transferable).plus(Re).div(Math.pow(10,Ue.decimals)).toFixed(Ue.decimals):"0"," ",Object(c.jsx)("span",{children:"UNX"})]})]}),Object(c.jsxs)("div",{className:"synth-overview-section-group",children:[Object(c.jsxs)("div",{className:"synth-overview-sub-section",children:[Object(c.jsx)("p",{className:"synth-overview-section-title",children:"Staked Available"}),Object(c.jsxs)("p",{className:"synth-overview-detail",children:[Le.transferable&&"0"!==Le.transferable?new C.a(Le.transferable).div(Math.pow(10,Ue.decimals)).toFixed(Ue.decimals):"0"," ",Object(c.jsx)("span",{children:"UNX"}),Le.transferable&&"0"!==Le.transferable?Object(c.jsx)("span",{className:"synth-overview-action-btn synth-overview-action-btn-burn",onClick:function(){return function(){return et.apply(this,arguments)}()},children:"Burn All"}):null]})]}),Object(c.jsxs)("div",{className:"synth-overview-sub-section",children:[Object(c.jsx)("p",{className:"synth-overview-section-title",children:"Rewards Available"}),Object(c.jsxs)("p",{className:"synth-overview-detail",children:[Ue.id?new C.a(Re).div(Math.pow(10,Ue.decimals)).toString():0,Object(c.jsx)("span",{children:"UNX"}),Re&&"0"!==Re?Object(c.jsx)("span",{className:"synth-overview-action-btn",onClick:function(){return function(){return nt.apply(this,arguments)}()},children:"Claim"}):null]})]})]})]})]}),Object(c.jsxs)("div",{className:"mint-burn-wrapper",children:[Object(c.jsxs)("div",{className:"mint-burn-main",children:[Object(c.jsxs)("div",{className:"synth-type-switch",children:[Object(c.jsx)("div",{className:"synth-type-item ".concat("mint"===Me?"selected":""),onClick:function(){return Ke("mint")},children:"Mint"}),Object(c.jsx)("div",{className:"synth-type-item ".concat("burn"===Me?"selected":""),onClick:function(){return Ke("burn")},children:"Burn"})]}),Object(c.jsxs)("div",{className:"market-asset-value",children:["Market Asset Value: \xa0\xa0",Object(c.jsxs)("span",{children:["$",new C.a(Le.marketAssetValue||0).div(B).toString()]})]}),Object(c.jsxs)("div",{className:"synth-assets-panel",children:[Object(c.jsxs)("div",{className:"synth-assets-panel-header",children:[Object(c.jsx)("div",{className:"panel-header-item panel-header-item-asset",children:"Asset"}),Object(c.jsx)("div",{className:"panel-header-item",children:"Price($)"}),Object(c.jsx)("div",{className:"panel-header-item",children:"Holdings($)"}),Object(c.jsx)("div",{className:"panel-header-item",children:"Effective Leverage"}),Object(c.jsx)("div",{className:"panel-header-item panel-header-item-action"})]}),Object(c.jsx)("div",{className:"synth-assets-list",children:function(){if("mint"===Me){if(Pe.liveAssets){var e=Pe.liveAssets.map((function(e){var t=Le.accountAssetBalances?Le.accountAssetBalances.find((function(t){return t.assetId===e.assetId})):null,n=!(1===e.times&&e.leverageType===X);return t&&(e.holdings=new C.a(t.assetPrice).div(B).times(t.balance).div(Math.pow(10,e.decimals)).toString()),e.effectiveLeverage=ct(e),Object(c.jsxs)("div",{className:"synth-assets-list-item ".concat(e.unprocessedFrozen?"unprocessed-frozen":""),children:[Object(c.jsx)("div",{className:"synth-assets-list-item-name",children:Object(c.jsxs)("div",{className:"synth-assets-list-item-icon icon-".concat(e.tokenName),children:[n?Object(c.jsx)(fe.a,{placement:"top",overlay:st(e),children:Object(c.jsx)("span",{children:e.label})}):Object(c.jsx)("span",{children:e.label}),e.unprocessedFrozen?Object(c.jsx)(fe.a,{placement:"top",overlay:"The first one that freezes an asset will get 1\u2030 of burning fee from all holders",children:Object(c.jsx)("span",{className:"freeze-asset-btn",onClick:function(){return at(e)}})}):null]})}),Object(c.jsx)("div",{className:"synth-assets-list-item-price",children:new C.a(e.price).div(B).toString()}),Object(c.jsx)("div",{className:"synth-assets-list-item-holding",children:e.holdings||0}),Object(c.jsx)("div",{className:"synth-assets-list-item-leverage",children:e.effectiveLeverage}),Object(c.jsx)("div",{className:"synth-assets-list-item-action",children:Object(c.jsx)("div",{className:"synth-assets-list-item-action-mint",onClick:function(){be(!0),i(e)},children:"Mint"})})]},e.assetId)}));return e.length?e:Object(c.jsx)("div",{className:"empty-asset-hint",children:"No Assets"})}return Object(c.jsx)("div",{className:"asset-loading-hint",children:"Loading..."})}if(Le.accountAssetBalances){var t=Le.accountAssetBalances.map((function(e){var t=Pe.liveAssets?Pe.liveAssets.find((function(t){return t.assetId===e.assetId})):null;return t||(t=Pe.frozenAssets?Pe.frozenAssets.find((function(t){return t.assetId===e.assetId})):null)&&(t.isFrozen=!0),t&&(t.isFrozen||(t.lowLimit&&new C.a(t.tokenPrice).lte(new C.a(t.lowLimit))||t.highLimit&&new C.a(t.tokenPrice).gte(new C.a(t.highLimit)))&&(t.unprocessedFrozen=!0),t.balance=e.balance,t.assetPrice=e.assetPrice,t.effectiveLeverage=ct(t)),t?Object(c.jsxs)("div",{className:"synth-assets-list-item ".concat(t.isFrozen?"frozen":""," ").concat(t.unprocessedFrozen?"unprocessed-frozen":""),children:[Object(c.jsx)("div",{className:"synth-assets-list-item-name",children:Object(c.jsxs)("div",{className:"synth-assets-list-item-icon icon-".concat(t.tokenName),children:[t.label,t.unprocessedFrozen?Object(c.jsx)(fe.a,{placement:"top",overlay:"The first one that freezes an asset will get 1\u2030 of burning fee from all holders",children:Object(c.jsx)("span",{onClick:function(){return at(t)}})}):null]})}),Object(c.jsx)("div",{className:"synth-assets-list-item-price",children:new C.a(e.assetPrice).div(B).toString()}),Object(c.jsx)("div",{className:"synth-assets-list-item-holding",children:new C.a(e.assetPrice).div(B).times(e.balance).div(Math.pow(10,t.decimals)).toString()}),Object(c.jsx)("div",{className:"synth-assets-list-item-leverage",children:t.effectiveLeverage}),Object(c.jsxs)("div",{className:"synth-assets-list-item-action",children:[Object(c.jsx)("div",{className:"synth-assets-list-item-action-burn",onClick:function(){xe(!0),T(t)},children:"Burn"}),Object(c.jsx)("div",{className:"synth-assets-list-item-action-exchange",onClick:function(){Ne(!0),V(t);var e=Pe.liveAssets.filter((function(e){return e.assetId!==t.assetId}));re(e),$(e[0])},children:"Exchange"})]})]},e.assetId):null}));return t.length?t:Object(c.jsx)("div",{className:"empty-asset-hint",children:"No Assets"})}return Object(c.jsx)("div",{className:"asset-loading-hint",children:"Loading..."})}()})]})]}),"mint"===Me?Object(c.jsxs)("div",{className:"mint-burn-info",children:[Object(c.jsx)("div",{className:"mint-burn-info-title",children:"Mint Synthetics by staking UNX"}),Object(c.jsx)("div",{className:"mint-burn-info-desc",children:"UNX stakers earn staking rewards once minted."}),Object(c.jsx)("div",{className:"mint-burn-account-info",children:Object(c.jsxs)("div",{className:"mint-burn-account-info-line",children:["Minted With ",Object(c.jsxs)("span",{children:[new C.a(Le.accountStakeValue||0).div(Math.pow(10,Ue.decimals)).toString()||"0"," UNX"]})]})})]}):Object(c.jsxs)("div",{className:"mint-burn-info",children:[Object(c.jsx)("div",{className:"mint-burn-info-title",children:"Burn Synthetics to unstake UNX"}),Object(c.jsx)("div",{className:"mint-burn-info-desc",children:"Burn your synthetics to withdraw UNX."}),Object(c.jsx)("div",{className:"mint-burn-account-info",children:Object(c.jsxs)("div",{className:"mint-burn-account-info-line",children:["Assets($) ",Object(c.jsx)("span",{children:new C.a(Le.accountAssetValue).div(B).toString()})]})}),Object(c.jsxs)("div",{className:"mint-burn-info-note",children:[Object(c.jsx)("strong",{children:"NOTE"}),': when "Effective Leverage" is lower than 0.5 or higher than 2.0 times of nominal leverage, your asset will be frozen. ',Object(c.jsx)("span",{children:"You have to burn it within 3 days."})," Otherwise, your asset will be burned and the UNX will be donated to staked pool."]})]})]}),pe?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){be(!1),m(""),g("")}}),Object(c.jsxs)("div",{className:"mint-wrapper",children:[Object(c.jsxs)("div",{className:"mint-wrapper-title",children:["Mint ",n.label]}),Object(c.jsxs)("div",{className:"mint-wrapper-info",children:["Price($)",Object(c.jsx)("span",{children:new C.a(n.price).div(B).toString()})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"input-label",children:"Amount"}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)(f,{placeholder:"0.0",value:l,decimals:n.decimals||0,onChange:function(e){return function(e){m(e),Fe&&e?g(new C.a(e).times(n.price).div(Fe).div(.999).toFixed(Ue.decimals)):0===Number(e)&&g("")}(e)}})})]}),Object(c.jsx)(J,{label:"You need to pay (UNX)",value:x,defaultToken:Ue,decimals:Ue.decimals||0,onAmountChange:function(e){return function(e){g(e),Fe&&e?m(new C.a(e).times(Fe).div(n.price).times(.999).toFixed(n.decimals)):0===Number(e)&&m("")}(e)}}),Object(c.jsx)("div",{className:"fee-rate",children:"* The fee rate of transaction is 0.1%"}),Object(c.jsx)("div",{className:"mint-btn",onClick:function(){return function(){return Je.apply(this,arguments)}()},children:"Mint"})]})]})}):null,Oe?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){xe(!1),I(""),M("")}}),Object(c.jsxs)("div",{className:"burn-wrapper",children:[Object(c.jsxs)("div",{className:"burn-wrapper-title",children:["Burn ",S.label]}),Object(c.jsxs)("div",{className:"burn-wrapper-info",children:["Price($)",Object(c.jsx)("span",{children:new C.a(S.assetPrice).div(B).toString()})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"input-label",children:["Amount",Object(c.jsxs)("span",{className:"hint",children:["Balance: ",new C.a(S.balance).div(Math.pow(10,S.decimals)).toString()]})]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Object(c.jsx)(f,{placeholder:"0.0",value:A,decimals:S.decimals||0,onChange:function(e){return $e(e)}}),Object(c.jsx)("div",{className:"input-max-btn",onClick:function(){S&&$e(new C.a(S.balance).div(Math.pow(10,S.decimals)).toString())},children:"MAX"})]})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"input-label",children:"You will get (UNX)"}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)(f,{placeholder:"0.0",value:R,decimals:Ue.decimals||0,onChange:function(e){return function(e){M(e),Fe&&e?I(new C.a(e).times(Fe).div(S.assetPrice).div(.999).toFixed(S.decimals)):0===Number(e)&&I("")}(e)}})})]}),Object(c.jsx)("div",{className:"fee-rate",children:"* The fee rate of transaction is 0.1%"}),Object(c.jsx)("div",{className:"burn-btn",onClick:function(){return function(){return Ze.apply(this,arguments)}()},children:"Burn"})]})]})}):null,ge?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){Ne(!1),ae(""),ue("")}}),Object(c.jsxs)("div",{className:"exchange-wrapper",children:[Object(c.jsxs)("div",{className:"exchange-wrapper-title",children:["Exchange ",W.label]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"input-label",children:["Amount",Object(c.jsxs)("span",{className:"hint",children:["Balance: ",new C.a(W.balance).div(Math.pow(10,W.decimals)).toString()]})]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Object(c.jsx)(f,{placeholder:"0.0",value:ee,decimals:W.decimals||0,onChange:function(e){return Qe(e)}}),Object(c.jsx)("div",{className:"input-max-btn",onClick:function(){W&&Qe(new C.a(W.balance).div(Math.pow(10,W.decimals)).toString())},children:"MAX"})]})]}),Object(c.jsx)(J,{cls:"asset-select",label:"Exchange to",value:de,tokens:ie,showBalance:!1,withMax:!1,onTokenChange:function(e){return function(e){$(e),ee?ue(new C.a(W.price).div(e.price).times(ee).times(Math.pow(10,W.decimals)).div(Math.pow(10,e.decimals)).times(.999).toFixed(e.decimals)):0===Number(ee)&&ue("")}(e)},onAmountChange:function(e){return function(e){ue(e),e?ae(new C.a(e).times(Math.pow(10,G.decimals)).div(Math.pow(10,W.decimals)).times(G.price).div(W.price).div(.999).toFixed(W.decimals)):0===Number(e)&&ae("")}(e)}}),Object(c.jsx)("div",{className:"fee-rate",children:"* The fee rate of transaction is 0.1%"}),Object(c.jsx)("div",{className:"exchange-btn",onClick:function(){return function(){return tt.apply(this,arguments)}()},children:"Exchange"})]})]})}):null]})},Ae=(n(649),function(e){var t=Object(s.useState)(!0),n=Object(v.a)(t,2),a=n[0],i=n[1],r=Object(s.useState)({}),o=Object(v.a)(r,2),l=o[0],d=o[1],u=Object(h.c)((function(e){return{poolStat:e.gov.poolStat}})).poolStat,j=function(e){var t=parseInt((new Date(1e3*e)-new Date)/1e3,10),n=parseInt(t<0?0:t/3600/24,10),a=parseInt(t<0?0:t/3600%24,10),c=parseInt(t<0?0:t/60%60,10),s=t<0?0:t%60,i={day:n<10?"0".concat(n):n,hour:a<10?"0".concat(a):a,minute:c<10?"0".concat(c):c,second:s<10?"0".concat(s):s};d(i)};return Object(s.useEffect)((function(){var e=u.distributionInfo.startTimeStamp;e&&new Date(1e3*e)>new Date?(i(!1),j(u.distributionInfo.startTimeStamp)):i(!0)}),[u]),Object(s.useEffect)((function(){var e=!a&&setInterval((function(){return j(u.distributionInfo.startTimeStamp)}),1e3);return function(){e&&clearInterval(e)}}),[a]),Object(c.jsxs)("div",{className:"governance-wrapper",children:[Object(c.jsxs)("div",{className:"overview-wrapper",children:[Object(c.jsx)("div",{className:"overview-title",children:"Overview"}),a?null:Object(c.jsxs)("div",{className:"countdown-wrapper",children:["Distribution will begin in",Number(l.day)?Object(c.jsxs)("div",{className:"date-item",children:["DAYS",Object(c.jsx)("p",{children:l.day})]}):null,l.hour?Object(c.jsxs)("div",{className:"date-item",children:["HOURS",Object(c.jsx)("p",{children:l.hour})]}):null,l.minute?Object(c.jsxs)("div",{className:"date-item",children:["MINUTES",Object(c.jsx)("p",{children:l.minute})]}):null,l.second?Object(c.jsxs)("div",{className:"date-item",children:["SECONDS",Object(c.jsx)("p",{children:l.second})]}):null]}),Object(c.jsxs)("div",{className:"overview-sections",children:[Object(c.jsxs)("div",{className:"overview-left",children:[Object(c.jsx)("p",{className:"overview-section-title",children:"Total UNX"}),Object(c.jsx)("p",{className:"overview-detail",children:N(u.distributionInfo.amount||0)})]}),Object(c.jsxs)("div",{className:"overview-right",children:[Object(c.jsx)("p",{className:"overview-section-title",children:"Daily Distribution"}),Object(c.jsxs)("p",{className:"overview-detail",children:[N(((u.distributionInfo.amount||0)/(u.distributionInfo.period||1)*86400).toFixed(9))," ",Object(c.jsx)("span",{children:"UNX"})]})]})]})]}),Object(c.jsxs)("div",{className:"distribution-wrapper",children:[Object(c.jsx)("div",{className:"overview-title",children:"Distribution"}),Object(c.jsxs)("div",{className:"distribution-sections",children:[Object(c.jsx)("div",{className:"pie-svg",children:Object(c.jsxs)("svg",{className:"donut",width:"240px",height:"240px",viewBox:"0 0 42 42",role:"img",children:[Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#2BBE7F","stroke-width":"4","stroke-dasharray":"80, 20","stroke-dashoffset":"100"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FFFFFF","stroke-width":"4","stroke-dasharray":"0.5, 99.5","stroke-dashoffset":"120"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FE332F","stroke-width":"4","stroke-dasharray":"8, 92","stroke-dashoffset":"219.5"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FFFFFF","stroke-width":"4","stroke-dasharray":"0.5, 99.5","stroke-dashoffset":"311.5"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#F4BA5E","stroke-width":"4","stroke-dasharray":"8, 92","stroke-dashoffset":"411"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FFFFFF","stroke-width":"4","stroke-dasharray":"0.5, 99.5","stroke-dashoffset":"503"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#2B3962","stroke-width":"4","stroke-dasharray":"3, 97","stroke-dashoffset":"602.5"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FFFFFF","stroke-width":"4","stroke-dasharray":"0.5, 99.5","stroke-dashoffset":"699.5"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#F18DA5","stroke-width":"4","stroke-dasharray":"1, 99","stroke-dashoffset":"799"}),Object(c.jsx)("circle",{cx:"21",cy:"21",r:"15.915494309189533",fill:"none",stroke:"#FFFFFF","stroke-width":"4","stroke-dasharray":"0.5, 99.5","stroke-dashoffset":"898"})]})}),Object(c.jsxs)("div",{className:"pie-desc",children:[Object(c.jsxs)("div",{className:"d-item",children:[Object(c.jsx)("div",{className:"d-item-color",style:{background:"#2BBE7F"}}),Object(c.jsx)("div",{className:"d-item-name",children:"Community"}),Object(c.jsx)("div",{className:"d-item-ratio",children:"80%"})]}),Object(c.jsxs)("div",{className:"d-item",children:[Object(c.jsx)("div",{className:"d-item-color",style:{background:"#FE332F"}}),Object(c.jsx)("div",{className:"d-item-name",children:"Developer"}),Object(c.jsx)("div",{className:"d-item-ratio",children:"8%"})]}),Object(c.jsxs)("div",{className:"d-item",children:[Object(c.jsx)("div",{className:"d-item-color",style:{background:"#F4BA5E"}}),Object(c.jsx)("div",{className:"d-item-name",children:"Foundation"}),Object(c.jsx)("div",{className:"d-item-ratio",children:"8%"})]}),Object(c.jsxs)("div",{className:"d-item",children:[Object(c.jsx)("div",{className:"d-item-color",style:{background:"#2B3962"}}),Object(c.jsx)("div",{className:"d-item-name",children:"Resoucse Extension"}),Object(c.jsx)("div",{className:"d-item-ratio",children:"3%"})]}),Object(c.jsxs)("div",{className:"d-item",children:[Object(c.jsx)("div",{className:"d-item-color",style:{background:"#F18DA5"}}),Object(c.jsx)("div",{className:"d-item-name",children:"Volunteer"}),Object(c.jsx)("div",{className:"d-item-ratio",children:"1%"})]})]})]})]})]})}),Ce=E.utils.StringReader,Ie=E.utils.hexstr2str,Pe=E.utils.reverseHex,Le=(n(650),function(){var e=Object(b.c)(),t=Object(h.c)((function(e){return{isUpgrading:e.common.isUpgrading,loadingToken:e.common.loadingToken,account:e.wallet.account}})),n=t.account,a=t.isUpgrading,r=t.loadingToken,o=Object(h.b)(),l=Object(s.useCallback)((function(e){return o({type:"SET_ACCOUNT",account:e})}),[]);function v(){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.client.api.asset.getAccount();case 3:t=e.sent,l(t),localStorage.setItem("account",t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){var t=3,n=setInterval((function(){j.client.api.provider.getProvider().then((function(){clearInterval(n)})).catch((function(n){"NO_PROVIDER"===n&&(--t||e.error("Please install wallet extension first"))}))}),500)}),[]),Object(s.useEffect)((function(){j.client.api.network.getNetwork().then((function(t){t&&t.type!==O&&e.error("Please connect to the ".concat(O,"-Net"))})).catch((function(e){console.log(e)}))}),[]),function(){var e=Object(h.c)((function(e){return{stopInterval:e.common.stopInterval,tokens:e.common.tokens}})),t=e.stopInterval,n=e.tokens,a=Object(h.b)(),c=Object(s.useCallback)((function(e){return a({type:"SET_IS_UPGRADING",isUpgrading:e})}),[]),i=Object(s.useCallback)((function(e){return a({type:"SET_LOADING_TOKEN",loadingToken:e})}),[]),r=Object(s.useCallback)((function(e){return a({type:"SET_TOKENS",tokens:e})}),[]),o=Object(s.useCallback)((function(e){return a({type:"SET_STOP_INTERVAL",stopInterval:e})}),[]),l=Object(s.useCallback)((function(e){return a({type:"SET_POOL_STAT",poolStat:e})}),[]);function m(){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(d.a.mark((function e(){var t,a,s,u,m,p,b,h,v,f,O,k,w,g,N,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=30;break}return e.prev=1,e.next=4,j.client.api.smartContract.invokeWasmRead({scriptHash:x,operation:"stat",args:[]});case 4:for(t=e.sent,a=new Ce(t),(s={}).amount=a.readUint128()/Math.pow(10,9),s.period=a.readUint128(),s.startTimeStamp=a.readUint128(),s.settledTimeStamp=a.readUint128(),u={},m=a.readNextLen(),p=0,b=0;b<m;b++)h={},v=a.readNextLen(),h.name=Ie(a.read(v)),h.address=Pe(a.read(20)),h.weight=a.readUint128(),p+=h.weight,u[h.name]=h;for(f in u)u[f].ratio=u[f].weight/p;for(O=a.readBoolean(),k=[],w=a.readNextLen(),g=0;g<w;g++)(N={}).id=a.readUint128(),y=a.readNextLen(),N.name=Ie(a.read(y)),N.address=Pe(a.read(20)),N.ty=a.readUint8(),N.decimals=a.readUint128(),N.value=N.id,N.label=N.name,k.push(N);O&&c(!0),i(!1),r(k),l({distributionInfo:s,pools:u,upgrade:O}),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.log(e.t0),W(e.t0,(function(t){console.log(t),"CONTRACT_ADDRESS_ERROR"===t?o(!0):console.log("get all tokens",e.t0)}));case 30:case"end":return e.stop()}}),e,null,[[1,26]])})))).apply(this,arguments)}Object(s.useEffect)((function(){m();var e=!t&&!n.length&&setInterval((function(){return m}),1e3);return function(){e&&clearInterval(e)}}),[n,t])}(),Object(c.jsxs)(m.a,{children:[r?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper transparent-bg",children:[Object(c.jsx)("div",{className:"modal-icon-loading modal-icon"}),Object(c.jsx)("div",{className:"modal-text light",children:"Loading..."})]})}):null,a?function(){if(a)return Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper transparent-bg",children:[Object(c.jsx)("div",{className:"modal-icon-upgrading modal-icon"}),Object(c.jsx)("div",{className:"modal-text light",children:"UNIQ-EX is upgrading..."})]})})}():Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(i.a.Fragment,{children:[null===n&&Object(c.jsx)("div",{className:"connect-wallet-overlay",children:Object(c.jsxs)("div",{className:"connect-wrapper",children:[Object(c.jsx)("p",{className:"connect-title",children:"Connect Wallet"}),Object(c.jsx)("div",{className:"wallet-item",onClick:function(){return v()},children:"Cyano Wallet"})]})}),Object(c.jsx)(_,{}),Object(c.jsx)(S,{onSignOut:function(){return l(""),void localStorage.setItem("account","")},onConnectWallet:function(){return v()}}),Object(c.jsx)("div",{className:"main-wrapper",children:Object(c.jsxs)(p.c,{children:[g.indexOf("/")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/",children:Object(c.jsx)(xe,{})}):null,g.indexOf("/")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/staking/:id",children:Object(c.jsx)(we,{})}):null,g.indexOf("/swap")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/swap",children:Object(c.jsx)(de,{})}):null,g.indexOf("/swap")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/pool",children:Object(c.jsx)(me,{})}):null,g.indexOf("/swap")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/pool/add",children:Object(c.jsx)(pe,{})}):null,g.indexOf("/swap")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/pool/remove/:id",children:Object(c.jsx)(ve,{})}):null,g.indexOf("/trade")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/trade",children:Object(c.jsx)(z,{})}):null,g.indexOf("/governance")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/governance",children:Object(c.jsx)(Ae,{})}):null,g.indexOf("/token")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/token",children:Object(c.jsx)(ge,{})}):null,g.indexOf("/option")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/option",children:Object(c.jsx)(Ne,{})}):null,g.indexOf("/synth")>=0?Object(c.jsx)(p.a,{exact:!0,path:"/synth",children:Object(c.jsx)(Ee,{})}):null]})})]})})]})}),Re=n(122),Me=n(309),De={infoModal:{show:!1,type:"",text:"",extraText:"",extraLink:""}},Ue={account:localStorage.getItem("account"),slippage:localStorage.getItem("slippage")||"0.1"},Fe={isUpgrading:!1,loadingToken:!0,stopInterval:!1,tokens:[]},We={poolStat:{distributionInfo:{},pools:{staking:{},swap:{},dex:{},synth:{}},upgrade:!1}},Ve={tokens:[],pairs:[],swapType:"exactin",token1:{},token2:{},token1Amount:"",token2Amount:"",isValidPair:!1,isValidSwap:!1,bestPath:[],showPrice:!1},Be={tokens:[]},He={stat:{},marketStat:{},availableReward:0,synthType:"mint",unxToken:{},unxPrice:0},qe={makes:[],myMakes:[],pairs:[],tradeType:"buy",tokenPair:{},makeView:"all",pool:[],lastPrice:0,feeRate:0,isValid:!1,tokenBalance:"-",price:"",amount:"",total:""},Xe={liquidityBalance:[]},Ke=Object(Re.a)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODAL":return Object(a.a)(Object(a.a)({},e),{},Object(ue.a)({},t.modalType,t.modalDetail));default:return Object(a.a)({},e)}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCOUNT":return Object(a.a)(Object(a.a)({},e),{},{account:t.account});case"SET_SLIPPAGE":return localStorage.setItem("slippage",t.slippage),Object(a.a)(Object(a.a)({},e),{},{slippage:t.slippage});default:return Object(a.a)({},e)}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_UPGRADING":return Object(a.a)(Object(a.a)({},e),{},{isUpgrading:t.isUpgrading});case"SET_LOADING_TOKEN":return Object(a.a)(Object(a.a)({},e),{},{loadingToken:t.loadingToken});case"SET_STOP_INTERVAL":return Object(a.a)(Object(a.a)({},e),{},{stopInterval:t.stopInterval});case"SET_TOKENS":return Object(a.a)(Object(a.a)({},e),{},{tokens:t.tokens});default:return Object(a.a)({},e)}},gov:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POOL_STAT":return Object(a.a)(Object(a.a)({},e),{},{poolStat:t.poolStat});default:return Object(a.a)({},e)}},swap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SWAP_TOKENS":return Object(a.a)(Object(a.a)({},e),{},{tokens:t.tokens});case"SET_PAIRS":return Object(a.a)(Object(a.a)({},e),{},{pairs:t.pairs});case"SET_SWAP_TYPE":return Object(a.a)(Object(a.a)({},e),{},{swapType:t.swapType});case"SET_SWAP_TOKEN1":return Object(a.a)(Object(a.a)({},e),{},{token1:t.token1});case"SET_SWAP_TOKEN2":return Object(a.a)(Object(a.a)({},e),{},{token2:t.token2});case"SET_TOKEN1_AMOUNT":return Object(a.a)(Object(a.a)({},e),{},{token1Amount:t.token1Amount});case"SET_TOKEN2_AMOUNT":return Object(a.a)(Object(a.a)({},e),{},{token2Amount:t.token2Amount});case"SET_IS_VALID_PAIR":return Object(a.a)(Object(a.a)({},e),{},{isValidPair:t.isValidPair});case"SET_IS_VALID_SWAP":return Object(a.a)(Object(a.a)({},e),{},{isValidSwap:t.isValidSwap});case"SET_SWAP_BEST_PATH":return Object(a.a)(Object(a.a)({},e),{},{bestPath:t.bestPath});case"SET_SWAP_SHOW_RPICE":return Object(a.a)(Object(a.a)({},e),{},{showPrice:t.showPrice});default:return Object(a.a)({},e)}},staking:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STAKING_TOKENS":return Object(a.a)(Object(a.a)({},e),{},{tokens:t.tokens});default:return Object(a.a)({},e)}},synth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SYNTH_STAT":return Object(a.a)(Object(a.a)({},e),{},{stat:t.stat});case"SET_SYNTH_MARKET_STAT":return Object(a.a)(Object(a.a)({},e),{},{marketStat:t.marketStat});case"SET_SYNTH_AVAILABLE_REWARD":return Object(a.a)(Object(a.a)({},e),{},{availableReward:t.availableReward});case"SET_SYNTH_TYPE":return Object(a.a)(Object(a.a)({},e),{},{synthType:t.synthType});case"SET_SYNTH_UNX_TOKEN":return Object(a.a)(Object(a.a)({},e),{},{unxToken:t.unxToken});case"SET_SYNTH_UNX_PRICE":return Object(a.a)(Object(a.a)({},e),{},{unxPrice:t.unxPrice});default:return Object(a.a)({},e)}},trade:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRADE_MAKES":return Object(a.a)(Object(a.a)({},e),{},{makes:t.makes});case"SET_TRADE_MY_MAKES":return Object(a.a)(Object(a.a)({},e),{},{myMakes:t.myMakes});case"SET_TRADE_PAIRS":return Object(a.a)(Object(a.a)({},e),{},{pairs:t.pairs});case"SET_TRADE_TYPE":return Object(a.a)(Object(a.a)({},e),{},{tradeType:t.tradeType});case"SET_TRADE_TOKEN_PAIR":return Object(a.a)(Object(a.a)({},e),{},{tokenPair:t.tokenPair});case"SET_TRADE_MAKE_VIEW":return Object(a.a)(Object(a.a)({},e),{},{makeView:t.makeView});case"SET_TRADE_POOL":return Object(a.a)(Object(a.a)({},e),{},{pool:t.pool});case"SET_TRADE_LAST_PRICE":return Object(a.a)(Object(a.a)({},e),{},{lastPrice:t.lastPrice});case"SET_TRADE_FEE_RATE":return Object(a.a)(Object(a.a)({},e),{},{feeRate:t.feeRate});case"SET_TRADE_IS_VALID":return Object(a.a)(Object(a.a)({},e),{},{isValid:t.isValid});case"SET_TRADE_TOKEN_BALANCE":return Object(a.a)(Object(a.a)({},e),{},{tokenBalance:t.tokenBalance});case"SET_TRADE_PRICE":return Object(a.a)(Object(a.a)({},e),{},{price:t.price});case"SET_TRADE_AMOUNT":return Object(a.a)(Object(a.a)({},e),{},{amount:t.amount});case"SET_TRADE_TOTAL":return Object(a.a)(Object(a.a)({},e),{},{total:t.total});default:return Object(a.a)({},e)}},pool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POOL_LIQUIDITY_BALANCE":return Object(a.a)(Object(a.a)({},e),{},{liquidityBalance:t.liquidityBalance});default:return Object(a.a)({},e)}}}),Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,659)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))},ze=(n(652),n(653),n(654),n(655),Object(Re.b)(Ke));j.client.registerClient({});var Ge={timeout:1e4,position:b.b.TOP_CENTER};o.a.render(Object(c.jsx)(b.a,Object(a.a)(Object(a.a)({template:Me.a},Ge),{},{children:Object(c.jsx)(h.a.Provider,{value:ze,children:Object(c.jsx)(Le,{})})})),document.getElementById("root")),Ye()}},[[656,1,2]]]);
//# sourceMappingURL=main.b7edec99.chunk.js.map