{"version":3,"sources":["../node_modules/milagro-crypto-js/src sync /^/.//.*$","components/input/index.js","config.js","utils/common.js","components/header/index.js","components/modal/index.js","utils/request.js","utils/token.js","utils/errorHandle.js","utils/constants.js","pages/transaction/index.js","components/tokenInput/index.js","hooks/usePair.js","utils/swap.js","pages/swap/index.js","pages/pool/index.js","pages/pool/addLiquidity/index.js","pages/pool/removeLiquidity/index.js","pages/staking/index.js","pages/staking/detail/index.js","pages/token/index.js","pages/governance/index.js","hooks/useToken.js","App.js","reducers/modal.js","reducers/wallet.js","reducers/common.js","reducers/gov.js","reducers/swap.js","reducers/index.js","reportWebVitals.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Input","props","value","cls","disabled","round","decimals","inline","onChange","useState","val","setVal","useEffect","placeholder","handleInput","formattedValue","v","RegExp","test","formatter","target","className","type","onInput","NETWORK_TYPE","CONTRACT_ADDRESS","STAKING_ADDRESS","GOVERNANCE_ADDRESS","SWAP_ADDRESS","TRANSACTION_BASE_URL","TRANSACTION_AFTERFIX","READY_TABS","toLocaleFixed","num","n","priceNum","parseFloat","Math","toFixed","toString","indexOf","replace","$0","$1","formatAccount","account","substr","Header","showProfilePanel","setShowProfilePanel","useMappedState","state","wallet","slippage","showSiteIntro","setShowSiteIntro","dispatch","useDispatch","setSlippage","useCallback","toggleShowSiteIntro","show","href","window","location","origin","pathname","onClick","rel","renderSiteIntro","to","onConnectWallet","Number","amount","onSignOut","InfoModal","onCloseModal","text","extraLink","extraText","Modal","infoModal","modal","setModal","modalType","modalDetail","modals","push","assign","buildModals","instance","axios","create","baseURL","timeout","headers","interceptors","response","use","data","error","Promise","reject","reverseHex","utils","getTokenBalance","token","cb","name","param","scriptHash","address","operation","args","invokeMethod","client","api","smartContract","invokeRead","ty","invokeWasmRead","then","bl","parseInt","request","method","url","resp","targetToken","result","find","t","asset_name","toLowerCase","balance","catch","console","log","getTokenIconDom","split","slice","tokenName","handleError","callback","json","JSON","parse","Result","PRICE_DECIMALS","StringReader","Transaction","pairNameKeyword","setPairNameKeyword","pairs","setPairs","tokenPair","setTokenPair","showPairSelectModal","setShowPairSelectModal","tradeType","setTradeType","tokenBalance","setTokenBalance","makes","setMakes","myMakes","setMyMakes","makeView","setMakeView","price","setPrice","setAmount","total","setTotal","pool","setPool","lastPrice","setLastPrice","feeRate","setFeeRate","isValid","setIsValid","stopInterval","common","tokens","setStopInterval","Alert","useAlert","urlPairName","hash","reg","match","getHashString","getMakes","curMakes","filter","m","asset_token_id","price_token_id","BigNumber","div","pow","onUnmake","make_id","times","a","assetToken","priceToken","tradePrice","tradeAmount","integerValue","ROUND_DOWN","invokeWasm","gasPrice","gasLimit","requireIdentity","makeResult","transaction","makeId","unmakeResult","getPriceHint","getAmountHint","length","p","getMakesOfPair","makeStr","parsedMakes","strReader","pairLastPrice","readUint128","j","makeCount","readNextLen","i","make","errorCode","interval","setInterval","clearInterval","getUserMakes","hexToAddress","read","getStat","statStr","tokenPool","tokenCount","tempToken","tokenPairs","onMake","toUpperCase","tp","generateTokenPool","TokenInput","defaultTokenId","inputDisabled","showBalance","withMax","onTokenChange","onAmountChange","balanceChange","setToken","setBalance","label","defaultId","defaultToken","defaultValue","options","isSearchable","components","Option","SingleValue","children","newToken","handleTokenChange","theme","borderRadius","colors","primary","renderTokenSeletion","isNaN","useFetchPairs","swapTokens","swap","setSwapTokens","getSwapStat","pairStr","parsedPairs","pairCount","pair","token1","token2","reserve1","reserve2","lp","tokenIds","tk","REST","findAllPaths","sourceId","targetId","pathArr","findPath","pathNodes","neighborNodes","includes","sort","p1","p2","getInputAmount","output","reverse","ceil","getOutputAmount","input","floor","findNextOutput","findPrevInput","bestSwap","paths","originAmount","maxOutput","minInput","Infinity","path","Swap","swapType","setSwapType","setToken1","setToken2","token1Amount","setToken1Amount","token2Amount","setToken2Amount","isValidPair","setIsValidPair","isValidSwap","setIsValidSwap","bestPath","setBestPath","showPrice","setShowPrice","setBalanceChange","history","useHistory","swapResult","validPair","onChangeToken1","inputAmount","onToken1AmountChange","onChangeToken2","outputAmount","onToken2AmountChange","handleSwap","abs","getPriceImpact","items","index","getBestPath","Pool","liquidityBalance","setLiquidityBalance","all","lb","pairId","shareOfPool","sqrt","onRemoveLiquidity","AddLiquidity","isFirstProvider","setIsFirstProvider","showPriceInfo","setShowPriceInfo","getPairByToken","getPairPrice","ROUND_UP","addResult","goBack","amountProduct","getShareOfPool","onAdd","RemoveLiquidity","setPair","useLocation","onRemove","Staking","stakingTokens","setStakingTokens","getStakingTokenBalance","parsedTokens","weight","tokenMap","totalWeight","values","reduce","b","filteredTokens","originWeight","getTip","startsWith","placement","overlay","onSelectToken","generateStakingPool","StakingDetail","stakeToken","setStakeToken","myStake","setMyStake","stakeType","setStakeType","claimableWing","setClaimableWing","showStakingModal","setShowStakingModal","tokenId","getAccountStake","stakeStr","interest","stake","handleStakeClick","action","stakeResult","harvestResult","sToken","getClaimableWing","onHarvest","onStake","Token","Governance","poolStat","gov","distributionInfo","period","width","height","viewBox","role","cx","cy","r","fill","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","style","background","hexstr2str","App","loadingToken","setAccount","provider","getProvider","network","getNetwork","asset","getAccount","accountAddress","localStorage","setItem","setLoadingToken","setTokens","setPoolStat","getGovStat","startTimeStamp","settledTimeStamp","pools","poolCount","nameLength","upgrade","readBoolean","readUint8","useFetchTokens","exact","initState","getItem","reducers","combineReducers","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","createStore","Ontology","registerClient","position","positions","TOP_CENTER","ReactDOM","render","template","AlertTemplate","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.6d177114.chunk.js","sourcesContent":["var map = {\n\t\"./aes\": 269,\n\t\"./aes.js\": 269,\n\t\"./big\": 270,\n\t\"./big.js\": 270,\n\t\"./ctx\": 170,\n\t\"./ctx.js\": 170,\n\t\"./ecdh\": 271,\n\t\"./ecdh.js\": 271,\n\t\"./ecp\": 272,\n\t\"./ecp.js\": 272,\n\t\"./ecp2\": 273,\n\t\"./ecp2.js\": 273,\n\t\"./ff\": 274,\n\t\"./ff.js\": 274,\n\t\"./fp\": 275,\n\t\"./fp.js\": 275,\n\t\"./fp12\": 276,\n\t\"./fp12.js\": 276,\n\t\"./fp2\": 277,\n\t\"./fp2.js\": 277,\n\t\"./fp4\": 278,\n\t\"./fp4.js\": 278,\n\t\"./gcm\": 279,\n\t\"./gcm.js\": 279,\n\t\"./hash256\": 280,\n\t\"./hash256.js\": 280,\n\t\"./hash384\": 281,\n\t\"./hash384.js\": 281,\n\t\"./hash512\": 282,\n\t\"./hash512.js\": 282,\n\t\"./mpin\": 283,\n\t\"./mpin.js\": 283,\n\t\"./newhope\": 284,\n\t\"./newhope.js\": 284,\n\t\"./nhs\": 285,\n\t\"./nhs.js\": 285,\n\t\"./pair\": 286,\n\t\"./pair.js\": 286,\n\t\"./rand\": 287,\n\t\"./rand.js\": 287,\n\t\"./rom_curve\": 288,\n\t\"./rom_curve.js\": 288,\n\t\"./rom_field\": 289,\n\t\"./rom_field.js\": 289,\n\t\"./rsa\": 290,\n\t\"./rsa.js\": 290,\n\t\"./sha3\": 291,\n\t\"./sha3.js\": 291,\n\t\"./uint64\": 292,\n\t\"./uint64.js\": 292\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 593;","import React, { useState, useEffect } from 'react';\n\nconst Input = (props) => {\n  const { value = '', cls = '', round, disabled, decimals, inline = true, onChange } = props\n  const [val, setVal] = useState('')\n\n  useEffect(() => {\n    setVal(value)\n  //   if (value === '') {\n  //     setVal('')\n  //   } else if (`${value}`.endsWith('.')) {\n  //     setVal(value)\n  //   } else {\n  //     if (round === 'down') {\n  //       setVal(Math.floor(value * (10 ** decimals)) / (10 ** decimals))\n  //     } else if (round === 'up') {\n  //       setVal(Math.ceil(value * (10 ** decimals)) / (10 ** decimals))\n  //     }\n  //   }\n  }, [value])\n\n  const placeholder = decimals > 0 ? '0.0' : '0'\n  const formatter = (v, decimals = 9) => {\n    if (v === '' || v === '0') {\n      return v\n    } else {\n      const reg = (decimals > 0) ? new RegExp(\n        `^(([0-9]{0,9})|(([0]\\\\.\\\\d{0,${decimals}}|[0-9]{0,9}\\\\.\\\\d{0,${decimals}})))$`\n      ) : new RegExp('^[0-9]{0,9}$')\n      if (reg.test(v)) {\n        return v\n      } else {\n        return val\n      }\n    }\n  };\n  const handleInput = (e) => {\n    const formattedValue = formatter(e.target.value, decimals)\n\n    setVal(formattedValue)\n    typeof onChange === 'function' && onChange(formattedValue)\n  }\n\n  // const handleChange = (e) => {\n  //   typeof onChange === 'function' && onChange(e.target.value)\n  // }\n\n  return (\n    <input\n      className={`input ${inline ? 'inline-input' : ''} ${cls}`}\n      type=\"text\"\n      placeholder={placeholder}\n      value={val}\n      disabled={disabled}\n      onInput={(e) => handleInput(e)}\n      // onChange={(e) => handleChange(e)}\n    />\n  );\n};\n\nexport default Input;\n","export const NETWORK_TYPE = 'TEST'\nexport const CONTRACT_ADDRESS = '36a94c3d66790153044a7cecd86180b3da32d340'\nexport const STAKING_ADDRESS = '21f4125ae8704deff4f58bad17108cbe8624a17c'\nexport const GOVERNANCE_ADDRESS = '5a5493ca321bfd896303220297df38c8a3e891c8'\nexport const SWAP_ADDRESS = '09e1a0a8878e469043ff14a0ed461711fb60822e'\nexport const API_BASE_URL = 'https://polarisexplorer.ont.io'\nexport const TRANSACTION_BASE_URL = 'https://explorer.ont.io/transaction/'\nexport const TRANSACTION_AFTERFIX = '/testnet'\nexport const READY_TABS = ['/', '/swap', '/trade', '/token', '/governance']","export const getQueryString = (search, name) => {\n  const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`, 'i')\n  const value = search.substr(1).match(reg)\n\n  if (value != null) {\n    return (value[2])\n  }\n\n  return null\n}\n\nexport const getHashString = (hash, name) => {\n  const reg = new RegExp(`(^|&|[/?]+)${name}=([^&]*)(&|$)`, 'i')\n  const value = hash.substr(1).match(reg)\n\n  if (value != null) {\n    return (value[2])\n  }\n\n  return null\n}\n\nexport function toLocaleFixed(num, n = 9) {\n  const priceNum = parseFloat(n === 0 ? Math.round(num).toFixed(n) : parseFloat(num).toFixed(n)).toString()\n  return priceNum && (priceNum.indexOf('.') !== -1 ? priceNum.replace(/(\\d)(?=(\\d{3})+\\.)/g, ($0, $1) => `${$1},`) : priceNum.replace(/(?=(\\B\\d{3})+$)/g, ','))\n}\n\nexport const formatAccount = (account = '') => {\n  return `${account.substr(0, 4)}...${account.substr(-4)}`\n}\n","import React, { useState, useCallback } from 'react'\nimport { useMappedState, useDispatch } from 'redux-react-hook'\nimport { Link } from 'react-router-dom'\nimport Input from '../input'\nimport { READY_TABS } from '../../config'\nimport { formatAccount } from '../../utils/common'\nimport './index.css'\n\nconst Header = (props) => {\n  const [showProfilePanel, setShowProfilePanel] = useState(false)\n  const { account, slippage } = useMappedState((state) => ({\n    account: state.wallet.account,\n    slippage: state.wallet.slippage\n  }))\n  const [showSiteIntro, setShowSiteIntro] = useState(false)\n  const dispatch = useDispatch()\n  const setSlippage = useCallback((slippage) => dispatch({ type: 'SET_SLIPPAGE', slippage }), [])\n  const toggleShowSiteIntro = (show) => {\n    setShowSiteIntro(show)\n  }\n\n  const renderSiteIntro = () => {\n    if (showSiteIntro) {\n      const href = `${window.location.origin}${window.location.pathname}#/trade?asset=ONT&price=UNX`\n      return (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-wrapper\">\n            <div className=\"close-btn\" onClick={() => toggleShowSiteIntro(false)}></div>\n            <p className=\"intro-line\">uniq-ex is a pure github based DAO dex, all activities are logged on github.</p>\n            <p className=\"intro-line\">You can open issues for discussion <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/uniq-ex/uniq-ex/issues\">here</a></p>\n            <p className=\"intro-line\">uniq-ex's future business will not be limited to exchanges though, we may enter various DeFi markets like compound or hegic.</p>\n            <p className=\"intro-line\">You can buy UNX(the governance token of uniq-ex) <a target=\"_blank\" rel=\"noreferrer\" href={href}>here</a></p>\n          </div>\n        </div>\n      )\n    }\n    return null\n  }\n\n  const onSignOut = () => {\n    setShowProfilePanel(false)\n    typeof props.onSignOut === 'function' && props.onSignOut()\n  }\n\n  const onConnectWallet = () => {\n    typeof props.onConnectWallet === 'function' && props.onConnectWallet()\n  }\n\n  const toggleProfilePanel = () => {\n    setShowProfilePanel(!showProfilePanel)\n  }\n\n  return (\n    <div className=\"header-wrapper\">\n      {renderSiteIntro()}\n      <div className=\"header\">\n        <div className=\"content-wrapper\">\n          <div className=\"logo-wrapper\">\n            UNIQ-EX\n            <div className=\"site-intro\" onClick={() => toggleShowSiteIntro(true)}></div>\n          </div>\n          <div className=\"nav-list\">\n            { READY_TABS.indexOf('/') >= 0 ? <div className=\"nav-item\"><Link to=\"/\">Staking</Link></div> : null }\n            { READY_TABS.indexOf('/swap') >= 0 ? <div className=\"nav-item\"><Link to=\"/swap\">Swap</Link></div> : null }\n            { READY_TABS.indexOf('/trade') >= 0 ? <div className=\"nav-item\"><Link to=\"/trade\">Trade</Link></div> : null }\n            { READY_TABS.indexOf('/governance') >= 0 ? <div className=\"nav-item\"><Link to=\"/governance\">Governance</Link></div> : null }\n            { READY_TABS.indexOf('/token') >= 0 ? <div className=\"nav-item\"><Link to=\"/token\">Token</Link></div> : null }\n          </div>\n          <div className={`${account ? 'active' : ''} profile-wrapper`}>\n            { !account && <span className=\"connect-btn\" onClick={() => onConnectWallet()}>Connect Wallet</span>}\n            { account && <span className=\"account-address\" onClick={() => toggleProfilePanel()}>{formatAccount(account)}</span> }\n            {\n              showProfilePanel ? (\n                <div className=\"profile-panel\">\n                  <div className=\"setting-wrapper\">\n                    <div className=\"setting-section-title\">SLIPPAGE</div>\n                    <div className=\"slippage-setting\">\n                      <div className={`slippage-item ${Number(slippage) === 0.1 ? 'selected' : ''}`} onClick={() => setSlippage('0.1')}>0.1%</div>\n                      <div className={`slippage-item ${Number(slippage) === 0.5 ? 'selected' : ''}`} onClick={() => setSlippage('0.5')}>0.5%</div>\n                      <div className={`slippage-item ${Number(slippage) === 1 ? 'selected' : ''}`} onClick={() => setSlippage('1.0')}>1.0%</div>\n                      <div className=\"slippage-input-wrapper\">\n                        <Input value={slippage} cls=\"slippage-input\" decimals=\"2\" placeholder={slippage} onChange={(amount) => setSlippage(amount)} />%\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"signout-btn\" onClick={() => onSignOut()}>Sign Out</div>\n                </div>\n              ) : null\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Header","import React, { useCallback } from 'react'\nimport { useMappedState, useDispatch } from 'redux-react-hook'\nimport './index.css'\n\nconst InfoModal = (props) => {\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-wrapper\">\n        <div className=\"close-btn\" onClick={() => props.onCloseModal()}></div>\n        <div className={`modal-icon-${props.type} modal-icon`}></div>\n        <div className={`modal-text-${props.type} modal-text`}>{props.text}</div>\n        <div className=\"modal-extra-text\">\n        {\n          props.extraLink ? (\n            <a className=\"transaction-link\" target=\"_blank\" rel=\"noreferrer\" href={props.extraLink}>{props.extraText}</a>\n          ) : props.extraText\n        }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Modal = (props) => {\n  const { infoModal } = useMappedState((state) => ({\n    infoModal: state.modal.infoModal\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n\n  const onCloseInfoModal = () => {\n    setModal('infoModal', Object.assign({}, infoModal, { show: false }))\n  }\n\n  const buildModals = () => {\n    const modals = []\n    if (infoModal.show) {\n      modals.push(<InfoModal {...infoModal} onCloseModal={() => onCloseInfoModal()} />)\n    }\n    return modals\n  }\n\n  return (\n    <div className=\"modal-container\">\n      {buildModals()}\n    </div>\n  )\n}\n\nexport default Modal","import axios from 'axios'\nimport { API_BASE_URL } from '../config'\n\nconst instance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: { 'Content-Type': 'application/json' }\n})\n\ninstance.interceptors.response.use(\n  (response) => {\n    const res = response.data;\n    return res;\n  },\n  (error) => {\n    return Promise.reject(error);\n  },\n);\n\nexport default instance","import { client } from '@ont-dev/ontology-dapi'\nimport { utils } from 'ontology-ts-sdk'\nimport request from './request'\n\nconst { reverseHex } = utils\n\nexport const getTokenBalance = (account, token, cb) => {\n  \n  if (token.name !== 'ONT' && token.name !== 'ONG') {\n    const param = {\n      scriptHash: token.address,\n      operation: 'balanceOf',\n      args: [\n        {\n          type: 'Address',\n          value: account,\n        },\n      ],\n    }\n    let invokeMethod = client.api.smartContract.invokeRead\n\n    if (token.ty === 3 || token.ty === 4) {\n      invokeMethod = client.api.smartContract.invokeWasmRead\n    }\n    invokeMethod(param).then((bl) => {\n      if (bl) {\n        cb(parseInt(reverseHex(bl), 16) / (10 ** token.decimals))\n      }\n    })\n  } else {\n    request({\n      method: 'get',\n      url: `/v2/addresses/${account}/native/balances`\n    }).then((resp) => {\n      if (resp.code === 0) {\n        const targetToken = resp.result.find((t) => t.asset_name === token.name.toLowerCase())\n        cb(targetToken.balance)\n      }\n    })\n    .catch((e) => {\n      console.log(e)\n    })\n  }\n}\n\nexport const getTokenIconDom = (token, cls = '') => {\n  if (token.id) {\n    return (\n      <div className={`token-icon-wrapper ${cls}`}>\n        {\n          token.ty === 4\n            ? token.name.split('-').slice(1).map((tokenName) => (<div className={`token-icon-item with-drop-shadow icon-${tokenName}`} />))\n            : (<div className={`token-icon-item icon-${token.name}`} />)\n        }\n      </div>\n    )\n  }\n  return null\n}","export const handleError = (e, callback = () => {}) => {\n  try {\n    const json = JSON.parse(e)\n    if (json.Result === 'wasm contract does not exist') {\n      callback('CONTRACT_ADDRESS_ERROR')\n    }\n  } catch(error) {\n    // TODO\n  }\n}","export const PRICE_DECIMALS = 10 ** 6","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { utils } from 'ontology-ts-sdk'\nimport BigNumber from 'bignumber.js'\nimport { useAlert } from 'react-alert'\nimport { useMappedState, useDispatch } from 'redux-react-hook';\nimport { getTokenBalance } from '../../utils/token'\nimport Input from '../../components/input'\nimport { handleError } from '../../utils/errorHandle'\nimport { getHashString } from '../../utils/common'\nimport { PRICE_DECIMALS } from '../../utils/constants'\nimport { CONTRACT_ADDRESS, TRANSACTION_BASE_URL, TRANSACTION_AFTERFIX } from '../../config'\nimport './index.css'\n\nconst { StringReader } = utils\n\nconst Transaction = () => {\n  const [pairNameKeyword, setPairNameKeyword] = useState('')\n  const [pairs, setPairs] = useState([])\n  const [tokenPair, setTokenPair] = useState({})\n  const [showPairSelectModal, setShowPairSelectModal] = useState(false)\n  const [tradeType, setTradeType] = useState('buy')\n  const [tokenBalance, setTokenBalance] = useState('-')\n  const [makes, setMakes] = useState([])\n  const [myMakes, setMyMakes] = useState([])\n  const [makeView, setMakeView] = useState('all')\n  const [price, setPrice] = useState('')\n  const [amount, setAmount] = useState('')\n  const [total, setTotal] = useState('')\n  const [pool, setPool] = useState([])\n  const [lastPrice, setLastPrice] = useState(0)\n  const [feeRate, setFeeRate] = useState(0)\n  const [isValid, setIsValid] = useState(false)\n  const { account, stopInterval, tokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    stopInterval: state.common.stopInterval,\n    tokens: state.common.tokens\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n  const setStopInterval = useCallback((stopInterval) => dispatch({ type: 'SET_STOP_INTERVAL', stopInterval }), [])\n\n  const Alert = useAlert()\n\n  const urlPairName = getHashString(window.location.hash, 'pair')\n\n  useEffect(() => {\n    if (pairs.length) {\n      setTokenPair(pairs.find((p) => p.name === `${urlPairName}`) || pairs[0])\n    }\n  }, [pairs])\n\n  useEffect(() => {\n    if (account && tokenPair.name) {\n      setTokenBalance('-')\n      getTokenBalance(account, tradeType === 'buy' ? tokenPair.tokens[1] : tokenPair.tokens[0], (bl) => {\n        setTokenBalance(bl)\n      })\n    }\n  }, [account, tokenPair, tradeType])\n\n  useEffect(() => {\n    function getMakesOfPair() {\n      if (tokenPair.name) {\n        try {\n          client.api.smartContract.invokeWasmRead({\n            scriptHash: CONTRACT_ADDRESS,\n            operation: 'get_makes_of_pair',\n            args: [\n              {\n                type: 'Long',\n                value: tokenPair.tokens[0].id\n              },\n              {\n                type: 'Long',\n                value: tokenPair.tokens[1].id\n              }\n            ]\n          })\n          .then((makeStr) => {\n            const parsedMakes = []\n            const strReader = new StringReader(makeStr)\n            const pairLastPrice = strReader.readUint128()\n    \n            for (let j = 0; j <= 1; j++) {\n              const makeCount = strReader.readNextLen()\n              for (let i = 0; i < makeCount; i++) {\n                const make = {}\n                make.make_id = strReader.readUint128()\n                make.price = strReader.readUint128()\n                make.amount = new BigNumber(strReader.readUint128()).toString()\n                make.asset_token_id = (j === 0 ? tokenPair.tokens[0].id : tokenPair.tokens[1].id)\n                make.price_token_id = (j === 0 ? tokenPair.tokens[1].id : tokenPair.tokens[0].id)\n        \n                parsedMakes.push(make)\n              }\n            }\n    \n            setLastPrice(pairLastPrice ? pairLastPrice / PRICE_DECIMALS : 0)\n            setMakes(parsedMakes)\n          })\n          .catch((e) => {\n            handleError(e, (errorCode) => {\n              if (errorCode === 'CONTRACT_ADDRESS_ERROR') {\n                setStopInterval(true)\n              } else {\n                console.log('get makes of pair', e)\n              }\n            })\n          })\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    }\n    getMakesOfPair()\n    const interval = !stopInterval && setInterval(getMakesOfPair, 2000)\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [tokenPair, account, stopInterval])\n\n  useEffect(() => {\n    function getUserMakes() {\n      if (account) {\n        try {\n          client.api.smartContract.invokeWasmRead({\n            scriptHash: CONTRACT_ADDRESS,\n            operation: 'get_user_makes',\n            args: [\n              {\n                type: 'Address',\n                value: account\n              }\n            ]\n          })\n          .then((makeStr) => {\n            const parsedMakes = []\n            const strReader = new StringReader(makeStr)\n            const makeCount = strReader.readNextLen()\n            for (let i = 0; i < makeCount; i++) {\n              const make = {}\n              make.address = client.api.utils.hexToAddress(strReader.read(20))\n              make.asset_token_id = strReader.readUint128()\n              make.price_token_id = strReader.readUint128()\n              make.price = strReader.readUint128()\n              make.amount = strReader.readUint128()\n              make.make_id = strReader.readUint128()\n    \n              parsedMakes.push(make)\n            }\n    \n            setMyMakes(parsedMakes)\n          })\n          .catch((e) => {\n            handleError(e, (errorCode) => {\n              if (errorCode === 'CONTRACT_ADDRESS_ERROR') {\n                setStopInterval(true)\n              } else {\n                console.log('get user makes', e)\n              }\n            })\n          })\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    }\n\n    getUserMakes()\n    const interval = !stopInterval && setInterval(getUserMakes, 5000)\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [tokenPair, account, stopInterval])\n\n  useEffect(() => {\n    async function getStat() {\n      if (tokens.length) {\n        try {\n          const statStr = await client.api.smartContract.invokeWasmRead({\n            scriptHash: CONTRACT_ADDRESS,\n            operation: 'stat',\n            args: []\n          })\n          \n          const tokenPool = []\n          const strReader = new StringReader(statStr)\n          setFeeRate(strReader.readUint128())\n          const tokenCount = strReader.readNextLen()\n  \n          for (let i = 0; i < tokenCount; i++) {\n            const token = {}\n            token.id = strReader.readUint128()\n            const tempToken = tokens.find((t) => t.id === token.id)\n            token.balance = new BigNumber(strReader.readUint128()).div(new BigNumber(10 ** tempToken.decimals)).toString()\n  \n            tokenPool.push(Object.assign(tempToken, token))\n          }\n\n          if (!pairs.length) {\n            const tokenPairs = []\n            for (let i = 0; i < tokenPool.length; i++) {\n              for (let j = i + 1; j < tokenPool.length; j++) {\n                tokenPairs.push({\n                  name: `${tokenPool[i].name}/${tokenPool[j].name}`,\n                  tokens: [tokenPool[i], tokenPool[j]]\n                })\n              }\n            }\n\n            setPairs(tokenPairs)\n          }\n\n          setPool(tokenPool)\n        } catch (e) {\n          handleError(e, (errorCode) => {\n            if (errorCode === 'CONTRACT_ADDRESS_ERROR') {\n              setStopInterval(true)\n            } else {\n              console.log('get stat', e)\n            }\n          })\n        }\n      }\n    }\n\n    getStat()\n    const interval = setInterval(() => {\n      if (stopInterval) {\n        clearInterval(interval)\n      } else {\n        getStat()\n      }\n    }, 5000)\n    return () => clearInterval(interval)\n  }, [tokens, pairs, stopInterval])\n\n  useEffect(() => {\n    if (price > 0 && amount > 0) {\n      setTotal(price * amount)\n    }\n  }, [price, amount])\n\n  useEffect(() => {\n    if (price > 0) {\n      setAmount((total || 0) / price)\n    }\n  }, [total])\n\n  useEffect(() => {\n    if (tokenPair.name && price > 0 && amount > 0) {\n      setIsValid(true)\n    } else {\n      setIsValid(false)\n    }\n  }, [tokenPair, amount, price])\n\n  useEffect(() => {\n    setMakeView('all')\n  }, [account])\n\n  function onChangeToUserMakeView() {\n    if (account) {\n      setMakeView('my')\n    } else {\n      Alert.show('Please Connect Wallet First')\n    }\n  }\n\n  function getMakes(type) {\n    if (tokenPair.name) {\n      const curMakes = (makeView === 'my' ? myMakes : makes)\n      if (type === 'sell') {\n        return curMakes.filter((m) => m.asset_token_id === tokenPair.tokens[0].id && m.price_token_id === tokenPair.tokens[1].id).map((m) => {\n          return (\n            <div key={m.make_id} className=\"my-make-item reverse\">\n              <div className=\"make-item-detail make-sell\">{m.price / PRICE_DECIMALS}</div>\n              <div className=\"make-item-detail\">{new BigNumber(m.amount).div(Math.pow(10, tokenPair.tokens[0].decimals)).toString()}</div>\n              { makeView === 'my' && <div className=\"unmake-btn\" onClick={() => onUnmake(m.make_id)}>Cancel</div> }\n            </div>)\n        })\n      } else {\n        return curMakes.filter((m) => m.asset_token_id === tokenPair.tokens[1].id && m.price_token_id === tokenPair.tokens[0].id).map((m) => {\n          return (\n            <div key={m.make_id} className=\"my-make-item\">\n              <div className=\"make-item-detail make-buy\">{PRICE_DECIMALS / m.price}</div>\n              <div className=\"make-item-detail\">{new BigNumber(m.amount).times(m.price).div(PRICE_DECIMALS).div(Math.pow(10, tokenPair.tokens[1].decimals)).toString()}</div>\n              { makeView === 'my' && <div className=\"unmake-btn\" onClick={() => onUnmake(m.make_id)}>Cancel</div> }\n            </div>)\n        })\n      }\n    }\n    return null\n  }\n\n\n\n  async function onMake() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    if (tokenPair.name) {\n      if (price <= 0) {\n        Alert.error('Price should be greater than 0')\n        return\n      }\n      if (amount <= 0) {\n        Alert.error('Amount should be greater than 0')\n        return\n      }\n      try {\n        const assetToken = tradeType === 'buy' ? tokenPair.tokens[1] : tokenPair.tokens[0]\n        const priceToken = tradeType === 'buy' ? tokenPair.tokens[0] : tokenPair.tokens[1]\n        const tradePrice = tradeType === 'buy' ? 1 / price : price\n        const tradeAmount = tradeType === 'buy' ? total : amount\n        const args = [\n          {\n            type: 'Address',\n            value: account\n          },\n          {\n            type: 'Long',\n            value: assetToken.id\n          },\n          {\n            type: 'Long',\n            value: priceToken.id\n          },\n          {\n            type: 'Long',\n            value: new BigNumber(tradePrice).times(PRICE_DECIMALS).integerValue(BigNumber.ROUND_DOWN).toString()\n          },\n          {\n            type: 'Long',\n            value: new BigNumber(tradeAmount).times(new BigNumber(10 ** assetToken.decimals)).integerValue(BigNumber.ROUND_DOWN).toString()\n          }\n        ]\n        const makeResult = await client.api.smartContract.invokeWasm({\n          scriptHash: CONTRACT_ADDRESS,\n          operation: 'make',\n          args,\n          gasPrice: 2500,\n          gasLimit: 30000000,\n          requireIdentity: false\n        })\n\n        if (makeResult.transaction) {\n          setAmount('')\n          setPrice('')\n          setTotal('')\n          setModal('infoModal', {\n            show: true,\n            type: 'success',\n            text: 'Transaction Successful',\n            extraText: 'View Transaction',\n            extraLink: `${TRANSACTION_BASE_URL}${makeResult.transaction}${TRANSACTION_AFTERFIX}`\n          })\n        }\n      } catch (e) {\n        setModal('infoModal', {\n          show: true,\n          type: 'error',\n          text: 'Transaction Failed',\n          // extraText: `${e}`,\n          extraText: '',\n          extraLink: ''\n        })\n      }\n    }\n  }\n\n  async function onUnmake(makeId) {\n    if (account && makeId) {\n      try {\n        const unmakeResult = await client.api.smartContract.invokeWasm({\n          scriptHash: CONTRACT_ADDRESS,\n          operation: 'unmake',\n          args: [\n            {\n              type: 'Address',\n              value: account\n            },\n            {\n              type: 'Long',\n              value: makeId\n            }\n          ],\n          gasPrice: 2500,\n          gasLimit: 30000000,\n          requireIdentity: false\n        })\n        if (unmakeResult.transaction) {\n          setModal('infoModal', {\n            show: true,\n            type: 'success',\n            text: 'Transaction Successful',\n            extraText: 'View Transaction',\n            extraLink: `${TRANSACTION_BASE_URL}${unmakeResult.transaction}${TRANSACTION_AFTERFIX}`\n          })\n        }\n      } catch (e) {\n        setModal('infoModal', {\n          show: true,\n          type: 'error',\n          text: 'Transaction Failed',\n          // extraText: `${e}`,\n          extraText: '',\n          extraLink: ''\n        })\n      }\n    }\n  }\n\n  function getPriceHint() {\n    if (tokenPair.name) {\n      return tokenPair.tokens[1].name\n    }\n  }\n\n  function getAmountHint() {\n    if (tokenPair.name) {\n      return tokenPair.tokens[0].name\n    }\n  }\n\n  function generateTokenPool() {\n    if (pool.length) {\n      return pool.filter((tp) => Number(tp.balance) !== 0).map((tp) => {\n        return (\n          <div className=\"pool-item\" key={tp.name}>\n            <div className={`icon-${tp.name} token-name`}>{tp.name}</div>\n            <div className=\"token-balance\">{tp.balance}</div>\n          </div>\n        )\n      })\n    }\n  }\n\n  const handlePairClick = (pair) => {\n    setTokenPair(pair)\n    setShowPairSelectModal(false)\n  }\n\n  return (\n    <div className=\"swap-wrapper\">\n      <div className=\"trade-container\">\n        <div className=\"make-wrapper\">\n          <div className=\"container-header\">Trade\n            {\n              tokenPair.name ? (\n                <div className=\"token-pair-select\" onClick={() => setShowPairSelectModal(true)}>\n                  <div className=\"token-pair-name\">{tokenPair.name}</div>\n                </div>\n              ) : null\n            }\n          </div>\n          <div className=\"trade-type-switch\">\n            <div className={`trade-type-item ${tradeType === 'buy' ? 'trade-buy' : ''}`} onClick={() => setTradeType('buy')}>Buy</div>\n            <div className={`trade-type-item ${tradeType === 'sell' ? 'trade-sell' : ''}`} onClick={() => setTradeType('sell')}>Sell</div>\n          </div>\n          <div className=\"form-item\">\n            <div className=\"item-title\">Price\n              <span className=\"hint\">{getPriceHint()}</span>\n            </div>\n            <div className=\"input-wrapper\">\n              <Input placeholder=\"0.0\" value={price} decimals=\"9\" onChange={(amount) => setPrice(amount)} />\n            </div>\n          </div>\n          <div className=\"form-item\">\n            <div className=\"item-title\">Amount\n              <span className=\"hint\">{getAmountHint()}</span>\n            </div>\n            <div className=\"input-wrapper\">\n              <Input placeholder=\"0.0\" value={amount} decimals={tokenPair.tokens ? tokenPair.tokens[0].decimals : '9'} onChange={(amount) => setAmount(amount)} />\n            </div>\n          </div>\n          <div className=\"form-item\">\n            <div className=\"item-title\">Total {tradeType === 'buy' ? 'Need' : 'Receive'}\n              <span className=\"hint\">{getPriceHint()}</span>\n            </div>\n            <div className=\"input-wrapper\">\n              <Input placeholder=\"0.0\" value={total} decimals=\"9\" onChange={(amount) => setTotal(amount)} />\n            </div>\n          </div>\n          { tokenPair.name ? <div className=\"balance-line\">Balance: <span>{tokenBalance} {tradeType === 'buy' ? tokenPair.tokens[1].name : tokenPair.tokens[0].name}</span></div> : null }\n          { feeRate ? <p className=\"fee-rate\">* The fee rate of transaction is {feeRate / 100}%</p> : null }\n          { isValid ? <div className={`make-btn make-btn-${tradeType}`} onClick={() => onMake()}>{tradeType.toUpperCase()} {tokenPair.tokens[0].name}</div> : <div className=\"make-btn disabled\">{tradeType.toUpperCase()} {tokenPair.tokens ? tokenPair.tokens[0].name : ''}</div> }\n        </div>\n        <div className=\"trade-panel\">\n          <div className=\"panel-header\">\n            <div className=\"panel-title\">Order Book</div>\n            <div className=\"tabs\">\n              <div className={makeView === 'all' ? \"tab-wrapper selected\" : \"tab-wrapper\"} onClick={() => setMakeView('all')}>All</div>\n              <div className={makeView === 'my' ? \"tab-wrapper selected\" : \"tab-wrapper\"} onClick={() => onChangeToUserMakeView()}>My</div>\n            </div>\n          </div>\n          <div className=\"list-title\">\n            <div className=\"blank-placeholder\"></div>\n            <div className=\"title-items\">\n              <div className=\"item-text\">Price ({getPriceHint()})</div>\n              <div className=\"item-text\">Amount ({getAmountHint()})</div>\n              { makeView === 'my' && <div className=\"item-placeholder\"></div> }\n            </div>\n          </div>\n          <div className=\"sell-section\">\n            <div className=\"section-title\">Sell</div>\n            <div className=\"make-list reverse\">\n            {getMakes('sell')}\n            </div>\n          </div>\n          {\n            (makeView === 'all' && Number(lastPrice) !== 0) ? <div className=\"last-price-wrapper\">\n              <div className=\"last-price-label\">Last Price</div>\n              <div className=\"last-price\">{lastPrice}</div>\n              <div className=\"last-price-placeholder\"></div>\n            </div> : null\n          }\n          <div className=\"buy-section\">\n            <div className=\"section-title\">Buy</div>\n            <div className=\"make-list\">\n            {getMakes('buy')}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"token-pool\">\n        <div className=\"container-header\">Token Balance</div>\n        <div className=\"pool-items\">\n        {generateTokenPool()}\n        </div>\n      </div>\n      {\n        showPairSelectModal ? (\n          <div className=\"modal-overlay\">\n            <div className=\"modal-wrapper\">\n              <div className=\"close-btn\" onClick={() => setShowPairSelectModal(false)}></div>\n              <div className=\"pair-select-modal-wrapper\">\n                <div className=\"pair-select-modal-title\">Select</div>\n                <input type=\"text\" className=\"pair-select-modal-input\" value={pairNameKeyword} onInput={(e) => setPairNameKeyword(e.target.value)} />\n                <div className=\"pair-select-modal-list\">\n                  {\n                    pairs.filter((p) => {\n                      return p.name.indexOf(pairNameKeyword.toUpperCase()) >= 0\n                    }).map((p) => {\n                      return (\n                        <div className=\"pair-select-modal-list-item\" onClick={() => handlePairClick(p)}>\n                          {\n                            p.tokens.map((t) => <div className={`pair-select-modal-list-item-icon icon-${t.name}`}></div>)\n                          }\n                          <div className=\"pair-select-modal-list-item-name\">{p.name}</div>\n                        </div>\n                      )\n                    })\n                  }\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : null\n      }\n    </div>\n  )\n}\n\nexport default Transaction","import React, { useState, useEffect } from 'react'\nimport { useMappedState } from 'redux-react-hook';\nimport Select, { components } from 'react-select'\nimport Input from '../input'\nimport { getTokenBalance } from '../../utils/token'\n\nimport './index.css'\n\nconst TokenInput = (props) => {\n  const { value, round, tokens, defaultTokenId, inputDisabled = false, showBalance = true, withMax = true, onTokenChange, onAmountChange, balanceChange = 0 } = props\n  const [token, setToken] = useState({})\n  const [balance, setBalance] = useState('-')\n  const { account } = useMappedState((state) => ({\n    account: state.wallet.account\n  }))\n\n  useEffect(() => {\n    if (account && showBalance && token.id) {\n      getTokenBalance(account, token, setBalance)\n    }\n  }, [token, showBalance, account, balanceChange])\n\n  const handleTokenChange = (e) => {\n    if (e.value !== token.id) {\n      const newToken = tokens.filter((t) => t.id === e.value)[0]\n\n      setToken(newToken)\n      typeof onTokenChange === 'function' && onTokenChange(newToken)\n    }\n  }\n\n  const renderTokenSeletion = (defaultId) => {\n    if (tokens.length) {\n      const CustomOption = (props) => (\n        <components.Option {...props}>\n          <div className=\"option-wrapper\">\n            <div className={`icon-${props.label} option-icon`}></div>\n            <div className=\"option-label\">{props.label}</div>\n          </div>\n        </components.Option>\n      )\n      const SingleValue = ({ children, ...props }) => (\n        <components.SingleValue {...props}>\n          <div className=\"option-wrapper\">\n            <div className={`icon-${children} option-icon`}></div>\n            <div className=\"option-label\">{children}</div>\n          </div>\n        </components.SingleValue>\n      )\n      let defaultToken = defaultId ? (tokens.find((t) => t.id === defaultId) || tokens[0]) : tokens[0]\n\n      if (!token.id) {\n        setToken(defaultToken)\n      }\n\n      return (\n        <Select\n          className=\"token-select\"\n          defaultValue={defaultToken}\n          options={tokens}\n          isSearchable={false}\n          components={{ Option: CustomOption, SingleValue }}\n          onChange={(e) => handleTokenChange(e)}\n          theme={theme => ({\n            ...theme,\n            borderRadius: 0,\n            colors: {\n              ...theme.colors,\n              primary: '#2c2c2c',\n            },\n          })}\n        />\n      )\n    }\n  }\n\n  const maxInput = () => {\n    if (!isNaN(balance) && typeof onAmountChange === 'function') {\n      onAmountChange(balance)\n    }\n  }\n\n  return (\n    <div className=\"token-input-wrapper\">\n      <div className=\"input-label\">{props.label || 'Input'}\n        { showBalance ? <span className=\"hint\">Balance: {balance}</span> : null }\n      </div>\n      <div className=\"input-wrapper\">\n        { renderTokenSeletion(defaultTokenId) }\n        <Input decimals={token.decimals} disabled={inputDisabled} value={value} round={round} onChange={(value) => onAmountChange(value)} />\n        { withMax && <div className=\"input-max-btn\" onClick={() => maxInput()}>MAX</div> }\n      </div>\n    </div>\n  )\n}\n\nexport default TokenInput\n","import { useEffect, useCallback } from 'react'\nimport { client } from '@ont-dev/ontology-dapi'\nimport { utils } from 'ontology-ts-sdk'\nimport { SWAP_ADDRESS } from '../config'\nimport { handleError } from '../utils/errorHandle'\nimport { useMappedState, useDispatch } from 'redux-react-hook'\n\nconst { StringReader, reverseHex } = utils\n\nexport const useFetchPairs = () => {\n  const { account, tokens, swapTokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    tokens: state.common.tokens,\n    swapTokens: state.swap.tokens\n  }))\n  const dispatch = useDispatch()\n  const setSwapTokens = useCallback((tokens) => dispatch({ type: 'SET_SWAP_TOKENS', tokens }), [])\n  const setPairs = useCallback((pairs) => dispatch({ type: 'SET_PAIRS', pairs }), [])\n\n  useEffect(() => {\n    getSwapStat()\n    let interval = setInterval(getSwapStat, 3000)\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [account, tokens, swapTokens])\n\n  function getSwapStat() {\n    try {\n      client.api.smartContract.invokeWasmRead({\n        scriptHash: SWAP_ADDRESS,\n        operation: 'stat',\n        args: []\n      })\n      .then((pairStr) => {\n        const parsedPairs = []\n        const strReader = new StringReader(pairStr)\n        const pairCount = strReader.readNextLen()\n        for (let i = 0; i < pairCount; i++) {\n          const pair = {}\n          pair.address = reverseHex(strReader.read(20))\n          pair.token1 = strReader.readUint128()\n          pair.token2 = strReader.readUint128()\n          pair.id = strReader.readUint128()\n          pair.reserve1 = strReader.readUint128()\n          pair.reserve2 = strReader.readUint128()\n          pair.lp = strReader.readUint128()\n\n          parsedPairs.push(pair)\n        }\n\n        const tokenIds = []\n        const tokenCount = strReader.readNextLen()\n        for (let i = 0; i < tokenCount; i++) {\n          tokenIds.push(strReader.readUint128())\n        }\n\n        setPairs(parsedPairs)\n        if (tokens.length && !swapTokens.length) {\n          setSwapTokens(tokenIds.map((t) => tokens.find((tk) => tk.id === t)))\n        }\n      })\n      .catch((e) => {\n        console.log(e)\n      })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  return null\n}","const REST = 0.997\n\nexport const findAllPaths = (pairs, sourceId, targetId) => {\n  let pathArr = []\n  const findPath = (sourceId, targetId, pathNodes = []) => {\n    pathNodes = [...pathNodes]\n    pathNodes.push(sourceId)\n\n    if (sourceId === targetId) {\n      pathArr.push(pathNodes)\n      return\n    }\n\n    let neighborNodes = []\n    pairs.map((p) => {\n      if (p.token1 === sourceId) {\n        neighborNodes.push(p.token2)\n      } else if (p.token2 === sourceId) {\n        neighborNodes.push(p.token1)\n      }\n    })\n\n    for (let id of neighborNodes) {\n      if (!pathNodes.includes(id)) {\n        findPath(id, targetId, pathNodes)\n      }\n    }\n  }\n\n  findPath(sourceId, targetId)\n\n  pathArr.sort((p1, p2) => {\n    return p1.length - p2.length\n  })\n  \n  return pathArr\n}\n\nconst getInputAmount = (output, pair, reverse = false) => {\n  let amount\n  if (reverse) {\n    amount = (pair.reserve1 * pair.reserve2 / (pair.reserve1 - output) - pair.reserve2) / REST\n  } else {\n    amount = (pair.reserve1 * pair.reserve2 / (pair.reserve2 - output) - pair.reserve1) / REST\n  }\n  return Math.ceil(amount)\n}\n\nconst getOutputAmount = (input, pair, reverse = false) => {\n  let amount\n  if (reverse) {\n    amount = pair.reserve1 - pair.reserve1 * pair.reserve2 / (pair.reserve2 + REST * input)\n  } else {\n    amount = pair.reserve2 - pair.reserve1 * pair.reserve2 / (pair.reserve1 + REST * input)\n  }\n  return Math.floor(amount)\n}\n\nconst findNextOutput = (input, pairs, token1, token2) => {\n  let pair = pairs.find((p) => p.token1 === token1 && p.token2 === token2)\n\n  if (pair) {\n    return getOutputAmount(input, pair)\n  }\n\n  pair = pairs.find((p) => p.token1 === token2 && p.token2 === token1)\n\n  if (pair) {\n    return getOutputAmount(input, pair, true)\n  }\n}\n\nconst findPrevInput = (output, pairs, token1, token2) => {\n  let pair = pairs.find((p) => p.token1 === token1 && p.token2 === token2)\n\n  if (pair) {\n    return getInputAmount(output, pair)\n  }\n\n  pair = pairs.find((p) => p.token1 === token2 && p.token2 === token1)\n\n  if (pair) {\n    return getInputAmount(output, pair, true)\n  }\n}\n\nexport const bestSwap = (type = 'exactin', amount, pairs, token1, token2) => {\n  const paths = findAllPaths(pairs, token1, token2)\n  const originAmount = amount\n  let maxOutput = 0\n  let minInput = Infinity\n  let path = []\n  \n  for (let i = 0; i < paths.length; i++) {\n    amount = originAmount\n    if (type === 'exactin') {\n      for (let j = 0; j < paths[i].length - 1; j++) {\n        amount = findNextOutput(amount, pairs, paths[i][j], paths[i][j + 1])\n      }\n  \n      if (amount > maxOutput) {\n        maxOutput = amount\n        path = paths[i]\n      }\n    } else {\n      for (let j = paths[i].length - 1; j > 0; j--) {\n        amount = findPrevInput(amount, pairs, paths[i][j - 1], paths[i][j])\n      }\n  \n      if (amount < minInput && amount > 0) {\n        minInput = amount\n        path = paths[i]\n      }\n    }\n  }\n\n  if (type === 'exactin') {\n    return [maxOutput, path]\n  } else if (type === 'exactout') {\n    return [minInput, path]\n  }\n}\n","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { useMappedState, useDispatch } from 'redux-react-hook'\nimport { useAlert } from 'react-alert'\nimport BigNumber from 'bignumber.js'\nimport TokenInput from '../../components/tokenInput'\nimport { SWAP_ADDRESS, TRANSACTION_BASE_URL, TRANSACTION_AFTERFIX } from '../../config'\nimport { useFetchPairs } from '../../hooks/usePair'\nimport { toLocaleFixed } from '../../utils/common'\nimport { bestSwap } from '../../utils/swap'\nimport './index.css'\n\nconst Swap = () => {\n  const [swapType, setSwapType] = useState('exactin')\n  const [token1, setToken1] = useState({})\n  const [token2, setToken2] = useState({})\n  const [token1Amount, setToken1Amount] = useState('')\n  const [token2Amount, setToken2Amount] = useState('')\n  const [isValidPair, setIsValidPair] = useState(false)\n  const [isValidSwap, setIsValidSwap] = useState(false)\n  const [bestPath, setBestPath] = useState([])\n  const [showPrice, setShowPrice] = useState(false)\n  const [balanceChange, setBalanceChange] = useState(0)\n  const { account, slippage, pairs, swapTokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    slippage: state.wallet.slippage,\n    pairs: state.swap.pairs,\n    swapTokens: state.swap.tokens\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n  const Alert = useAlert()\n  const history = useHistory()\n\n  useFetchPairs()\n\n  useEffect(() => {\n    if (token1.id !== token2.id && token1Amount > 0 && token2Amount > 0 && bestPath.length) {\n      setShowPrice(true)\n      setIsValidSwap(true)\n    } else {\n      setShowPrice(false)\n      setIsValidSwap(false)\n    }\n  }, [token1, token2, token1Amount, token2Amount, bestPath])\n\n  useEffect(() => {\n    if (swapTokens.length) {\n      setToken1(swapTokens[0])\n      setToken2(swapTokens[1])\n    }\n  }, [swapTokens])\n\n  useEffect(() => {\n    if (token1.id && token2.id && validPair(token1.id, token2.id)) {\n      setIsValidPair(true)\n    } else {\n      setIsValidPair(false)\n    }\n  }, [token1, token2])\n\n  function validPair(token1, token2) {\n    if (pairs.length) {\n      if (token1 && token2 && pairs.find((p) => (p.token1 === token1 && p.token2 === token2) || (p.token1 === token2 && p.token2 === token1))) {\n        return true\n      }\n    }\n    return false\n  }\n\n  function onChangeToken1(token) {\n    if (token.id !== token1.id) {\n      setToken1(token)\n      setToken1Amount('')\n      setToken2Amount('')\n    }\n  }\n\n  function onChangeToken2(token) {\n    if (token.id !== token2.id) {\n      setToken2(token)\n      setToken1Amount('')\n      setToken2Amount('')\n    }\n  }\n\n  function onToken1AmountChange(amount) {\n    if (amount !== token1Amount) {\n      setSwapType('exactin')\n      setToken1Amount(amount)\n      if (pairs.length && amount) {\n        const inputAmount = amount * (10 ** token1.decimals)\n        const [maxOutput, path] = bestSwap('exactin', inputAmount, pairs, token1.id, token2.id)\n\n        setToken2Amount(new BigNumber(maxOutput).div(10 ** token2.decimals).toString())\n        setBestPath(path)\n      } else if (Number(amount) === 0) {\n        setToken2Amount('')\n      }\n    }\n  }\n\n  function onToken2AmountChange(amount) {\n    if (amount !== token2Amount) {\n      setSwapType('exactout')\n      setToken2Amount(amount)\n      if (pairs.length && amount) {\n        const outputAmount = amount * (10 ** token2.decimals)\n        const [minInput, path] = bestSwap('exactout', outputAmount, pairs, token1.id, token2.id)\n\n        if (minInput === Infinity) {\n          setToken1Amount('')\n        } else {\n          setToken1Amount(new BigNumber(minInput).div(10 ** token1.decimals).toString())\n        }\n        setBestPath(path)\n      } else if (Number(amount) === 0) {\n        setToken1Amount('')\n      }\n    }\n  }\n\n  function onNavigateToPool() {\n    history.push('/pool')\n  }\n\n  async function handleSwap() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    if (token1Amount <= 0 || token2Amount <= 0) {\n      Alert.error('Amount should be greater than 0')\n      return\n    }\n    if (token1.id && token1.id === token2.id) {\n      Alert.error('Input should be different')\n      return\n    }\n\n    try {\n      const args = [\n        {\n          type: 'Address',\n          value: account\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token1Amount).times(new BigNumber(10 ** token1.decimals)).integerValue(BigNumber.ROUND_DOWN).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token2Amount).times(new BigNumber(10 ** token2.decimals)).integerValue(BigNumber.ROUND_DOWN).toString()\n        },\n        {\n          type: 'Array',\n          value: bestPath.map((p) => ({ type: 'Long', value: p }))\n        },\n        {\n          type: 'Address',\n          value: account\n        }\n      ]\n      const swapResult = await client.api.smartContract.invokeWasm({\n        scriptHash: SWAP_ADDRESS,\n        operation: swapType === 'exactin' ? 'swap_exact_tokens_for_tokens' : 'swap_tokens_for_exact_tokens',\n        args,\n        gasPrice: 2500,\n        gasLimit: 30000000,\n        requireIdentity: false\n      })\n\n      if (swapResult.transaction) {\n        setBalanceChange(balanceChange + 1)\n        setToken1Amount('')\n        setToken2Amount('')\n        setModal('infoModal', {\n          show: true,\n          type: 'success',\n          text: 'Transaction Successful',\n          extraText: 'View Transaction',\n          extraLink: `${TRANSACTION_BASE_URL}${swapResult.transaction}${TRANSACTION_AFTERFIX}`\n        })\n      }\n    } catch (e) {\n      setModal('infoModal', {\n        show: true,\n        type: 'error',\n        text: 'Transaction Failed',\n        // extraText: `${e}`,\n        extraText: '',\n        extraLink: ''\n      })\n    }\n  }\n\n  function getPrice() {\n    return `${toLocaleFixed(token2Amount / token1Amount, 6)} ${token2.name} per ${token1.name}`\n  }\n\n  function getMinReceiveOrMaxSold() {\n    if (swapType === 'exactin') {\n      return <p>Minimum Received:<span>{toLocaleFixed(token2Amount * (1 - slippage / 100), 6)} {token2.name}</span></p>\n    } else {\n      return <p>Maximum Sold:<span>{toLocaleFixed(token1Amount * (1 + slippage / 100), 6)} {token1.name}</span></p>\n    }\n  }\n\n  function getPriceImpact() {\n    let price\n    let pair = pairs.find((p) => p.token1 === token1.id && p.token2 === token2.id)\n\n    if (pair) {\n      price = (pair.reserve2 / (10 ** token2.decimals)) / (pair.reserve1 / (10 ** token1.decimals))\n    } else {\n      pair = pairs.find((p) => p.token1 === token2.id && p.token2 === token1.id)\n\n      if (pair) {\n        price = (pair.reserve1 / (10 ** token1.decimals)) / (pair.reserve2 / (10 ** token2.decimals))\n      }\n    }\n\n    return <p>Price Impact:<span>{Math.abs((token2Amount / token1Amount - price) / price * 100).toFixed(2)}%</span></p>\n  }\n\n  function getBestPath() {\n    if (bestPath.length) {\n      const items = []\n      bestPath.map((t, index) => {\n        const token = swapTokens.find((tk) => tk.id === t)\n        index > 0 && items.push((<div className=\"icon-arrow-right\"></div>))\n        items.push((<div className={`path-icon icon-${token.name}`}>{token.name}</div>))\n\n        return t\n      })\n\n      return items\n    }\n  }\n\n  return (\n    <div className=\"sw-wrapper\">\n      <div className=\"sw-container\">\n        <div className=\"sw-tabs\">\n          <div className=\"sw-tab active\">Swap</div>\n          <div className=\"sw-tab\" onClick={() => onNavigateToPool()}>Pool</div>\n        </div>\n        <div className=\"sw-content\">\n          <TokenInput\n            balanceChange={balanceChange}\n            label=\"From\"\n            tokens={swapTokens}\n            value={token1Amount}\n            round='up'\n            onTokenChange={(token) => onChangeToken1(token)}\n            onAmountChange={(amount) => onToken1AmountChange(amount)} />\n          <div className=\"icon-arrow-down\"></div>\n          <TokenInput\n            balanceChange={balanceChange}\n            label=\"To\"\n            tokens={swapTokens}\n            value={token2Amount}\n            round='down'\n            defaultTokenId={swapTokens.length && swapTokens[1].id}\n            onTokenChange={(token) => onChangeToken2(token)}\n            onAmountChange={(amount) => onToken2AmountChange(amount)} />\n          { showPrice ? <div className=\"sw-price-wrapper\">Price<span className=\"sw-price-info\">{getPrice()}</span></div> : null }\n          { isValidPair ? null : <div className=\"add-liquidity-hint\">Add liquidity to enable swaps for this pair.</div> }\n          { isValidPair ? ( isValidSwap ? <div className=\"sw-swap-btn\" onClick={() => handleSwap()}>Swap</div> : <div className=\"sw-swap-btn disabled\">Swap</div> ) : <div className=\"sw-swap-btn disabled\">Illiquidity</div> }\n        </div>\n        {\n          isValidPair && isValidSwap ? (\n            <div className=\"sw-hint-wrapper\">\n              <div className=\"sw-input-output\">{getMinReceiveOrMaxSold()}</div>\n              <div className=\"sw-price-impact\">{getPriceImpact()}</div>\n              <div className=\"sw-best-path\">\n                <p>Route:</p>\n                <div className=\"sw-best-path-list\">\n                  {getBestPath()}\n                </div>\n              </div>\n            </div>\n          ) : null\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Swap\n","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect } from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { useMappedState } from 'redux-react-hook';\nimport { utils } from 'ontology-ts-sdk'\nimport { useFetchPairs } from '../../hooks/usePair'\nimport { SWAP_ADDRESS } from '../../config'\nimport './index.css'\n\nconst { StringReader } = utils\n\nconst Pool = () => {\n  const [liquidityBalance, setLiquidityBalance] = useState([])\n  const { account, tokens, pairs } = useMappedState((state) => ({\n    account: state.wallet.account,\n    tokens: state.common.tokens,\n    pairs: state.swap.pairs\n  }))\n\n  const history = useHistory()\n\n  useFetchPairs()\n\n  useEffect(() => {\n    if (account && pairs.length) {\n      const getLiquidityBalanceByPairId = (id) => {\n        return client.api.smartContract.invokeWasmRead({\n          scriptHash: SWAP_ADDRESS,\n          operation: 'balanceOf',\n          args: [\n            {\n              type: 'Long',\n              value: id\n            },\n            {\n              type: 'Address',\n              value: account\n            }\n          ]\n        }).then((resp) => {\n          const strReader = new StringReader(resp)\n          const balance = strReader.readUint128()\n          \n          return { [id]: balance }\n        })\n      }\n      Promise.all(pairs.map((p) => getLiquidityBalanceByPairId(p.id))).then((resp) => {\n        setLiquidityBalance(resp)\n      })\n    }\n  }, [account, pairs])\n\n  function onNavigateToSwap() {\n    history.push('/swap')\n  }\n\n  function onNavigateToAddLiquidity() {\n    history.push('/pool/add')\n  }\n\n  function onRemoveLiquidity(pairId) {\n    history.push(`/pool/remove/${pairId}`)\n  }\n\n  function generateLiquidityList() {\n    if (liquidityBalance.length && pairs.length && tokens.length) {\n      return liquidityBalance.map((lb) => {\n        const pairId = Object.keys(lb)[0]\n        const pair = pairs.find((p) => `${p.id}` === pairId)\n        const token1 = tokens.find((t) => t.id === pair.token1)\n        const token2 = tokens.find((t) => t.id === pair.token2)\n        const balance = lb[pairId] / (10 ** 18)\n        const shareOfPool = Math.sqrt(Math.pow(balance, 2) / (pair.reserve1 * pair.reserve2 / (10 ** (token1.decimals + token2.decimals))))\n        const token1Amount = (pair.reserve1 * shareOfPool / (10 ** token1.decimals)).toFixed(token1.decimals)\n        const token2Amount = (pair.reserve2 * shareOfPool / (10 ** token2.decimals)).toFixed(token2.decimals)\n        \n        return (\n          <div className=\"pool-liquidity-item\">\n            <div className=\"liquidity-item-detail\">\n              <div className={`token-icon icon-${token1.name}`}></div>\n              <div className={`token-icon icon-${token2.name}`}></div>\n              <div className=\"token-pair\"><strong>{token1.name}/{token2.name}</strong></div>\n              <div className=\"pair-position\"><strong>Pooled</strong>: {token1Amount} / {token2Amount}</div>\n              <div className=\"pool-tokens\"><strong>Pool Tokens</strong>: {balance.toFixed(9)}</div>\n            </div>\n            <div className=\"remove-liquidity-btn\" onClick={() => onRemoveLiquidity(pairId)}>Remove</div>\n          </div>\n        )\n      })\n    } else {\n      return <div className=\"pool-empty-lp\">No Liquidities</div>\n    }\n  }\n\n  return (\n    <div className=\"pool-wrapper\">\n      <div className=\"pool-container\">\n        <div className=\"sw-tabs\">\n          <div className=\"sw-tab\" onClick={() => onNavigateToSwap()}>Swap</div>\n          <div className=\"sw-tab active\">Pool</div>\n        </div>\n        <div className=\"pool-content\">\n          <div className=\"pool-add-liquidity-btn\" onClick={() => onNavigateToAddLiquidity()}>Add Liquidity</div>\n          <div className=\"pool-liquidity-list\">\n            <div className=\"my-liquidity\">Your Liquidity</div>\n            {generateLiquidityList()}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Pool","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { useMappedState, useDispatch } from 'redux-react-hook';\nimport { useAlert } from 'react-alert'\nimport BigNumber from 'bignumber.js'\nimport TokenInput from '../../../components/tokenInput'\nimport { useFetchPairs } from '../../../hooks/usePair';\nimport { SWAP_ADDRESS, TRANSACTION_BASE_URL, TRANSACTION_AFTERFIX } from '../../../config'\nimport './index.css'\n\nconst AddLiquidity = () => {\n  const [token1, setToken1] = useState({})\n  const [token2, setToken2] = useState({})\n  const [token1Amount, setToken1Amount] = useState('')\n  const [token2Amount, setToken2Amount] = useState('')\n  const [isValidPair, setIsValidPair] = useState(true)\n  const [isFirstProvider, setIsFirstProvider] = useState(false)\n  const [showPriceInfo, setShowPriceInfo] = useState(false)\n  const [balanceChange, setBalanceChange] = useState(0)\n  const { account, slippage, pairs, swapTokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    slippage: state.wallet.slippage,\n    pairs: state.swap.pairs,\n    swapTokens: state.swap.tokens\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n  const Alert = useAlert()\n  const history = useHistory()\n\n  useFetchPairs()\n\n  useEffect(() => {\n    if (!token1.id || !token2.id || (token1.id === token2.id)) {\n      setIsValidPair(false)\n    } else {\n      setIsValidPair(true)\n    }\n  }, [token1, token2])\n\n  useEffect(() => {\n    if (token1.id && token2.id && token1.id != token2.id && (!pairs.length || !getPairByToken())) {\n      setIsFirstProvider(true)\n    } else {\n      setIsFirstProvider(false)\n    }\n  }, [pairs, token1, token2])\n\n  useEffect(() => {\n    if (token1.id && token2.id) {\n      setShowPriceInfo(true)\n    } else {\n      setShowPriceInfo(false)\n    }\n  }, [pairs, token1, token2, token1Amount, token2Amount])\n\n  useEffect(() => {\n    if (swapTokens.length) {\n      setToken1(swapTokens[0])\n      setToken2(swapTokens[1])\n    }\n  }, [account, swapTokens])\n\n  function getPairByToken() {\n    return pairs.find((p) => (p.token1 === token1.id && p.token2 === token2.id) || (p.token1 === token2.id && p.token2 === token1.id))\n  }\n\n  function onChangeToken1(token) {\n    if (token.id !== token1.id) {\n      setToken1(token)\n      setToken1Amount('')\n      setToken2Amount('')\n    }\n  }\n\n  function onChangeToken2(token) {\n    if (token.id !== token2.id) {\n      setToken2(token)\n      setToken1Amount('')\n      setToken2Amount('')\n    }\n  }\n\n  function onToken1AmountChange(amount) {\n    setToken1Amount(amount)\n    if (pairs.length && !!getPairByToken()) {\n      if (amount) {\n        setToken2Amount(Math.ceil(amount * getPairPrice() * (10 ** token2.decimals)) / (10 ** token2.decimals))\n      } else if (Number(amount) === 0) {\n        setToken2Amount('')\n      }\n    }\n  }\n\n  function onToken2AmountChange(amount) {\n    setToken2Amount(amount)\n    if (pairs.length && !!getPairByToken()) {\n      if (amount) {\n        setToken1Amount(Math.ceil(amount / getPairPrice() * (10 ** token1.decimals)) / (10 ** token1.decimals))\n      } else if (Number(amount) === 0) {\n        setToken1Amount('')\n      }\n    }\n  }\n\n  function getPairPrice() {\n    if (token1.id && token2.id && pairs.length) {\n      let pair = pairs.find((p) => p.token1 === token1.id && p.token2 === token2.id)\n      if (pair) {\n        return (pair.reserve2 / (10 ** token2.decimals)) / (pair.reserve1 / (10 ** token1.decimals))\n      }\n      pair = pairs.find((p) => p.token1 === token2.id && p.token2 === token1.id)\n      if (pair) {\n        return (pair.reserve1 / (10 ** token1.decimals)) / (pair.reserve2 / (10 ** token2.decimals))\n      }\n    }\n\n    return 0\n  }\n\n  function getShareOfPool() {\n    if (isFirstProvider) {\n      return '100%'\n    } else {\n      const pair = getPairByToken()\n      const amountProduct = token1Amount * (10 ** token1.decimals) * token2Amount * (10 ** token2.decimals)\n\n      if (pair) {\n        return `${(amountProduct / (amountProduct + pair.reserve1 * pair.reserve2) * 100).toFixed(2)}%`\n      }\n      return `0%`\n    }\n  }\n\n  function onNavigateToPool() {\n    history.goBack()\n  }\n\n  async function onAdd() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    if (token1Amount <= 0 || token2Amount <= 0) {\n      Alert.error('Amount should be greater than 0')\n      return\n    }\n    if (token1.id && token1.id === token2.id) {\n      Alert.error('Input should be different')\n      return\n    }\n\n    try {\n      const args = [\n        {\n          type: 'Address',\n          value: account\n        },\n        {\n          type: 'Long',\n          value: token1.id\n        },\n        {\n          type: 'Long',\n          value: token2.id\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token1Amount).times(new BigNumber(10 ** token1.decimals)).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token2Amount).times(new BigNumber(10 ** token2.decimals)).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token1Amount).times(new BigNumber(10 ** token1.decimals)).times(1 - slippage / 100).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token2Amount).times(new BigNumber(10 ** token2.decimals)).times(1 - slippage / 100).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Address',\n          value: account\n        }\n      ]\n      const addResult = await client.api.smartContract.invokeWasm({\n        scriptHash: SWAP_ADDRESS,\n        operation: 'add_liquidity',\n        args,\n        gasPrice: 2500,\n        gasLimit: 30000000,\n        requireIdentity: false\n      })\n\n      if (addResult.transaction) {\n        setBalanceChange(balanceChange + 1)\n        setToken1Amount('')\n        setToken2Amount('')\n        setModal('infoModal', {\n          show: true,\n          type: 'success',\n          text: 'Transaction Successful',\n          extraText: 'View Transaction',\n          extraLink: `${TRANSACTION_BASE_URL}${addResult.transaction}${TRANSACTION_AFTERFIX}`\n        })\n      }\n    } catch (e) {\n      setModal('infoModal', {\n        show: true,\n        type: 'error',\n        text: 'Transaction Failed',\n        // extraText: `${e}`,\n        extraText: '',\n        extraLink: ''\n      })\n    }\n  }\n\n  return (\n    <div className=\"add-liquidity-wrapper\">\n      <div className=\"al-header\">Add Liquidity\n        <div className=\"back-icon\" onClick={() => onNavigateToPool()}></div>\n      </div>\n      <div className=\"al-wrapper\">\n        {\n          isValidPair && isFirstProvider ? (\n            <div className=\"first-provider-hint\">\n              <div><strong>You are the first liquidity provider.</strong><br /><br />The ratio of tokens you add will set the price of this pool.</div>\n            </div>\n          ) : null\n        }\n        <TokenInput\n          balanceChange={balanceChange}\n          tokens={swapTokens}\n          value={token1Amount}\n          onTokenChange={(token) => onChangeToken1(token)}\n          onAmountChange={(amount) => onToken1AmountChange(amount)} />\n        <div className=\"icon-plus\"></div>\n        <TokenInput\n          balanceChange={balanceChange}\n          tokens={swapTokens}\n          value={token2Amount}\n          defaultTokenId={swapTokens.length && swapTokens[1].id}\n          onTokenChange={(token) => onChangeToken2(token)}\n          onAmountChange={(amount) => onToken2AmountChange(amount)} />\n        {\n          isValidPair && showPriceInfo ? (\n            <div className=\"al-price-wrapper\">\n              <div className=\"al-price-item\">\n                <div className=\"price-item-detail\">{getPairPrice().toFixed(4)}</div>\n                <div className=\"price-item-label\">{token2.name} per {token1.name}</div>\n              </div>\n              <div className=\"al-price-item\">\n                <div className=\"price-item-detail\">{(1 / getPairPrice()).toFixed(4)}</div>\n                <div className=\"price-item-label\">{token1.name} per {token2.name}</div>\n              </div>\n              <div className=\"al-price-item\">\n                <div className=\"price-item-detail\">{getShareOfPool()}</div>\n                <div className=\"price-item-label\">Share of Pool</div>\n              </div>\n            </div>\n          ) : null\n        }\n        <div className=\"al-add-btn\" onClick={() => onAdd()}>Add</div>\n      </div>\n    </div>\n  )\n}\n\nexport default AddLiquidity\n","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useHistory, useLocation } from \"react-router-dom\"\nimport { useMappedState, useDispatch } from 'redux-react-hook'\nimport { utils } from 'ontology-ts-sdk'\nimport { useAlert } from 'react-alert'\nimport BigNumber from 'bignumber.js'\nimport Slider from 'rc-slider'\nimport { useFetchPairs } from '../../../hooks/usePair';\nimport { SWAP_ADDRESS, TRANSACTION_BASE_URL, TRANSACTION_AFTERFIX } from '../../../config'\nimport 'rc-slider/assets/index.css'\nimport './index.css'\n\nconst { StringReader } = utils\n\nconst RemoveLiquidity = () => {\n  const [liquidityBalance, setLiquidityBalance] = useState(0)\n  const [token1, setToken1] = useState({})\n  const [token2, setToken2] = useState({})\n  const [token1Amount, setToken1Amount] = useState(0)\n  const [token2Amount, setToken2Amount] = useState(0)\n  const [pair, setPair] = useState({})\n  const [amount, setAmount] = useState(0)\n  const [showPrice, setShowPrice] = useState(false)\n  const { account, slippage, tokens, pairs } = useMappedState((state) => ({\n    account: state.wallet.account,\n    slippage: state.wallet.slippage,\n    tokens: state.common.tokens,\n    pairs: state.swap.pairs\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n  const Alert = useAlert()\n  const history = useHistory()\n  const location = useLocation()\n  const pairId = location.pathname.match(/\\/([^/]+)$/)[1]\n\n  useFetchPairs()\n\n  useEffect(() => {\n    if (account && pairs.length && pairId) {\n      getLiquidityBalanceByPairId(pairId).then((resp) => {\n        setLiquidityBalance(resp)\n      })\n    }\n  }, [account, pairs])\n\n  useEffect(() => {\n    if (tokens.length && pairs.length && pairId) {\n      const pair = pairs.find((p) => `${p.id}` === pairId)\n      setPair(pair)\n      setToken1(tokens.find((t) => t.id === pair.token1))\n      setToken2(tokens.find((t) => t.id === pair.token2))\n      setShowPrice(true)\n    }\n  }, [pairs, tokens])\n\n  useEffect(() => {\n    if (pair && token1.id && token2.id && pairId && liquidityBalance) {\n      const balance = liquidityBalance / (10 ** 18)\n      const shareOfPool = Math.sqrt(Math.pow(balance, 2) / (pair.reserve1 * pair.reserve2 / (10 ** (token1.decimals + token2.decimals))))\n      const token1Amount = (pair.reserve1 * shareOfPool / (10 ** token1.decimals))\n      const token2Amount = (pair.reserve2 * shareOfPool / (10 ** token2.decimals))\n\n      setToken1Amount(amount / 100 * token1Amount)\n      setToken2Amount(amount / 100 * token2Amount)\n    }\n  }, [amount, pair, token1, token2])\n\n  function getLiquidityBalanceByPairId(id) {\n    return client.api.smartContract.invokeWasmRead({\n      scriptHash: SWAP_ADDRESS,\n      operation: 'balanceOf',\n      args: [\n        {\n          type: 'Long',\n          value: id\n        },\n        {\n          type: 'Address',\n          value: account\n        }\n      ]\n    }).then((resp) => {\n      const strReader = new StringReader(resp)\n      const balance = strReader.readUint128()\n      \n      return balance\n    })\n  }\n\n  function getPairPrice() {\n    return (pair.reserve2 / (10 ** token2.decimals)) / (pair.reserve1 / (10 ** token1.decimals))\n  }\n\n  function onNavigateToPool() {\n    history.goBack()\n  }\n\n  async function onRemove() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n\n    try {\n      const args = [\n        {\n          type: 'Address',\n          value: account\n        },\n        {\n          type: 'Long',\n          value: token1.id\n        },\n        {\n          type: 'Long',\n          value: token2.id\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(liquidityBalance).times(amount / 100).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token1Amount).times(10 ** token1.decimals).times(1 - slippage / 100).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Long',\n          value: new BigNumber(token2Amount).times(10 ** token2.decimals).times(1 - slippage / 100).integerValue(BigNumber.ROUND_UP).toString()\n        },\n        {\n          type: 'Address',\n          value: account\n        }\n      ]\n      const addResult = await client.api.smartContract.invokeWasm({\n        scriptHash: SWAP_ADDRESS,\n        operation: 'remove_liquidity',\n        args,\n        gasPrice: 2500,\n        gasLimit: 30000000,\n        requireIdentity: false\n      })\n\n      if (addResult.transaction) {\n        setModal('infoModal', {\n          show: true,\n          type: 'success',\n          text: 'Transaction Successful',\n          extraText: 'View Transaction',\n          extraLink: `${TRANSACTION_BASE_URL}${addResult.transaction}${TRANSACTION_AFTERFIX}`\n        })\n      }\n    } catch (e) {\n      setModal('infoModal', {\n        show: true,\n        type: 'error',\n        text: 'Transaction Failed',\n        // extraText: `${e}`,\n        extraText: '',\n        extraLink: ''\n      })\n    }\n  }\n\n  return (\n    <div className=\"remove-liquidity-wrapper\">\n      <div className=\"rl-header\">Remove Liquidity\n        <div className=\"back-icon\" onClick={() => onNavigateToPool()}></div>\n      </div>\n      <div className=\"rl-wrapper\">\n        <div className=\"rl-amount\">\n          <div className=\"rl-amount-label\">Amount<span>{amount}%</span></div>\n          <Slider value={amount} onChange={(e) => setAmount(e)} />\n          <div className=\"quick-items\">\n            <div className=\"quick-item\" onClick={() => setAmount(25)}>25%</div>\n            <div className=\"quick-item\" onClick={() => setAmount(50)}>50%</div>\n            <div className=\"quick-item\" onClick={() => setAmount(75)}>75%</div>\n            <div className=\"quick-item\" onClick={() => setAmount(100)}>Max</div>\n          </div>\n        </div>\n        <div className=\"icon-arrow-down\"></div>\n        <div className=\"rl-receive-wrapper\">\n          <div className={`receive-token-item icon-${token1.name}`}>\n            {token1.name}\n            <span>{token1Amount}</span>\n          </div>\n          <div className={`receive-token-item icon-${token2.name}`}>\n            {token2.name}\n            <span>{token2Amount}</span>\n          </div>\n        </div>\n        {\n          showPrice ? (\n            <div className=\"rl-price-wrapper\">\n              <div className=\"price-wrapper-lable\">Price</div>\n              <div className=\"price\">1 {token1.name} = {getPairPrice()} {token2.name}</div>\n              <div className=\"price-reverse\">1 {token2.name} = {1 / getPairPrice()} {token1.name}</div>\n            </div>\n          ) : null\n        }\n        { amount ? <div className=\"rl-remove-btn\" onClick={() => onRemove()}>Remove</div> : <div className=\"rl-remove-btn disabled\">Remove</div> }\n      </div>\n    </div>\n  )\n}\n\nexport default RemoveLiquidity","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect } from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { utils } from 'ontology-ts-sdk'\nimport BigNumber from 'bignumber.js'\nimport Tooltip from 'rc-tooltip'\nimport { useAlert } from 'react-alert'\nimport { useMappedState } from 'redux-react-hook'\nimport { STAKING_ADDRESS } from '../../config'\nimport { getTokenIconDom } from '../../utils/token'\n\nimport 'rc-tooltip/assets/bootstrap.css'\nimport './index.css'\n\nconst { StringReader } = utils\n\nconst Staking = () => {\n  const [stakingTokens, setStakingTokens] = useState([])\n  const { account, tokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    tokens: state.common.tokens\n  }))\n\n  const history = useHistory()\n  const Alert = useAlert()\n\n  useEffect(() => {\n    getStakingTokenBalance()\n    let interval = setInterval(() => getStakingTokenBalance, 2000)\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [tokens])\n\n  function getStakingTokenBalance() {\n    if (tokens.length) {\n      try {\n        client.api.smartContract.invokeWasmRead({\n          scriptHash: STAKING_ADDRESS,\n          operation: 'stat',\n          args: []\n        }).then((statStr) => {\n          const parsedTokens = []\n          const strReader = new StringReader(statStr)\n          const tokenCount = strReader.readNextLen()\n          for (let i = 0; i < tokenCount; i++) {\n            const token = {}\n            token.id = strReader.readUint128()\n            const tempToken = tokens.find((t) => t.id === token.id)\n            token.weight = strReader.readUint128()\n            token.balance = strReader.readUint128()\n\n            parsedTokens.push(Object.assign(tempToken, token))\n          }\n\n          const tokenMap = {}\n          for (let i = 0; i < parsedTokens.length; i++) {\n            tokenMap[parsedTokens[i].id] = parsedTokens[i]\n          }\n\n          const totalWeight = Object.values(tokenMap).filter((t) => t.balance).reduce((a, b) => a + b.weight, 0)\n          const filteredTokens = Object.values(tokenMap).map((t) => {\n            return {\n              ...t,\n              originWeight: t.weight,\n              weight: t.balance ? (t.weight / totalWeight) : 0\n            }\n          })\n\n          setStakingTokens(filteredTokens)\n        })\n        .catch((e) => {\n          console.log(e)\n        })\n      } catch (e) {\n        console.log(e)\n      }\n    }\n  }\n\n  // useEffect(() => {\n  //   client.api.smartContract.invokeWasmRead({\n  //     scriptHash: STAKING_ADDRESS,\n  //     operation: 'staking_info',\n  //     args: []\n  //   })\n  //   .then((infoStr) => {\n  //     const info = {}\n  //     const strReader = new StringReader(infoStr)\n  //     info.amount = strReader.readUint128()\n  //     info.period = strReader.readUint128()\n  //     info.start_time = strReader.readUint128()\n  //     info.settled_time = strReader.readUint128()\n  //     info.interest = info.amount / info.period\n\n  //     setStakingInfo(info)\n  //   })\n  //   .catch((e) => {\n  //     handleError(e, (errorCode) => {\n  //       if (errorCode === 'CONTRACT_ADDRESS_ERROR') {\n  //         setStopStakingInterval(true)\n  //       } else {\n  //         console.log('get staking info', e)\n  //       }\n  //     })\n  //   })\n  // }, [])\n\n  function onSelectToken(token) {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    history.push(`/staking/${token.id}`)\n  }\n\n  function getTip(token) {\n    return `${token.name} is the hidden receipt for WING ${token.name.replace('f', '')} suppliers`\n  }\n\n  function generateStakingPool() {\n    if (stakingTokens.length) {\n      return stakingTokens.map((token) => {\n        return (\n          <div className=\"pool-list-item\" key={token.name}>\n            <div className=\"item-detail\">\n              <div className=\"item-detail-wrapper\">\n                { token.ty === 4 && <div className=\"corner-badge\">10X</div> }\n                <div className=\"staking-token\">\n                  {\n                    token.ty === 4 ? (\n                      <div className=\"staking-text\">Deposit\n                        {getTokenIconDom(token, 'stake-lp-token')}\n                      </div>\n                    ) : (\n                      <div className={`staking-text icon-${token.name}`}>Deposit</div>\n                    )\n                  }\n                  {\n                    token.name.startsWith('f') ? (\n                      <Tooltip placement=\"top\" overlay={getTip(token)}>\n                        <div className=\"staking-token-name\">{token.name}</div>\n                      </Tooltip>\n                    ) : <div className=\"staking-token-name\">{token.name}</div>\n                  }\n                </div>\n                <div className=\"earn-line\">Earn<span>UNX</span></div>\n                <div className=\"total-staking\">Total Staking<span>{new BigNumber(token.balance || 0).div(10 ** token.decimals).toString()}</span></div>\n                <div className=\"select-btn\" onClick={() => onSelectToken(token)}>Stake</div>\n              </div>\n            </div>\n          </div>\n        )\n      })\n    }\n  }\n\n  return (\n    <div className=\"stake-container\">\n      <div className=\"stake-pool\">\n        <div className=\"title\"></div>\n        <div className=\"pool-list\">\n          {generateStakingPool()}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Staking","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { useHistory, useLocation } from \"react-router-dom\"\nimport { utils } from 'ontology-ts-sdk'\nimport BigNumber from 'bignumber.js'\nimport { useAlert } from 'react-alert'\nimport { useMappedState, useDispatch } from 'redux-react-hook';\nimport Tooltip from 'rc-tooltip';\nimport Input from '../../../components/input'\nimport { getTokenBalance, getTokenIconDom } from '../../../utils/token'\nimport { GOVERNANCE_ADDRESS, STAKING_ADDRESS, TRANSACTION_BASE_URL, TRANSACTION_AFTERFIX } from '../../../config'\n\nimport './index.css'\n\nconst { StringReader } = utils\n\nconst StakingDetail = (props) => {\n  const [stakeToken, setStakeToken] = useState({})\n  const [tokenBalance, setTokenBalance] = useState('-')\n  const [amount, setAmount] = useState('')\n  const [myStake, setMyStake] = useState({})\n  const [stakeType, setStakeType] = useState('stake')\n  const [claimableWing, setClaimableWing] = useState(0)\n  const [showStakingModal, setShowStakingModal] = useState(false)\n  const { account, tokens } = useMappedState((state) => ({\n    account: state.wallet.account,\n    tokens: state.common.tokens\n  }))\n  const dispatch = useDispatch()\n  const setModal = useCallback((modalType, modalDetail) => dispatch({ type: 'SET_MODAL', modalType, modalDetail }), [])\n\n  const Alert = useAlert()\n  const location = useLocation()\n  const history = useHistory()\n  const tokenId = location.pathname.match(/\\/([^/]+)$/)[1]\n\n  useEffect(() => {\n    if (account && tokens.length) {\n      const sToken = tokens.find((t) => `${t.id}` === tokenId)\n\n      setStakeToken(sToken)\n      getTokenBalance(account, sToken, setTokenBalance)\n    }\n  }, [tokens, account])\n\n\n  useEffect(() => {\n    const getClaimableWing = () => {\n      if (account && stakeToken.ty === 3) {\n        client.api.smartContract.invokeWasmRead({\n          scriptHash: GOVERNANCE_ADDRESS,\n          operation: 'claimable_wing',\n          args: [\n            {\n              type: 'Address',\n              value: account\n            },\n            {\n              type: 'Long',\n              value: stakeToken.id\n            }\n          ]\n        }).then((resp) => {\n          const strReader = new StringReader(resp)\n\n          setClaimableWing(strReader.readUint128())\n        })\n      }\n    }\n\n    getClaimableWing()\n    let interval = setInterval(getClaimableWing, 10000)\n\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [account, stakeToken])\n\n  useEffect(() => {\n    if (account && stakeToken.id) {\n      getAccountStake()\n      const interval = setInterval(getAccountStake, 10000)\n      return () => {\n        interval && clearInterval(interval)\n      }\n    }\n  }, [stakeToken, account])\n\n  useEffect(() => {\n    if (!account) {\n      setMyStake({})\n    }\n  }, [account])\n\n  function getAccountStakeByTokenId(id) {\n    return client.api.smartContract.invokeWasmRead({\n      scriptHash: STAKING_ADDRESS,\n      operation: 'account_stake_info',\n      args: [\n        {\n          type: 'Address',\n          value: account\n        },\n        {\n          type: 'Long',\n          value: id\n        }\n      ]\n    }).then((stakeStr) => {\n      const strReader = new StringReader(stakeStr)\n      return {\n        id,\n        balance: new BigNumber(strReader.readUint128() || 0).div(10 ** (stakeToken.decimals || 0)).toString(),\n        interest: strReader.readUint128()\n      }\n    })\n  }\n\n  function getAccountStake() {\n    getAccountStakeByTokenId(tokenId)\n    .then((stake) => {\n      setMyStake(stake)\n    })\n    .catch((e) => {\n      console.log('get account stakes', e)\n    })\n  }\n\n  function handleStakeClick(action) {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    setStakeType(action)\n    setShowStakingModal(true)\n  }\n\n  async function onStake() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    if (stakeToken.id) {\n      if (amount <= 0) {\n        Alert.error('Amount should be greater than 0')\n        return\n      }\n      if (stakeType === 'unstake' && amount > myStake.balance) {\n        Alert.error('Amount should be less than your balance')\n        return\n      }\n      try {\n        const args = [\n          {\n            type: 'Address',\n            value: account\n          },\n          {\n            type: 'Long',\n            value: stakeToken.id\n          },\n          {\n            type: 'Long',\n            value: new BigNumber(amount).times(new BigNumber(10 ** stakeToken.decimals)).integerValue(BigNumber.ROUND_DOWN).toString()\n          }\n        ]\n        const param = {\n          scriptHash: STAKING_ADDRESS,\n          operation: stakeType,\n          args,\n          gasPrice: 2500,\n          gasLimit: 30000000,\n          requireIdentity: false\n        }\n\n        const stakeResult = await client.api.smartContract.invokeWasm(param)\n\n        if (stakeResult.transaction) {\n          setShowStakingModal(false)\n          setModal('infoModal', {\n            show: true,\n            type: 'success',\n            text: 'Transaction Successful',\n            extraText: 'View Transaction',\n            extraLink: `${TRANSACTION_BASE_URL}${stakeResult.transaction}${TRANSACTION_AFTERFIX}`\n          })\n        }\n      } catch (e) {\n        setShowStakingModal(false)\n        setModal('infoModal', {\n          show: true,\n          type: 'error',\n          text: 'Transaction Failed',\n          // extraText: `${e}`,\n          extraText: '',\n          extraLink: ''\n        })\n      }\n    }\n  }\n\n  async function onHarvest() {\n    if (!account) {\n      Alert.show('Please Connect Wallet First')\n      return\n    }\n    try {\n      const args = [\n        {\n          type: 'Address',\n          value: account\n        },\n        {\n          type: 'Long',\n          value: stakeToken.id\n        }\n      ]\n      const param = {\n        scriptHash: STAKING_ADDRESS,\n        operation: 'harvest',\n        args,\n        gasPrice: 2500,\n        gasLimit: 30000000,\n        requireIdentity: false\n      }\n\n      const harvestResult = await client.api.smartContract.invokeWasm(param)\n\n      if (harvestResult.transaction) {\n        setShowStakingModal(false)\n        setModal('infoModal', {\n          show: true,\n          type: 'success',\n          text: 'Transaction Successful',\n          extraText: 'View Transaction',\n          extraLink: `${TRANSACTION_BASE_URL}${harvestResult.transaction}${TRANSACTION_AFTERFIX}`\n        })\n      }\n    } catch (e) {\n      setModal('infoModal', {\n        show: true,\n        type: 'error',\n        text: 'Transaction Failed',\n        // extraText: `${e}`,\n        extraText: '',\n        extraLink: ''\n      })\n    }\n  }\n\n  function onNavigateToStaking() {\n    history.goBack()\n  }\n\n  const maxInput = () => {\n    if (stakeType === 'stake' && !isNaN(tokenBalance)) {\n      setAmount(tokenBalance)\n    } else if (stakeType === 'unstake' && !isNaN(myStake.balance)) {\n      setAmount(myStake.balance)\n    }\n  }\n\n  return (\n    <div className=\"stake-container\">\n      <div className=\"stake-title\">\n        <div className=\"back-icon\" onClick={() => onNavigateToStaking()} />\n        Earn <span className=\"icon-UNX\">UNX</span> by\n        {getTokenIconDom(stakeToken, 'inline-token-wrapper')}\n        {stakeToken.name || ''}\n      </div>\n      <div className=\"stake-token-detail\">\n        <div className=\"stake-token-amount\">\n          {getTokenIconDom(stakeToken, 'stake-token-wrapper')}\n          <div className=\"stake-token-amount-detail\">\n            <div className=\"stake-token-amount-label\">Current Staked</div>\n            <div className=\"stake-token-amount-info\">{myStake.balance} {stakeToken.name}</div>\n          </div>\n        </div>\n        <div className=\"stake-token-actions\">\n          <div className=\"stake-token-action\" onClick={() => handleStakeClick('stake')}>Stake</div>\n          <div className=\"stake-token-action\" onClick={() => handleStakeClick('unstake')}>Unstake</div>\n        </div>\n      </div>\n      <div className=\"harvest-token-detail\">\n        <div className=\"harvest-token-amount icon-UNX\">\n          <div className=\"harvest-token-amount-label\">Rewards Available</div>\n          <div className=\"harvest-token-amount-info\">{new BigNumber(myStake.interest || 0).div(10 ** 9).toString()} UNX</div>\n        </div>\n        <div className=\"harvest-token-actions\">\n          <div className=\"harvest-token-action\" onClick={() => onHarvest() }>Harvest</div>\n        </div>\n      </div>\n      {\n        stakeToken.ty === 3 ? (\n          <div className=\"claimable-wing-detail\">\n            <div className=\"claimable-wing-amount icon-WING\">{new BigNumber(claimableWing || 0).div(10 ** 9).toString()}\n              <div className=\"claimable-wing-label\">WING Earned\n                <Tooltip placement=\"top\" overlay=\"WING earned by ftoken will be transferred to your account when you stake or unstake\">\n                  <span>?</span>\n                </Tooltip>\n              </div>\n            </div>\n          </div>\n        ) : null\n      }\n      { showStakingModal ? (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-wrapper\">\n            <div className=\"close-btn\" onClick={() => { setShowStakingModal(false); setAmount(''); }}></div>\n            <div className=\"stake-wrapper\">\n              <div className={`icon-${stakeToken.name} token-placeholder`}></div>\n              <div className=\"form-item\">\n                <div className=\"input-label\">Amount\n                  {\n                    stakeType === 'stake' ? (\n                      <span className=\"hint\">Balance: {tokenBalance}</span>\n                    ) : (\n                      <span className=\"hint\">Staked: {myStake.balance}</span>\n                    )\n                  }\n                </div>\n                <div className=\"input-wrapper\">\n                  <Input placeholder=\"0.0\" value={amount} decimals={stakeToken.decimals || 0} onChange={(amount) => setAmount(amount)} />\n                  <div className=\"input-max-btn\" onClick={() => maxInput()}>MAX</div>\n                </div>\n              </div>\n              <div className=\"stake-btn\" onClick={() => onStake()}>{ stakeType === 'stake' ? 'Stake' : 'Unstake'}</div>\n            </div>\n          </div>\n        </div>\n      ) : null }\n    </div>\n  )\n}\n\nexport default StakingDetail","import React from 'react'\nimport './index.css'\n\nconst Token = (props) => {\n  return (\n    <div className=\"coming-soon-placeholder\"></div>\n  )\n}\n\nexport default Token","import React from 'react'\nimport { useMappedState } from 'redux-react-hook';\nimport { toLocaleFixed } from '../../utils/common'\nimport './index.css'\n\nconst Governance = (props) => {\n  const { poolStat } = useMappedState((state) => ({\n    poolStat: state.gov.poolStat\n  }))\n\n  return (\n    <div className=\"governance-wrapper\">\n      <div className=\"overview-wrapper\">\n        <div className=\"overview-title\">Overview</div>\n        <div className=\"overview-sections\">\n          <div className=\"overview-left\">\n            <p className=\"overview-section-title\">Total UNX</p>\n            <p className=\"overview-detail\">{toLocaleFixed(poolStat.distributionInfo.amount || 0)}</p>\n          </div>\n          <div className=\"overview-right\">\n            <p className=\"overview-section-title\">Daily Distribution</p>\n            <p className=\"overview-detail\">{toLocaleFixed(((poolStat.distributionInfo.amount || 0) / (poolStat.distributionInfo.period || 1) * 86400).toFixed(9))} <span>UNX</span></p>\n          </div>\n        </div>\n      </div>\n      <div className=\"distribution-wrapper\">\n        <div className=\"overview-title\">Distribution</div>\n        <div className=\"distribution-sections\">\n          <div className=\"pie-svg\">\n            <svg className=\"donut\" width=\"240px\" height=\"240px\" viewBox=\"0 0 42 42\" role=\"img\">\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#2BBE7F\" stroke-width=\"4\" stroke-dasharray=\"80, 20\" stroke-dashoffset=\"100\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"4\" stroke-dasharray=\"0.5, 99.5\" stroke-dashoffset=\"120\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FE332F\" stroke-width=\"4\" stroke-dasharray=\"8, 92\" stroke-dashoffset=\"219.5\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"4\" stroke-dasharray=\"0.5, 99.5\" stroke-dashoffset=\"311.5\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#F4BA5E\" stroke-width=\"4\" stroke-dasharray=\"8, 92\" stroke-dashoffset=\"411\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"4\" stroke-dasharray=\"0.5, 99.5\" stroke-dashoffset=\"503\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#2B3962\" stroke-width=\"4\" stroke-dasharray=\"3, 97\" stroke-dashoffset=\"602.5\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"4\" stroke-dasharray=\"0.5, 99.5\" stroke-dashoffset=\"699.5\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#F18DA5\" stroke-width=\"4\" stroke-dasharray=\"1, 99\" stroke-dashoffset=\"799\"></circle>\n              <circle cx=\"21\" cy=\"21\" r=\"15.915494309189533\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"4\" stroke-dasharray=\"0.5, 99.5\" stroke-dashoffset=\"898\"></circle>\n            </svg>\n          </div>\n          <div className=\"pie-desc\">\n            <div className=\"d-item\">\n              <div className=\"d-item-color\" style={ { background: '#2BBE7F' } }></div>\n              <div className=\"d-item-name\">Community</div>\n              <div className=\"d-item-ratio\">80%</div>\n            </div>\n            <div className=\"d-item\">\n              <div className=\"d-item-color\" style={ { background: '#FE332F' } }></div>\n              <div className=\"d-item-name\">Developer</div>\n              <div className=\"d-item-ratio\">8%</div>\n            </div>\n            <div className=\"d-item\">\n              <div className=\"d-item-color\" style={ { background: '#F4BA5E' } }></div>\n              <div className=\"d-item-name\">Foundation</div>\n              <div className=\"d-item-ratio\">8%</div>\n            </div>\n            <div className=\"d-item\">\n              <div className=\"d-item-color\" style={ { background: '#2B3962' } }></div>\n              <div className=\"d-item-name\">Resoucse Extension</div>\n              <div className=\"d-item-ratio\">3%</div>\n            </div>\n            <div className=\"d-item\">\n              <div className=\"d-item-color\" style={ { background: '#F18DA5' } }></div>\n              <div className=\"d-item-name\">Volunteer</div>\n              <div className=\"d-item-ratio\">1%</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Governance","import { useEffect, useCallback } from 'react'\nimport { client } from '@ont-dev/ontology-dapi'\nimport { utils } from 'ontology-ts-sdk'\nimport { GOVERNANCE_ADDRESS } from '../config'\nimport { handleError } from '../utils/errorHandle'\nimport { useMappedState, useDispatch } from 'redux-react-hook'\n\nconst { StringReader, hexstr2str, reverseHex } = utils\n\nexport const useFetchTokens = () => {\n  const { stopInterval, tokens } = useMappedState((state) => ({\n    stopInterval: state.common.stopInterval,\n    tokens: state.common.tokens\n  }))\n  const dispatch = useDispatch()\n  const setLoadingToken = useCallback((loadingToken) => dispatch({ type: 'SET_LOADING_TOKEN', loadingToken }), [])\n  const setTokens = useCallback((tokens) => dispatch({ type: 'SET_TOKENS', tokens }), [])\n  const setStopInterval = useCallback((stopInterval) => dispatch({ type: 'SET_STOP_INTERVAL', stopInterval }), [])\n  const setPoolStat = useCallback((poolStat) => dispatch({ type: 'SET_POOL_STAT', poolStat }), [])\n\n  useEffect(() => {\n    getGovStat()\n    let interval = !stopInterval && !tokens.length && setInterval(() => getGovStat, 1000)\n    return () => {\n      interval && clearInterval(interval)\n    }\n  }, [tokens, stopInterval])\n\n  function getGovStat() {\n    if (!tokens.length) {\n      try {\n        client.api.smartContract.invokeWasmRead({\n          scriptHash: GOVERNANCE_ADDRESS,\n          operation: 'stat',\n          args: []\n        }).then((statStr) => {\n          const strReader = new StringReader(statStr)\n          const distributionInfo = {}\n          distributionInfo.amount = strReader.readUint128() / (10 ** 9)\n          distributionInfo.period = strReader.readUint128()\n          distributionInfo.startTimeStamp = strReader.readUint128()\n          distributionInfo.settledTimeStamp = strReader.readUint128()\n    \n          const pools = []\n          const poolCount = strReader.readNextLen()\n          for (let i = 0; i < poolCount; i++) {\n            const pool = {}\n            const nameLength = strReader.readNextLen()\n            pool.name = hexstr2str(strReader.read(nameLength))\n            pool.address = reverseHex(strReader.read(20))\n            pool.weight = strReader.readUint128()\n            pools.push(pool)\n          }\n    \n          const upgrade = strReader.readBoolean()\n          const parsedTokens = []\n          const tokenCount = strReader.readNextLen()\n          for (let i = 0; i < tokenCount; i++) {\n            const token = {}\n            token.id = strReader.readUint128()\n            const nameLength = strReader.readNextLen()\n            token.name = hexstr2str(strReader.read(nameLength))\n            token.address = reverseHex(strReader.read(20))\n            token.ty = strReader.readUint8()\n            token.decimals = strReader.readUint128()\n\n            token.value = token.id\n            token.label = token.name\n\n            parsedTokens.push(token)\n          }\n\n          setLoadingToken(false)\n          setTokens(parsedTokens)\n          setPoolStat({\n            distributionInfo,\n            pools,\n            upgrade\n          })\n        })\n        .catch((e) => {\n          console.log(e)\n          handleError(e, (errorCode) => {\n            console.log(errorCode)\n            if (errorCode === 'CONTRACT_ADDRESS_ERROR') {\n              setStopInterval(true)\n            } else {\n              console.log('get all tokens', e)\n            }\n          })\n        })\n      } catch (e) {\n        console.log(e)\n      }\n    }\n  }\n\n  return null\n}","import { client } from '@ont-dev/ontology-dapi'\nimport React, { useCallback } from 'react'\nimport {\n  // BrowserRouter as Router,\n  HashRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom'\nimport { useAlert } from 'react-alert'\nimport { useMappedState, useDispatch } from 'redux-react-hook';\nimport Header from './components/header'\nimport Modal from './components/modal'\nimport Transaction from './pages/transaction'\nimport Swap from './pages/swap'\nimport Pool from './pages/pool'\nimport AddLiquidity from './pages/pool/addLiquidity'\nimport RemoveLiquidity from './pages/pool/removeLiquidity'\nimport Staking from './pages/staking'\nimport StakingDetail from './pages/staking/detail'\nimport Token from './pages/token'\nimport Overview from './pages/governance'\nimport { NETWORK_TYPE, READY_TABS } from './config'\nimport { useFetchTokens } from './hooks/useToken'\nimport './App.css'\n\nexport const App = () => {\n  const Alert = useAlert()\n  const { account, loadingToken } = useMappedState((state) => ({\n    loadingToken: state.common.loadingToken,\n    account: state.wallet.account\n  }))\n  const dispatch = useDispatch()\n  const setAccount = useCallback((account) => dispatch({ type: 'SET_ACCOUNT', account }), [])\n\n  useFetchTokens()\n\n  async function onConnectWallet() {\n    try {\n      await client.api.provider.getProvider()\n      const network = await client.api.network.getNetwork()\n      if (network && network.type !== NETWORK_TYPE) {\n        Alert.error(`Please connect to the ${NETWORK_TYPE}-Net`)\n        return\n      }\n      const accountAddress = await client.api.asset.getAccount()\n      setAccount(accountAddress)\n      localStorage.setItem('account', accountAddress)\n    } catch (e) {\n      if (e === 'NO_PROVIDER') {\n        Alert.error('Please install wallet extension first')\n      }\n    }\n  }\n\n  function onSignOut() {\n    setAccount('')\n    localStorage.setItem('account', '')\n  }\n\n  function renderLoading() {\n    if (loadingToken) {\n      return (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-wrapper transparent-bg\">\n            <div className=\"modal-icon-loading modal-icon\"></div>\n            <div className=\"modal-text light\">Loading...</div>\n          </div>\n        </div>\n      )\n    }\n    return null\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        {renderLoading()}\n        {\n          (account === null) && <div className=\"connect-wallet-overlay\">\n            <div className=\"connect-wrapper\">\n              <p className=\"connect-title\">Connect Wallet</p>\n              <div className=\"wallet-item\" onClick={() => onConnectWallet()}>Cyano Wallet</div>\n            </div>\n          </div>\n        }\n        <Modal />\n        <Header onSignOut={() => onSignOut()} onConnectWallet={() => onConnectWallet()} />\n        <div className=\"main-wrapper\">\n          <Switch>\n            {\n              READY_TABS.indexOf('/') >= 0 ?\n              <Route exact path=\"/\">\n                <Staking />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/') >= 0 ?\n              <Route exact path=\"/staking/:id\">\n                <StakingDetail />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/swap') >= 0 ?\n              <Route exact path=\"/swap\">\n                <Swap />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/swap') >= 0 ?\n              <Route exact path=\"/pool\">\n                <Pool />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/swap') >= 0 ?\n              <Route exact path=\"/pool/add\">\n                <AddLiquidity />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/swap') >= 0 ?\n              <Route exact path=\"/pool/remove/:id\">\n                <RemoveLiquidity />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/trade') >= 0 ?\n              <Route exact path=\"/trade\">\n                <Transaction />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/token') >= 0 ?\n              <Route exact path=\"/token\">\n                <Token />\n              </Route> : null\n            }\n            {\n              READY_TABS.indexOf('/governance') >= 0 ?\n              <Route exact path=\"/governance\">\n                <Overview />\n              </Route> : null\n            }\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  )\n}\n","const initState = {\n  infoModal: {\n    show: false,\n    type: '',\n    text: '',\n    extraText: '',\n    extraLink: ''\n  },\n}\n\nexport const modal = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_MODAL':\n      return { ...state, [action.modalType]: action.modalDetail }\n    default:\n      return { ...state }\n  }\n}","const initState = {\n  account: localStorage.getItem('account'),\n  slippage: localStorage.getItem('slippage') || '0.1'\n}\n\nexport const wallet = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_ACCOUNT':\n      return { ...state, account: action.account }\n    case 'SET_SLIPPAGE':\n      localStorage.setItem('slippage', action.slippage)\n      return { ...state, slippage: action.slippage }\n    default:\n      return { ...state }\n  }\n}","const initState = {\n  loadingToken: true,\n  stopInterval: false,\n  tokens: []\n}\n\nexport const common = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_LOADING_TOKEN':\n      return { ...state, loadingToken: action.loadingToken }\n    case 'SET_STOP_INTERVAL':\n      return { ...state, stopInterval: action.stopInterval }\n    case 'SET_TOKENS':\n      return { ...state, tokens: action.tokens }\n    default:\n      return { ...state }\n  }\n}\n","const initState = {\n  poolStat: {\n    distributionInfo: {},\n    pools: [],\n    upgrade: false\n  }\n}\n\nexport const gov = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_POOL_STAT':\n      return { ...state, poolStat: action.poolStat }\n    default:\n      return { ...state }\n  }\n}\n","const initState = {\n  tokens: [],\n  pairs: []\n}\n\nexport const swap = (state = initState, action) => {\n  switch (action.type) {\n    case 'SET_SWAP_TOKENS':\n      return { ...state, tokens: action.tokens }\n    case 'SET_PAIRS':\n      return { ...state, pairs: action.pairs }\n    default:\n      return { ...state }\n  }\n}\n","import { combineReducers } from 'redux'\nimport { modal } from './modal'\nimport { wallet } from './wallet'\nimport { common } from './common'\nimport { gov } from './gov'\nimport { swap } from './swap'\n\nconst reducers = combineReducers({\n  modal,\n  wallet,\n  common,\n  gov,\n  swap\n})\n\nexport default reducers","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport * as Ontology from '@ont-dev/ontology-dapi';\nimport { positions, Provider } from \"react-alert\";\nimport { createStore } from 'redux';\nimport { StoreContext } from 'redux-react-hook';\nimport AlertTemplate from \"react-alert-template-basic\";\nimport reducers from './reducers';\nimport reportWebVitals from './reportWebVitals';\n\nimport './styles/font.css';\nimport './styles/common.css';\nimport './index.css';\n\nconst store = createStore(reducers)\n\nOntology.client.registerClient({});\n\nconst options = {\n  timeout: 5000,\n  position: positions.TOP_CENTER\n};\n\nReactDOM.render(\n  <Provider template={AlertTemplate} {...options}>\n    <StoreContext.Provider value={store}>\n      <App />\n    </StoreContext.Provider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}